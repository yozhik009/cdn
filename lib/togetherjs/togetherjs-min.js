!function(){var e={dontShowClicks:!0,cloneClicks:!1,enableAnalytics:!1,analyticsCode:"UA-35433268-28",hubBase:null,getUserName:null,getUserColor:null,getUserAvatar:null,siteName:null,useMinimizedCode:void 0,on:{},hub_on:{},enableShortcut:!1,toolName:null,findRoom:null,autoStart:!1,suppressJoinConfirmation:!1,suppressInvite:!1,inviteFromRoom:null,storagePrefix:"togetherjs",includeHashInUrl:!1,disableWebRTC:!1,youtube:!0,ignoreMessages:["cursor-update","keydown","scroll-update"],ignoreForms:[":password"]},o="/lib/togetherjs/togetherjs.css",n="http://localhost/";"__baseUrl__"==n&&(n="");var t=!0,r=localStorage.getItem("togetherjs.baseUrlOverride");if(r){try{r=JSON.parse(r)}catch(e){r=null}if(!r||r.expiresAt<Date.now())localStorage.removeItem("togetherjs.baseUrlOverride");else{n=r.baseUrl;var i=console.warn||console.log;i.call(console,"Using TogetherJS baseUrlOverride:",n),i.call(console,"To undo run: localStorage.removeItem('togetherjs.baseUrlOverride')")}}var s=localStorage.getItem("togetherjs.configOverride");if(s){try{s=JSON.parse(s)}catch(e){s=null}if(!s||s.expiresAt<Date.now())localStorage.removeItem("togetherjs.configOverride");else{for(var a in s)"expiresAt"!=a&&s.hasOwnProperty(a)&&(console.warn("Using TogetherJS configOverride"),console.warn("To undo run: localStorage.removeItem('togetherjs.configOverride')"),window["TogetherJSConfig_"+a]=s[a],console.log("Config override:",a,"=",s[a]))}}var l="unknown",c="";if(c&&""!=c?l=c:c=Date.now()+"","undefined"==typeof console&&(console={}),console.log||(console.log=function(){}),["debug","info","warn","error"].forEach(function(e){console[e]||(console[e]=console.log)}),!n)for(var u=document.getElementsByTagName("script"),f=0;f<u.length;f++){var g=u[f].src;if(g&&-1!==g.search(/togetherjs.js(\?.*)?$/)){n=g.replace(/\/*togetherjs.js(\?.*)?$/,""),console.warn("Detected baseUrl as",n);break}if(g&&-1!==g.search(/togetherjs-min.js(\?.*)?$/)){n=g.replace(/\/*togetherjs-min.js(\?.*)?$/,""),console.warn("Detected baseUrl as",n);break}}function h(){if(!document.getElementById("togetherjs-stylesheet")){var e=document.createElement("link");e.id="togetherjs-stylesheet",e.setAttribute("rel","stylesheet"),e.href=o+"?bust="+c,document.head.appendChild(e)}}function d(e){var o=document.createElement("script");o.src=n+e+"?bust="+c,document.head.appendChild(o)}n||console.warn("Could not determine TogetherJS's baseUrl (looked for a <script> with togetherjs.js and togetherjs-min.js)");var w=window.TogetherJS=function e(o){if(e.running){(l=e.require("session")).close()}else{e.startup.button=null;try{o&&"object"==typeof o&&(o.target?e.startup.button=o.target:1==o.nodeType?e.startup.button=o:o[0]&&1==o[0].nodeType&&(e.startup.button=o[0]))}catch(e){console.warn("Error determining starting button:",e)}var n,r;window.TowTruckConfig&&(console.warn("TowTruckConfig is deprecated; please use TogetherJSConfig"),window.TogetherJSConfig?console.warn("Ignoring TowTruckConfig in favor of TogetherJSConfig"):window.TogetherJSConfig=TowTruckConfig),window.TogetherJSConfig&&!window.TogetherJSConfig.loaded&&(e.config(window.TogetherJSConfig),window.TogetherJSConfig.loaded=!0);var i={};for(n in window)0===n.indexOf("TogetherJSConfig_on_")?i[r=n.substr("TogetherJSConfig_on_".length)]=window[n]:0===n.indexOf("TogetherJSConfig_")?(r=n.substr("TogetherJSConfig_".length),e.config(r,window[n])):0===n.indexOf("TowTruckConfig_on_")?(r=n.substr("TowTruckConfig_on_".length),console.warn("TowTruckConfig_* is deprecated, please rename",n,"to TogetherJSConfig_on_"+r),i[r]=window[n]):0===n.indexOf("TowTruckConfig_")&&(r=n.substr("TowTruckConfig_".length),console.warn("TowTruckConfig_* is deprecated, please rename",n,"to TogetherJSConfig_"+r),e.config(r,window[n]));var s=e.config.get("on");for(n in i)i.hasOwnProperty(n)&&(s[n]=i[n]);e.config("on",s);for(n in s)e.on(n,s[n]);var a=e.config.get("hub_on");if(a)for(n in a)a.hasOwnProperty(n)&&e.hub.on(n,a[n]);if(e.startup.reason||(e.startup.reason="started"),e._loaded){var l=e.require("session");return h(),void l.start()}e.startup._launch=!0,h();var c=e.config.get("useMinimizedCode");e.config.close("useMinimizedCode"),void 0!==c&&(t=!!c);var u=e._extend(e.requireConfig),f=["session","jquery"];if(!t&&"function"==typeof require){if(!require.config)throw console.warn("The global require (",require,") is not requirejs; please use togetherjs-min.js"),new Error("Conflict with window.require");e.require=require.config(u)}"function"==typeof e.require?e.require(f,g):(u.deps=f,u.callback=g,t||(window.require=u)),d(t?"/lib/togetherjs/togetherjsPackage.js":"/lib/require.js")}function g(o,n){e._loaded=!0,t||(e.require=require.config({context:"togetherjs"}),e._requireObject=require)}};w.pageLoaded=Date.now(),w._extend=function(e,o){o||(o=e,e={});for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e},w._startupInit={button:null,reason:null,continued:!1,_joinShareId:null,_launch:!1},w.startup=w._extend(w._startupInit),w.running=!1,w.requireConfig={context:"togetherjs",baseUrl:n,urlArgs:"bust="+c,paths:{jquery:"lib/jquery-3.3.1.min",walkabout:"lib/walkabout/walkabout",esprima:"lib/walkabout/lib/esprima",falafel:"lib/walkabout/lib/falafel",tinycolor:"lib/tinycolor",whrandom:"lib/whrandom/random"}},w._mixinEvents=function(e){return e.on=function(e,o){if("function"!=typeof o)throw console.warn("Bad callback for",this,".once(",e,", ",o,")"),"Error: .once() called with non-callback";if(-1==e.search(" ")){if(this._knownEvents&&-1==this._knownEvents.indexOf(e)){var n=""+this;n.length>20&&(n=n.substr(0,20)+"..."),console.warn(n+".on('"+e+"', ...): unknown event"),console.trace&&console.trace()}this._listeners||(this._listeners={}),this._listeners[e]||(this._listeners[e]=[]),-1==this._listeners[e].indexOf(o)&&this._listeners[e].push(o)}else{e.split(/ +/g).forEach(function(e){this.on(e,o)},this)}},e.once=function(e,o){if("function"!=typeof o)throw console.warn("Bad callback for",this,".once(",e,", ",o,")"),"Error: .once() called with non-callback";var n="onceCallback_"+e;o[n]||(o[n]=function t(){o.apply(this,arguments),this.off(e,t),delete o[n]}),this.on(e,o[n])},e.off=e.removeListener=function(e,o){if(this._listenerOffs)this._listenerOffs.push([e,o]);else if(-1==e.search(" ")){if(this._listeners&&this._listeners[e])for(var n=this._listeners[e],t=n.length,r=0;r<t;r++)if(n[r]==o){n.splice(r,1);break}}else e.split(/ +/g).forEach(function(e){this.off(e,o)},this)},e.emit=function(e){var o=this._listenerOffs=[];if(this._listeners&&this._listeners[e]){var n=Array.prototype.slice.call(arguments,1);this._listeners[e].forEach(function(e){e.apply(this,n)},this),delete this._listenerOffs,o.length&&o.forEach(function(e){this.off(e[0],e[1])},this)}},e},w._teardown=function(){var e=w._requireObject||window.require;e.s&&e.s.contexts&&delete e.s.contexts.togetherjs,w._loaded=!1,w.startup=w._extend(w._startupInit),w.running=!1},w._mixinEvents(w),w._knownEvents=["ready","close"],w.toString=function(){return"TogetherJS"};var p="https://hub.togetherjs.com";"__hubUrl__"==p&&(p="https://hub.togetherjs.mozillalabs.com"),e.hubBase=p,w._configuration={},w._defaultConfiguration=e,w._configTrackers={},w._configClosed={},w.config=function(e,o){var n,t;if(1==arguments.length){if("object"!=typeof e)throw new Error("TogetherJS.config(value) must have an object value (not: "+e+")");n=e}else(n={})[e]=o;for(var r in n)if(n.hasOwnProperty(r)&&w._configClosed[r]&&w.running)throw new Error("The configuration "+r+" is finalized and cannot be changed");for(var r in n)if(n.hasOwnProperty(r)&&"loaded"!=r&&"callToStart"!=r){w._defaultConfiguration.hasOwnProperty(r)||console.warn("Unknown configuration value passed to TogetherJS.config():",r);var i=w._configuration[r],s=n[r];w._configuration[r]=s;var a=w._configTrackers[e]||[],l=!1;for(t=0;t<a.length;t++)try{(0,a[t])(s,i)}catch(o){console.warn("Error setting configuration",e,"to",s,":",o,"; reverting to",i),l=!0;break}if(l)for(w._configuration[r]=i,t=0;t<a.length;t++)try{(0,a[t])(s)}catch(o){console.warn("Error REsetting configuration",e,"to",i,":",o,"(ignoring)")}}},w.config.get=function(e){var o=w._configuration[e];return void 0===o&&(w._defaultConfiguration.hasOwnProperty(e)||console.error("Tried to load unknown configuration value:",e),o=w._defaultConfiguration[e]),o},w.config.track=function(e,o){if(!w._defaultConfiguration.hasOwnProperty(e))throw new Error("Configuration is unknown: "+e);return o(w.config.get(e)),w._configTrackers[e]||(w._configTrackers[e]=[]),w._configTrackers[e].push(o),o},w.config.close=function(e){if(!w._defaultConfiguration.hasOwnProperty(e))throw new Error("Configuration is unknown: "+e);w._configClosed[e]=!0},w.reinitialize=function(){w.running&&"function"==typeof w.require&&w.require(["session"],function(e){e.emit("reinitialize")})},w.refreshUserData=function(){w.running&&"function"==typeof w.require&&w.require(["session"],function(e){e.emit("refresh-user-data")})},w.version=l,w.baseUrl=n,w.hub=w._mixinEvents({}),w._onmessage=function(e){var o=e.type;o=0===o.search(/^app\./)?o.substr("app.".length):"togetherjs."+o,e.type=o,w.hub.emit(e.type,e)},w.send=function(e){if(!w.require)throw"You cannot use TogetherJS.send() when TogetherJS is not running";w.require("session").appSend(e)},w.shareUrl=function(){return w.require?w.require("session").shareUrl():null};var _=null;w.listenForShortcut=function(){console.warn("Listening for alt-T alt-T to start TogetherJS"),w.removeShortcut(),_=function e(o){84==o.which&&o.altKey?e.pressed?w():e.pressed=!0:e.pressed=!1},w.once("ready",w.removeShortcut),document.addEventListener("keyup",_,!1)},w.removeShortcut=function(){_&&(document.addEventListener("keyup",_,!1),_=null)},w.config.track("enableShortcut",function(e,o){e?w.listenForShortcut():o&&w.removeShortcut()}),w.checkForUsersOnChannel=function(e,o){0===e.search(/^https?:/i)&&(e=e.replace(/^http/i,"ws"));var n=new WebSocket(e),t=!1;n.onmessage=function(e){var r=JSON.parse(e.data);if("init-connection"==r.type){if(t)return console.warn("Somehow received two responses from channel; ignoring second"),void n.close();t=!0,n.close(),o(r.peerCount)}else console.warn("Got unexpected first message (should be init-connection):",r)},n.onclose=n.onerror=function(){t||(console.warn("Socket was closed without receiving answer"),t=!0,o(void 0))}};var T=location.hash.replace(/^#/,""),v=/&?togetherjs=([^&]*)/.exec(T);if(v){w.startup._joinShareId=v[1],w.startup.reason="joined";var S=T.substr(0,v.index)+T.substr(v.index+v[0].length);location.hash=S}function b(){if(w.startup._joinShareId)w();else if(window._TogetherJSBookmarklet)delete window._TogetherJSBookmarklet,w();else{var e=sessionStorage.getItem("togetherjs-session.status");e?(e=JSON.parse(e))&&e.running&&(w.startup.continued=!0,w.startup.reason=e.startupReason,w()):(window.TogetherJSConfig_autoStart||window.TogetherJSConfig&&window.TogetherJSConfig.autoStart)&&(w.startup.reason="joined",w())}}window._TogetherJSShareId&&(w.startup._joinShareId=window._TogetherJSShareId,delete window._TogetherJSShareId),function(){if(!window.TogetherJSConfig_noAutoStart){var e=window.TogetherJSConfig_callToStart;!e&&window.TowTruckConfig_callToStart&&(e=window.TowTruckConfig_callToStart,console.warn("Please rename TowTruckConfig_callToStart to TogetherJSConfig_callToStart")),window.TogetherJSConfig&&window.TogetherJSConfig.callToStart&&(e=window.TogetherJSConfig.callToStart),e?e(b):b()}}(),window.TogetherJSConfig_enableShortcut&&w.listenForShortcut(),window.TowTruck=w}();