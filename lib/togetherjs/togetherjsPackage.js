!function(){var e,t,n,o,r;!function(o){var r,i,s,a,l={},c={},u={},h={},d=Object.prototype.hasOwnProperty,f=[].slice,p=/\.js$/;function g(e,t){return d.call(e,t)}function m(e,t){var n,o,r,i,s,a,l,c,h,d,f,g=t&&t.split("/"),m=u.map,v=m&&m["*"]||{};if(e){for(s=(e=e.split("/")).length-1,u.nodeIdCompat&&p.test(e[s])&&(e[s]=e[s].replace(p,"")),"."===e[0].charAt(0)&&g&&(e=g.slice(0,g.length-1).concat(e)),h=0;h<e.length;h++)if("."===(f=e[h]))e.splice(h,1),h-=1;else if(".."===f){if(0===h||1===h&&".."===e[2]||".."===e[h-1])continue;h>0&&(e.splice(h-1,2),h-=2)}e=e.join("/")}if((g||v)&&m){for(h=(n=e.split("/")).length;h>0;h-=1){if(o=n.slice(0,h).join("/"),g)for(d=g.length;d>0;d-=1)if((r=m[g.slice(0,d).join("/")])&&(r=r[o])){i=r,a=h;break}if(i)break;!l&&v&&v[o]&&(l=v[o],c=h)}!i&&l&&(i=l,a=c),i&&(n.splice(0,a,i),e=n.join("/"))}return e}function v(e,t){return function(){var n=f.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),i.apply(o,n.concat([e,t]))}}function y(e){return function(t){l[e]=t}}function b(e){if(g(c,e)){var t=c[e];delete c[e],h[e]=!0,r.apply(o,t)}if(!g(l,e)&&!g(h,e))throw new Error("No "+e);return l[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function j(e){return e?w(e):[]}s=function(e,t){var n,o,r=w(e),i=r[0],s=t[1];return e=r[1],i&&(n=b(i=m(i,s))),i?e=n&&n.normalize?n.normalize(e,(o=s,function(e){return m(e,o)})):m(e,s):(i=(r=w(e=m(e,s)))[0],e=r[1],i&&(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},a={require:function(e){return v(e)},exports:function(e){var t=l[e];return void 0!==t?t:l[e]={}},module:function(e){return{id:e,uri:"",exports:l[e],config:(t=e,function(){return u&&u.config&&u.config[t]||{}})};var t}},r=function(e,t,n,r){var i,u,d,f,p,m,w,x=[],k=typeof n;if(m=j(r=r||e),"undefined"===k||"function"===k){for(t=!t.length&&n.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if("require"===(u=(f=s(t[p],m)).f))x[p]=a.require(e);else if("exports"===u)x[p]=a.exports(e),w=!0;else if("module"===u)i=x[p]=a.module(e);else if(g(l,u)||g(c,u)||g(h,u))x[p]=b(u);else{if(!f.p)throw new Error(e+" missing "+u);f.p.load(f.n,v(r,!0),y(u),{}),x[p]=l[u]}d=n?n.apply(l[e],x):void 0,e&&(i&&i.exports!==o&&i.exports!==l[e]?l[e]=i.exports:d===o&&w||(l[e]=d))}else e&&(l[e]=n)},e=t=i=function(e,t,n,l,c){if("string"==typeof e)return a[e]?a[e](t):b(s(e,j(t)).f);if(!e.splice){if((u=e).deps&&i(u.deps,u.callback),!t)return;t.splice?(e=t,t=n,n=null):e=o}return t=t||function(){},"function"==typeof n&&(n=l,l=c),l?r(o,e,t,n):setTimeout(function(){r(o,e,t,n)},4),i},i.config=function(e){return i(e)},e._defined=l,(n=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),g(l,e)||g(c,e)||(c[e]=[e,t,n])}).amd={jQuery:!0}}(),n("libs/almond",function(){}),o="undefined"!=typeof window?window:this,r=function(e,t){var o=[],r=e.document,i=Object.getPrototypeOf,s=o.slice,a=o.concat,l=o.push,c=o.indexOf,u={},h=u.toString,d=u.hasOwnProperty,f=d.toString,p=f.call(Object),g={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},y={type:!0,src:!0,noModule:!0};function b(e,t,n){var o,i=(t=t||r).createElement("script");if(i.text=e,n)for(o in y)n[o]&&(i[o]=n[o]);t.head.appendChild(i).parentNode.removeChild(i)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[h.call(e)]||"object":typeof e}var j=function(e,t){return new j.fn.init(e,t)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function k(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}j.fn=j.prototype={jquery:"3.3.1",constructor:j,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=j.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return j.each(this,e)},map:function(e){return this.pushStack(j.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},j.extend=j.fn.extend=function(){var e,t,n,o,r,i,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||m(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],s!==(o=e[t])&&(c&&o&&(j.isPlainObject(o)||(r=Array.isArray(o)))?(r?(r=!1,i=n&&Array.isArray(n)?n:[]):i=n&&j.isPlainObject(n)?n:{},s[t]=j.extend(c,i,o)):void 0!==o&&(s[t]=o));return s},j.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e)||(t=i(e))&&("function"!=typeof(n=d.call(t,"constructor")&&t.constructor)||f.call(n)!==p))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){b(e)},each:function(e,t){var n,o=0;if(k(e))for(n=e.length;o<n&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(k(Object(e))?j.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},merge:function(e,t){for(var n=+t.length,o=0,r=e.length;o<n;o++)e[r++]=t[o];return e.length=r,e},grep:function(e,t,n){for(var o=[],r=0,i=e.length,s=!n;r<i;r++)!t(e[r],r)!==s&&o.push(e[r]);return o},map:function(e,t,n){var o,r,i=0,s=[];if(k(e))for(o=e.length;i<o;i++)null!=(r=t(e[i],i,n))&&s.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&s.push(r);return a.apply([],s)},guid:1,support:g}),"function"==typeof Symbol&&(j.fn[Symbol.iterator]=o[Symbol.iterator]),j.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var T=function(e){var t,n,o,r,i,s,a,l,c,u,h,d,f,p,g,m,v,y,b,w="sizzle"+1*new Date,j=e.document,x=0,k=0,T=se(),C=se(),S=se(),E=function(e,t){return e===t&&(h=!0),0},A={}.hasOwnProperty,I=[],_=I.pop,N=I.push,D=I.push,L=I.slice,O=function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",P="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",q="\\["+M+"*("+P+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+M+"*\\]",H=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",J=new RegExp(M+"+","g"),U=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),B=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),W=new RegExp(H),V=new RegExp("^"+P+"$"),$={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var o="0x"+t-65536;return o!=o||n?t:o<0?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,1023&o|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){d()},re=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{D.apply(I=L.call(j.childNodes),j.childNodes),I[j.childNodes.length].nodeType}catch(e){D={apply:I.length?function(e,t){N.apply(e,L.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}function ie(e,t,o,r){var i,a,c,u,h,p,v,y=t&&t.ownerDocument,x=t?t.nodeType:9;if(o=o||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return o;if(!r&&((t?t.ownerDocument||t:j)!==f&&d(t),t=t||f,g)){if(11!==x&&(h=G.exec(e)))if(i=h[1]){if(9===x){if(!(c=t.getElementById(i)))return o;if(c.id===i)return o.push(c),o}else if(y&&(c=y.getElementById(i))&&b(t,c)&&c.id===i)return o.push(c),o}else{if(h[2])return D.apply(o,t.getElementsByTagName(e)),o;if((i=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(o,t.getElementsByClassName(i)),o}if(n.qsa&&!S[e+" "]&&(!m||!m.test(e))){if(1!==x)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,ne):t.setAttribute("id",u=w),a=(p=s(e)).length;a--;)p[a]="#"+u+" "+ve(p[a]);v=p.join(","),y=Z.test(e)&&ge(t.parentNode)||t}if(v)try{return D.apply(o,y.querySelectorAll(v)),o}catch(e){}finally{u===w&&t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,o,r)}function se(){var e=[];return function t(n,r){return e.push(n+" ")>o.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ae(e){return e[w]=!0,e}function le(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),r=n.length;r--;)o.attrHandle[n[r]]=t}function ue(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return ae(function(t){return t=+t,ae(function(n,o){for(var r,i=e([],n.length,t),s=i.length;s--;)n[r=i[s]]&&(n[r]=!(o[r]=n[r]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}n=ie.support={},i=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=ie.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:j;return s!==f&&9===s.nodeType&&s.documentElement?(p=(f=s).documentElement,g=!i(f),j!==f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",oe,!1):r.attachEvent&&r.attachEvent("onunload",oe)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(f.getElementsByClassName),n.getById=le(function(e){return p.appendChild(e).id=w,!f.getElementsByName||!f.getElementsByName(w).length}),n.getById?(o.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){return e.getAttribute("id")===t}},o.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(o.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},o.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,o,r,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(r=t.getElementsByName(e),o=0;i=r[o++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),o.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,o=[],r=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[r++];)1===n.nodeType&&o.push(n);return o}return i},o.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=Y.test(f.querySelectorAll))&&(le(function(e){p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",H)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Y.test(p.compareDocumentPosition),b=t||Y.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return h=!0,0;var o=!e.compareDocumentPosition-!t.compareDocumentPosition;return o||(1&(o=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===o?e===f||e.ownerDocument===j&&b(j,e)?-1:t===f||t.ownerDocument===j&&b(j,t)?1:u?O(u,e)-O(u,t):0:4&o?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,o=0,r=e.parentNode,i=t.parentNode,s=[e],a=[t];if(!r||!i)return e===f?-1:t===f?1:r?-1:i?1:u?O(u,e)-O(u,t):0;if(r===i)return ue(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[o]===a[o];)o++;return o?ue(s[o],a[o]):s[o]===j?-1:a[o]===j?1:0},f):f},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&d(e),t=t.replace(B,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var o=y.call(e,t);if(o||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return o}catch(e){}return ie(t,f,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==f&&d(e),b(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==f&&d(e);var r=o.attrHandle[t.toLowerCase()],i=r&&A.call(o.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==i?i:n.attributes||!g?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ie.escape=function(e){return(e+"").replace(te,ne)},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,o=[],r=0,i=0;if(h=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(E),h){for(;t=e[i++];)t===e[i]&&(r=o.push(i));for(;r--;)e.splice(o[r],1)}return u=null,e},r=ie.getText=function(e){var t,n="",o=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[o++];)n+=r(t);return n},(o=ie.selectors={cacheLength:50,createPseudo:ae,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Q,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Q,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Q,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(o){var r=ie.attr(o,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(J," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,o,r){var i="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===o&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,f,p,g=i!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(i){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&y){for(b=(f=(c=(u=(h=(d=m)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&c[1])&&c[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){u[e]=[x,f,b];break}}else if(y&&(b=f=(c=(u=(h=(d=t)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&c[1]),!1===b)for(;(d=++f&&d&&d[g]||(b=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((u=(h=d[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[x,b]),d!==t)););return(b-=r)===o||b%o==0&&b/o>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,n){for(var o,i=r(e,t),s=i.length;s--;)e[o=O(e,i[s])]=!(n[o]=i[s])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ae(function(e){var t=[],n=[],o=a(e.replace(U,"$1"));return o[w]?ae(function(e,t,n,r){for(var i,s=o(e,null,r,[]),a=e.length;a--;)(i=s[a])&&(e[a]=!(t[a]=i))}):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}}),has:ae(function(e){return function(t){return ie(e,t).length>0}}),contains:ae(function(e){return e=e.replace(Q,ee),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:ae(function(e){return V.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(Q,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var o=n<0?n+t:n;--o>=0;)e.push(o);return e}),gt:pe(function(e,t,n){for(var o=n<0?n+t:n;++o<t;)e.push(o);return e})}}).pseudos.nth=o.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})o.pseudos[t]=de(t);function me(){}function ve(e){for(var t=0,n=e.length,o="";t<n;t++)o+=e[t].value;return o}function ye(e,t,n){var o=t.dir,r=t.next,i=r||o,s=n&&"parentNode"===i,a=k++;return t.first?function(t,n,r){for(;t=t[o];)if(1===t.nodeType||s)return e(t,n,r);return!1}:function(t,n,l){var c,u,h,d=[x,a];if(l){for(;t=t[o];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[o];)if(1===t.nodeType||s)if(u=(h=t[w]||(t[w]={}))[t.uniqueID]||(h[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[o]||t;else{if((c=u[i])&&c[0]===x&&c[1]===a)return d[2]=c[2];if(u[i]=d,d[2]=e(t,n,l))return!0}return!1}}function be(e){return e.length>1?function(t,n,o){for(var r=e.length;r--;)if(!e[r](t,n,o))return!1;return!0}:e[0]}function we(e,t,n,o,r){for(var i,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(i=e[a])&&(n&&!n(i,o,r)||(s.push(i),c&&t.push(a)));return s}function je(e,t,n,o,r,i){return o&&!o[w]&&(o=je(o)),r&&!r[w]&&(r=je(r,i)),ae(function(i,s,a,l){var c,u,h,d=[],f=[],p=s.length,g=i||function(e,t,n){for(var o=0,r=t.length;o<r;o++)ie(e,t[o],n);return n}(t||"*",a.nodeType?[a]:a,[]),m=!e||!i&&t?g:we(g,d,e,a,l),v=n?r||(i?e:p||o)?[]:s:m;if(n&&n(m,v,a,l),o)for(c=we(v,f),o(c,[],a,l),u=c.length;u--;)(h=c[u])&&(v[f[u]]=!(m[f[u]]=h));if(i){if(r||e){if(r){for(c=[],u=v.length;u--;)(h=v[u])&&c.push(m[u]=h);r(null,v=[],c,l)}for(u=v.length;u--;)(h=v[u])&&(c=r?O(i,h):d[u])>-1&&(i[c]=!(s[c]=h))}}else v=we(v===s?v.splice(p,v.length):v),r?r(null,s,v,l):D.apply(s,v)})}function xe(e){for(var t,n,r,i=e.length,s=o.relative[e[0].type],a=s||o.relative[" "],l=s?1:0,u=ye(function(e){return e===t},a,!0),h=ye(function(e){return O(t,e)>-1},a,!0),d=[function(e,n,o){var r=!s&&(o||n!==c)||((t=n).nodeType?u(e,n,o):h(e,n,o));return t=null,r}];l<i;l++)if(n=o.relative[e[l].type])d=[ye(be(d),n)];else{if((n=o.filter[e[l].type].apply(null,e[l].matches))[w]){for(r=++l;r<i&&!o.relative[e[r].type];r++);return je(l>1&&be(d),l>1&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),n,l<r&&xe(e.slice(l,r)),r<i&&xe(e=e.slice(r)),r<i&&ve(e))}d.push(n)}return be(d)}return me.prototype=o.filters=o.pseudos,o.setFilters=new me,s=ie.tokenize=function(e,t){var n,r,i,s,a,l,c,u=C[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=o.preFilter;a;){n&&!(r=F.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(U," ")}),a=a.slice(n.length));for(s in o.filter)!(r=$[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ie.error(e):C(e,l).slice(0)},a=ie.compile=function(e,t){var n,r,i,a,l,u,h=[],p=[],m=S[e+" "];if(!m){for(t||(t=s(e)),n=t.length;n--;)(m=xe(t[n]))[w]?h.push(m):p.push(m);(m=S(e,(r=p,i=h,a=i.length>0,l=r.length>0,u=function(e,t,n,s,u){var h,p,m,v=0,y="0",b=e&&[],w=[],j=c,k=e||l&&o.find.TAG("*",u),T=x+=null==j?1:Math.random()||.1,C=k.length;for(u&&(c=t===f||t||u);y!==C&&null!=(h=k[y]);y++){if(l&&h){for(p=0,t||h.ownerDocument===f||(d(h),n=!g);m=r[p++];)if(m(h,t||f,n)){s.push(h);break}u&&(x=T)}a&&((h=!m&&h)&&v--,e&&b.push(h))}if(v+=y,a&&y!==v){for(p=0;m=i[p++];)m(b,w,t,n);if(e){if(v>0)for(;y--;)b[y]||w[y]||(w[y]=_.call(s));w=we(w)}D.apply(s,w),u&&!e&&w.length>0&&v+i.length>1&&ie.uniqueSort(s)}return u&&(x=T,c=j),b},a?ae(u):u))).selector=e}return m},l=ie.select=function(e,t,n,r){var i,l,c,u,h,d="function"==typeof e&&e,f=!r&&s(e=d.selector||e);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&o.relative[l[1].type]){if(!(t=(o.find.ID(c.matches[0].replace(Q,ee),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(i=$.needsContext.test(e)?0:l.length;i--&&(c=l[i],!o.relative[u=c.type]);)if((h=o.find[u])&&(r=h(c.matches[0].replace(Q,ee),Z.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(i,1),!(e=r.length&&ve(l)))return D.apply(n,r),n;break}}return(d||a(e,f))(r,t,!g,n,!t||Z.test(e)&&ge(t.parentNode)||t),n},n.sortStable=w.split("").sort(E).join("")===w,n.detectDuplicates=!!h,d(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(R,function(e,t,n){var o;if(!n)return!0===e[t]?t.toLowerCase():(o=e.getAttributeNode(t))&&o.specified?o.value:null}),ie}(e);j.find=T,j.expr=T.selectors,j.expr[":"]=j.expr.pseudos,j.uniqueSort=j.unique=T.uniqueSort,j.text=T.getText,j.isXMLDoc=T.isXML,j.contains=T.contains,j.escapeSelector=T.escape;var C=function(e,t,n){for(var o=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&j(e).is(n))break;o.push(e)}return o},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},E=j.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function _(e,t,n){return m(t)?j.grep(e,function(e,o){return!!t.call(e,o,e)!==n}):t.nodeType?j.grep(e,function(e){return e===t!==n}):"string"!=typeof t?j.grep(e,function(e){return c.call(t,e)>-1!==n}):j.filter(t,e,n)}j.filter=function(e,t,n){var o=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===o.nodeType?j.find.matchesSelector(o,e)?[o]:[]:j.find.matches(e,j.grep(t,function(e){return 1===e.nodeType}))},j.fn.extend({find:function(e){var t,n,o=this.length,r=this;if("string"!=typeof e)return this.pushStack(j(e).filter(function(){for(t=0;t<o;t++)if(j.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<o;t++)j.find(e,r[t],n);return o>1?j.uniqueSort(n):n},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&E.test(e)?j(e):e||[],!1).length}});var N,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(j.fn.init=function(e,t,n){var o,i;if(!e)return this;if(n=n||N,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:D.exec(e))||!o[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(o[1]){if(t=t instanceof j?t[0]:t,j.merge(this,j.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),I.test(o[1])&&j.isPlainObject(t))for(o in t)m(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(i=r.getElementById(o[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(j):j.makeArray(e,this)}).prototype=j.fn,N=j(r);var L=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}j.fn.extend({has:function(e){var t=j(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(j.contains(this,t[e]))return!0})},closest:function(e,t){var n,o=0,r=this.length,i=[],s="string"!=typeof e&&j(e);if(!E.test(e))for(;o<r;o++)for(n=this[o];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&j.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?j.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?c.call(j(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(j.uniqueSort(j.merge(this.get(),j(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),j.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return C(e,"parentNode")},parentsUntil:function(e,t,n){return C(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return C(e,"nextSibling")},prevAll:function(e){return C(e,"previousSibling")},nextUntil:function(e,t,n){return C(e,"nextSibling",n)},prevUntil:function(e,t,n){return C(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return A(e,"iframe")?e.contentDocument:(A(e,"template")&&(e=e.content||e),j.merge([],e.childNodes))}},function(e,t){j.fn[e]=function(n,o){var r=j.map(this,t,n);return"Until"!==e.slice(-5)&&(o=n),o&&"string"==typeof o&&(r=j.filter(o,r)),this.length>1&&(O[e]||j.uniqueSort(r),L.test(e)&&r.reverse()),this.pushStack(r)}});var M=/[^\x20\t\r\n\f]+/g;function P(e){return e}function q(e){throw e}function H(e,t,n,o){var r;try{e&&m(r=e.promise)?r.call(e).done(t).fail(n):e&&m(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(o))}catch(e){n.apply(void 0,[e])}}j.Callbacks=function(e){var t,n;e="string"==typeof e?(t=e,n={},j.each(t.match(M)||[],function(e,t){n[t]=!0}),n):j.extend({},e);var o,r,i,s,a=[],l=[],c=-1,u=function(){for(s=s||e.once,i=o=!0;l.length;c=-1)for(r=l.shift();++c<a.length;)!1===a[c].apply(r[0],r[1])&&e.stopOnFalse&&(c=a.length,r=!1);e.memory||(r=!1),o=!1,s&&(a=r?[]:"")},h={add:function(){return a&&(r&&!o&&(c=a.length-1,l.push(r)),function t(n){j.each(n,function(n,o){m(o)?e.unique&&h.has(o)||a.push(o):o&&o.length&&"string"!==w(o)&&t(o)})}(arguments),r&&!o&&u()),this},remove:function(){return j.each(arguments,function(e,t){for(var n;(n=j.inArray(t,a,n))>-1;)a.splice(n,1),n<=c&&c--}),this},has:function(e){return e?j.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return s=l=[],a=r="",this},disabled:function(){return!a},lock:function(){return s=l=[],r||o||(a=r=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),o||u()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},j.extend({Deferred:function(t){var n=[["notify","progress",j.Callbacks("memory"),j.Callbacks("memory"),2],["resolve","done",j.Callbacks("once memory"),j.Callbacks("once memory"),0,"resolved"],["reject","fail",j.Callbacks("once memory"),j.Callbacks("once memory"),1,"rejected"]],o="pending",r={state:function(){return o},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return j.Deferred(function(t){j.each(n,function(n,o){var r=m(e[o[4]])&&e[o[4]];i[o[1]](function(){var e=r&&r.apply(this,arguments);e&&m(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[o[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,o,r){var i=0;function s(t,n,o,r){return function(){var a=this,l=arguments,c=function(){var e,c;if(!(t<i)){if((e=o.apply(a,l))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(c)?r?c.call(e,s(i,n,P,r),s(i,n,q,r)):(i++,c.call(e,s(i,n,P,r),s(i,n,q,r),s(i,n,P,n.notifyWith))):(o!==P&&(a=void 0,l=[e]),(r||n.resolveWith)(a,l))}},u=r?c:function(){try{c()}catch(e){j.Deferred.exceptionHook&&j.Deferred.exceptionHook(e,u.stackTrace),t+1>=i&&(o!==q&&(a=void 0,l=[e]),n.rejectWith(a,l))}};t?u():(j.Deferred.getStackHook&&(u.stackTrace=j.Deferred.getStackHook()),e.setTimeout(u))}}return j.Deferred(function(e){n[0][3].add(s(0,e,m(r)?r:P,e.notifyWith)),n[1][3].add(s(0,e,m(t)?t:P)),n[2][3].add(s(0,e,m(o)?o:q))}).promise()},promise:function(e){return null!=e?j.extend(e,r):r}},i={};return j.each(n,function(e,t){var s=t[2],a=t[5];r[t[1]]=s.add,a&&s.add(function(){o=a},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),s.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,o=Array(n),r=s.call(arguments),i=j.Deferred(),a=function(e){return function(n){o[e]=this,r[e]=arguments.length>1?s.call(arguments):n,--t||i.resolveWith(o,r)}};if(t<=1&&(H(e,i.done(a(n)).resolve,i.reject,!t),"pending"===i.state()||m(r[n]&&r[n].then)))return i.then();for(;n--;)H(r[n],a(n),i.reject);return i.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;j.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&J.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},j.readyException=function(t){e.setTimeout(function(){throw t})};var U=j.Deferred();function F(){r.removeEventListener("DOMContentLoaded",F),e.removeEventListener("load",F),j.ready()}j.fn.ready=function(e){return U.then(e).catch(function(e){j.readyException(e)}),this},j.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--j.readyWait:j.isReady)||(j.isReady=!0,!0!==e&&--j.readyWait>0||U.resolveWith(r,[j]))}}),j.ready.then=U.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(j.ready):(r.addEventListener("DOMContentLoaded",F),e.addEventListener("load",F));var z=function(e,t,n,o,r,i,s){var a=0,l=e.length,c=null==n;if("object"===w(n)){r=!0;for(a in n)z(e,t,a,n[a],!0,i,s)}else if(void 0!==o&&(r=!0,m(o)||(s=!0),c&&(s?(t.call(e,o),t=null):(c=t,t=function(e,t,n){return c.call(j(e),n)})),t))for(;a<l;a++)t(e[a],n,s?o:o.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):i},B=/^-ms-/,W=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function $(e){return e.replace(B,"ms-").replace(W,V)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=j.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var o,r=this.cache(e);if("string"==typeof t)r[$(t)]=n;else for(o in t)r[$(o)]=t[o];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,o=e[this.expando];if(void 0!==o){if(void 0!==t){n=(t=Array.isArray(t)?t.map($):(t=$(t))in o?[t]:t.match(M)||[]).length;for(;n--;)delete o[t[n]]}(void 0===t||j.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!j.isEmptyObject(t)}};var Y=new K,G=new K,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function ee(e,t,n){var o,r;if(void 0===n&&1===e.nodeType)if(o="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(o))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:Z.test(r)?JSON.parse(r):r)}catch(e){}G.set(e,t,n)}else n=void 0;return n}j.extend({hasData:function(e){return G.hasData(e)||Y.hasData(e)},data:function(e,t,n){return G.access(e,t,n)},removeData:function(e,t){G.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),j.fn.extend({data:function(e,t){var n,o,r,i=this[0],s=i&&i.attributes;if(void 0===e){if(this.length&&(r=G.get(i),1===i.nodeType&&!Y.get(i,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(o=s[n].name).indexOf("data-")&&(o=$(o.slice(5)),ee(i,o,r[o]));Y.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){G.set(this,e)}):z(this,function(t){var n;if(i&&void 0===t){if(void 0!==(n=G.get(i,e)))return n;if(void 0!==(n=ee(i,e)))return n}else this.each(function(){G.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){G.remove(this,e)})}}),j.extend({queue:function(e,t,n){var o;if(e)return t=(t||"fx")+"queue",o=Y.get(e,t),n&&(!o||Array.isArray(n)?o=Y.access(e,t,j.makeArray(n)):o.push(n)),o||[]},dequeue:function(e,t){t=t||"fx";var n=j.queue(e,t),o=n.length,r=n.shift(),i=j._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),o--),r&&("fx"===t&&n.unshift("inprogress"),delete i.stop,r.call(e,function(){j.dequeue(e,t)},i)),!o&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:j.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),j.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?j.queue(this[0],e):void 0===t?this:this.each(function(){var n=j.queue(this,e,t);j._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&j.dequeue(this,e)})},dequeue:function(e){return this.each(function(){j.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,o=1,r=j.Deferred(),i=this,s=this.length,a=function(){--o||r.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Y.get(i[s],e+"queueHooks"))&&n.empty&&(o++,n.empty.add(a));return a(),r.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],re=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&j.contains(e.ownerDocument,e)&&"none"===j.css(e,"display")},ie=function(e,t,n,o){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.apply(e,o||[]);for(i in t)e.style[i]=s[i];return r};function se(e,t,n,o){var r,i,s=20,a=o?function(){return o.cur()}:function(){return j.css(e,t,"")},l=a(),c=n&&n[3]||(j.cssNumber[t]?"":"px"),u=(j.cssNumber[t]||"px"!==c&&+l)&&ne.exec(j.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)j.style(e,t,u+c),(1-i)*(1-(i=a()/l||.5))<=0&&(s=0),u/=i;u*=2,j.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],o&&(o.unit=c,o.start=u,o.end=r)),r}var ae={};function le(e,t){for(var n,o,r=[],i=0,s=e.length;i<s;i++)(o=e[i]).style&&(n=o.style.display,t?("none"===n&&(r[i]=Y.get(o,"display")||null,r[i]||(o.style.display="")),""===o.style.display&&re(o)&&(r[i]=(l=void 0,c=void 0,void 0,h=void 0,c=(a=o).ownerDocument,u=a.nodeName,(h=ae[u])||(l=c.body.appendChild(c.createElement(u)),h=j.css(l,"display"),l.parentNode.removeChild(l),"none"===h&&(h="block"),ae[u]=h,h)))):"none"!==n&&(r[i]="none",Y.set(o,"display",n)));var a,l,c,u,h;for(i=0;i<s;i++)null!=r[i]&&(e[i].style.display=r[i]);return e}j.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){re(this)?j(this).show():j(this).hide()})}});var ce=/^(?:checkbox|radio)$/i,ue=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?j.merge([e],n):n}function pe(e,t){for(var n=0,o=e.length;n<o;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td;var ge,me,ve=/<|&#?\w+;/;function ye(e,t,n,o,r){for(var i,s,a,l,c,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((i=e[f])||0===i)if("object"===w(i))j.merge(d,i.nodeType?[i]:i);else if(ve.test(i)){for(s=s||h.appendChild(t.createElement("div")),a=(ue.exec(i)||["",""])[1].toLowerCase(),l=de[a]||de._default,s.innerHTML=l[1]+j.htmlPrefilter(i)+l[2],u=l[0];u--;)s=s.lastChild;j.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(i));for(h.textContent="",f=0;i=d[f++];)if(o&&j.inArray(i,o)>-1)r&&r.push(i);else if(c=j.contains(i.ownerDocument,i),s=fe(h.appendChild(i),"script"),c&&pe(s),n)for(u=0;i=s[u++];)he.test(i.type||"")&&n.push(i);return h}ge=r.createDocumentFragment().appendChild(r.createElement("div")),(me=r.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),ge.appendChild(me),g.checkClone=ge.cloneNode(!0).cloneNode(!0).lastChild.checked,ge.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ge.cloneNode(!0).lastChild.defaultValue;var be=r.documentElement,we=/^key/,je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Te(){return!1}function Ce(){try{return r.activeElement}catch(e){}}function Se(e,t,n,o,r,i){var s,a;if("object"==typeof t){"string"!=typeof n&&(o=o||n,n=void 0);for(a in t)Se(e,a,n,o,t[a],i);return e}if(null==o&&null==r?(r=n,o=n=void 0):null==r&&("string"==typeof n?(r=o,o=void 0):(r=o,o=n,n=void 0)),!1===r)r=Te;else if(!r)return e;return 1===i&&(s=r,(r=function(e){return j().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=j.guid++)),e.each(function(){j.event.add(this,t,r,o,n)})}j.event={global:{},add:function(e,t,n,o,r){var i,s,a,l,c,u,h,d,f,p,g,m=Y.get(e);if(m)for(n.handler&&(n=(i=n).handler,r=i.selector),r&&j.find.matchesSelector(be,r),n.guid||(n.guid=j.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(t){return void 0!==j&&j.event.triggered!==t.type?j.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(M)||[""]).length;c--;)f=g=(a=xe.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=j.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=j.event.special[f]||{},u=j.extend({type:f,origType:g,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&j.expr.match.needsContext.test(r),namespace:p.join(".")},i),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,o,p,s)||e.addEventListener&&e.addEventListener(f,s)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),j.event.global[f]=!0)},remove:function(e,t,n,o,r){var i,s,a,l,c,u,h,d,f,p,g,m=Y.hasData(e)&&Y.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(M)||[""]).length;c--;)if(f=g=(a=xe.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=j.event.special[f]||{},d=l[f=(o?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=d.length;i--;)u=d[i],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||o&&o!==u.selector&&("**"!==o||!u.selector)||(d.splice(i,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||j.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)j.event.remove(e,f+t[c],n,o,!0);j.isEmptyObject(l)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,o,r,i,s,a=j.event.fix(e),l=new Array(arguments.length),c=(Y.get(this,"events")||{})[a.type]||[],u=j.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(s=j.event.handlers.call(this,a,c),t=0;(r=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(i.namespace)||(a.handleObj=i,a.data=i.data,void 0!==(o=((j.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,l))&&!1===(a.result=o)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,o,r,i,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],s={},n=0;n<l;n++)void 0===s[r=(o=t[n]).selector+" "]&&(s[r]=o.needsContext?j(r,this).index(c)>-1:j.find(r,this,null,[c]).length),s[r]&&i.push(o);i.length&&a.push({elem:c,handlers:i})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(j.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[j.expando]?e:new j.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ce()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ce()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&A(this,"input"))return this.click(),!1},_default:function(e){return A(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},j.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},j.Event=function(e,t){if(!(this instanceof j.Event))return new j.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&j.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[j.expando]=!0},j.Event.prototype={constructor:j.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},j.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&je.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},j.event.addProp),j.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){j.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,o=e.relatedTarget,r=e.handleObj;return o&&(o===this||j.contains(this,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),j.fn.extend({on:function(e,t,n,o){return Se(this,e,t,n,o)},one:function(e,t,n,o){return Se(this,e,t,n,o,1)},off:function(e,t,n){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,j(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){j.event.remove(this,e,n,t)})}});var Ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&j(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,o,r,i,s,a,l,c;if(1===t.nodeType){if(Y.hasData(e)&&(i=Y.access(e),s=Y.set(t,i),c=i.events)){delete s.handle,s.events={};for(r in c)for(n=0,o=c[r].length;n<o;n++)j.event.add(t,r,c[r][n])}G.hasData(e)&&(a=G.access(e),l=j.extend({},a),G.set(t,l))}}function Re(e,t,n,o){t=a.apply([],t);var r,i,s,l,c,u,h=0,d=e.length,f=d-1,p=t[0],v=m(p);if(v||d>1&&"string"==typeof p&&!g.checkClone&&Ie.test(p))return e.each(function(r){var i=e.eq(r);v&&(t[0]=p.call(this,r,i.html())),Re(i,t,n,o)});if(d&&(i=(r=ye(t,e[0].ownerDocument,!1,e,o)).firstChild,1===r.childNodes.length&&(r=i),i||o)){for(l=(s=j.map(fe(r,"script"),De)).length;h<d;h++)c=r,h!==f&&(c=j.clone(c,!0,!0),l&&j.merge(s,fe(c,"script"))),n.call(e[h],c,h);if(l)for(u=s[s.length-1].ownerDocument,j.map(s,Le),h=0;h<l;h++)c=s[h],he.test(c.type||"")&&!Y.access(c,"globalEval")&&j.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?j._evalUrl&&j._evalUrl(c.src):b(c.textContent.replace(_e,""),u,c))}return e}function Me(e,t,n){for(var o,r=t?j.filter(t,e):e,i=0;null!=(o=r[i]);i++)n||1!==o.nodeType||j.cleanData(fe(o)),o.parentNode&&(n&&j.contains(o.ownerDocument,o)&&pe(fe(o,"script")),o.parentNode.removeChild(o));return e}j.extend({htmlPrefilter:function(e){return e.replace(Ee,"<$1><$2>")},clone:function(e,t,n){var o,r,i,s,a,l,c,u=e.cloneNode(!0),h=j.contains(e.ownerDocument,e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||j.isXMLDoc(e)))for(s=fe(u),o=0,r=(i=fe(e)).length;o<r;o++)a=i[o],l=s[o],void 0,"input"===(c=l.nodeName.toLowerCase())&&ce.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(t)if(n)for(i=i||fe(e),s=s||fe(u),o=0,r=i.length;o<r;o++)Oe(i[o],s[o]);else Oe(e,u);return(s=fe(u,"script")).length>0&&pe(s,!h&&fe(e,"script")),u},cleanData:function(e){for(var t,n,o,r=j.event.special,i=0;void 0!==(n=e[i]);i++)if(X(n)){if(t=n[Y.expando]){if(t.events)for(o in t.events)r[o]?j.event.remove(n,o):j.removeEvent(n,o,t.handle);n[Y.expando]=void 0}n[G.expando]&&(n[G.expando]=void 0)}}}),j.fn.extend({detach:function(e){return Me(this,e,!0)},remove:function(e){return Me(this,e)},text:function(e){return z(this,function(e){return void 0===e?j.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(j.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return j.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,o=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!de[(ue.exec(e)||["",""])[1].toLowerCase()]){e=j.htmlPrefilter(e);try{for(;n<o;n++)1===(t=this[n]||{}).nodeType&&(j.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;j.inArray(this,e)<0&&(j.cleanData(fe(this)),n&&n.replaceChild(t,this))},e)}}),j.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){j.fn[e]=function(e){for(var n,o=[],r=j(e),i=r.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),j(r[s])[t](n),l.apply(o,n.get());return this.pushStack(o)}});var Pe=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},He=new RegExp(oe.join("|"),"i");function Je(e,t,n){var o,r,i,s,a=e.style;return(n=n||qe(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||j.contains(e.ownerDocument,e)||(s=j.style(e,t)),!g.pixelBoxStyles()&&Pe.test(s)&&He.test(t)&&(o=a.width,r=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=o,a.minWidth=r,a.maxWidth=i)),void 0!==s?s+"":s}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);o="1%"!==t.top,l=12===n(t.marginLeft),u.style.right="60%",a=36===n(t.right),i=36===n(t.width),u.style.position="absolute",s=36===u.offsetWidth||"absolute",be.removeChild(c),u=null}}function n(e){return Math.round(parseFloat(e))}var o,i,s,a,l,c=r.createElement("div"),u=r.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,j.extend(g,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s}}))}();var Fe=/^(none|table(?!-c[ea]).+)/,ze=/^--/,Be={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","Moz","ms"],$e=r.createElement("div").style;function Xe(e){var t=j.cssProps[e];return t||(t=j.cssProps[e]=function(e){if(e in $e)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ve.length;n--;)if((e=Ve[n]+t)in $e)return e}(e)||e),t}function Ke(e,t,n){var o=ne.exec(t);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):t}function Ye(e,t,n,o,r,i){var s="width"===t?1:0,a=0,l=0;if(n===(o?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=j.css(e,n+oe[s],!0,r)),o?("content"===n&&(l-=j.css(e,"padding"+oe[s],!0,r)),"margin"!==n&&(l-=j.css(e,"border"+oe[s]+"Width",!0,r))):(l+=j.css(e,"padding"+oe[s],!0,r),"padding"!==n?l+=j.css(e,"border"+oe[s]+"Width",!0,r):a+=j.css(e,"border"+oe[s]+"Width",!0,r));return!o&&i>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-a-.5))),l}function Ge(e,t,n){var o=qe(e),r=Je(e,t,o),i="border-box"===j.css(e,"boxSizing",!1,o),s=i;if(Pe.test(r)){if(!n)return r;r="auto"}return s=s&&(g.boxSizingReliable()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===j.css(e,"display",!1,o))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],s=!0),(r=parseFloat(r)||0)+Ye(e,t,n||(i?"border":"content"),s,o,r)+"px"}function Ze(e,t,n,o,r){return new Ze.prototype.init(e,t,n,o,r)}j.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Je(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,i,s,a=$(t),l=ze.test(t),c=e.style;if(l||(t=Xe(a)),s=j.cssHooks[t]||j.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,o))?r:c[t];"string"==(i=typeof n)&&(r=ne.exec(n))&&r[1]&&(n=se(e,t,r),i="number"),null!=n&&n==n&&("number"===i&&(n+=r&&r[3]||(j.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,o))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,o){var r,i,s,a=$(t);return ze.test(t)||(t=Xe(a)),(s=j.cssHooks[t]||j.cssHooks[a])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=Je(e,t,o)),"normal"===r&&t in We&&(r=We[t]),""===n||n?(i=parseFloat(r),!0===n||isFinite(i)?i||0:r):r}}),j.each(["height","width"],function(e,t){j.cssHooks[t]={get:function(e,n,o){if(n)return!Fe.test(j.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ge(e,t,o):ie(e,Be,function(){return Ge(e,t,o)})},set:function(e,n,o){var r,i=qe(e),s="border-box"===j.css(e,"boxSizing",!1,i),a=o&&Ye(e,t,o,s,i);return s&&g.scrollboxSize()===i.position&&(a-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Ye(e,t,"border",!1,i)-.5)),a&&(r=ne.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=j.css(e,t)),Ke(0,n,a)}}}),j.cssHooks.marginLeft=Ue(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Je(e,"marginLeft"))||e.getBoundingClientRect().left-ie(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),j.each({margin:"",padding:"",border:"Width"},function(e,t){j.cssHooks[e+t]={expand:function(n){for(var o=0,r={},i="string"==typeof n?n.split(" "):[n];o<4;o++)r[e+oe[o]+t]=i[o]||i[o-2]||i[0];return r}},"margin"!==e&&(j.cssHooks[e+t].set=Ke)}),j.fn.extend({css:function(e,t){return z(this,function(e,t,n){var o,r,i={},s=0;if(Array.isArray(t)){for(o=qe(e),r=t.length;s<r;s++)i[t[s]]=j.css(e,t[s],!1,o);return i}return void 0!==n?j.style(e,t,n):j.css(e,t)},e,t,arguments.length>1)}}),j.Tween=Ze,Ze.prototype={constructor:Ze,init:function(e,t,n,o,r,i){this.elem=e,this.prop=n,this.easing=r||j.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=i||(j.cssNumber[n]?"":"px")},cur:function(){var e=Ze.propHooks[this.prop];return e&&e.get?e.get(this):Ze.propHooks._default.get(this)},run:function(e){var t,n=Ze.propHooks[this.prop];return this.options.duration?this.pos=t=j.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ze.propHooks._default.set(this),this}},Ze.prototype.init.prototype=Ze.prototype,Ze.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=j.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){j.fx.step[e.prop]?j.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[j.cssProps[e.prop]]&&!j.cssHooks[e.prop]?e.elem[e.prop]=e.now:j.style(e.elem,e.prop,e.now+e.unit)}}},Ze.propHooks.scrollTop=Ze.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},j.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},j.fx=Ze.prototype.init,j.fx.step={};var Qe,et,tt,nt,ot=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function it(){et&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(it):e.setTimeout(it,j.fx.interval),j.fx.tick())}function st(){return e.setTimeout(function(){Qe=void 0}),Qe=Date.now()}function at(e,t){var n,o=0,r={height:e};for(t=t?1:0;o<4;o+=2-t)r["margin"+(n=oe[o])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function lt(e,t,n){for(var o,r=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),i=0,s=r.length;i<s;i++)if(o=r[i].call(n,t,e))return o}function ct(e,t,n){var o,r,i=0,s=ct.prefilters.length,a=j.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Qe||st(),n=Math.max(0,c.startTime+c.duration-t),o=1-(n/c.duration||0),i=0,s=c.tweens.length;i<s;i++)c.tweens[i].run(o);return a.notifyWith(e,[c,o,n]),o<1&&s?n:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:j.extend({},t),opts:j.extend(!0,{specialEasing:{},easing:j.easing._default},n),originalProperties:t,originalOptions:n,startTime:Qe||st(),duration:n.duration,tweens:[],createTween:function(t,n){var o=j.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(o),o},stop:function(t){var n=0,o=t?c.tweens.length:0;if(r)return this;for(r=!0;n<o;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,o,r,i,s;for(n in e)if(r=t[o=$(n)],i=e[n],Array.isArray(i)&&(r=i[1],i=e[n]=i[0]),n!==o&&(e[o]=i,delete e[n]),(s=j.cssHooks[o])&&"expand"in s){i=s.expand(i),delete e[o];for(n in i)n in e||(e[n]=i[n],t[n]=r)}else t[o]=r}(u,c.opts.specialEasing);i<s;i++)if(o=ct.prefilters[i].call(c,e,u,c.opts))return m(o.stop)&&(j._queueHooks(c.elem,c.opts.queue).stop=o.stop.bind(o)),o;return j.map(u,lt,c),m(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),j.fx.timer(j.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}j.Animation=j.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(M);for(var n,o=0,r=e.length;o<r;o++)n=e[o],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var o,r,i,s,a,l,c,u,h="width"in t||"height"in t,d=this,f={},p=e.style,g=e.nodeType&&re(e),m=Y.get(e,"fxshow");n.queue||(null==(s=j._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,j.queue(e,"fx").length||s.empty.fire()})}));for(o in t)if(r=t[o],ot.test(r)){if(delete t[o],i=i||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[o])continue;g=!0}f[o]=m&&m[o]||j.style(e,o)}if((l=!j.isEmptyObject(t))||!j.isEmptyObject(f)){h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=Y.get(e,"display")),"none"===(u=j.css(e,"display"))&&(c?u=c:(le([e],!0),c=e.style.display||c,u=j.css(e,"display"),le([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===j.css(e,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1;for(o in f)l||(m?"hidden"in m&&(g=m.hidden):m=Y.access(e,"fxshow",{display:c}),i&&(m.hidden=!g),g&&le([e],!0),d.done(function(){g||le([e]),Y.remove(e,"fxshow");for(o in f)j.style(e,o,f[o])})),l=lt(g?m[o]:0,o,d),o in m||(m[o]=l.start,g&&(l.end=l.start,l.start=0))}}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),j.speed=function(e,t,n){var o=e&&"object"==typeof e?j.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return j.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in j.fx.speeds?o.duration=j.fx.speeds[o.duration]:o.duration=j.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){m(o.old)&&o.old.call(this),o.queue&&j.dequeue(this,o.queue)},o},j.fn.extend({fadeTo:function(e,t,n,o){return this.filter(re).css("opacity",0).show().end().animate({opacity:t},e,n,o)},animate:function(e,t,n,o){var r=j.isEmptyObject(e),i=j.speed(t,n,o),s=function(){var t=ct(this,j.extend({},e),i);(r||Y.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(e,t,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",i=j.timers,s=Y.get(this);if(r)s[r]&&s[r].stop&&o(s[r]);else for(r in s)s[r]&&s[r].stop&&rt.test(r)&&o(s[r]);for(r=i.length;r--;)i[r].elem!==this||null!=e&&i[r].queue!==e||(i[r].anim.stop(n),t=!1,i.splice(r,1));!t&&n||j.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Y.get(this),o=n[e+"queue"],r=n[e+"queueHooks"],i=j.timers,s=o?o.length:0;for(n.finish=!0,j.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<s;t++)o[t]&&o[t].finish&&o[t].finish.call(this);delete n.finish})}}),j.each(["toggle","show","hide"],function(e,t){var n=j.fn[t];j.fn[t]=function(e,o,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(at(t,!0),e,o,r)}}),j.each({slideDown:at("show"),slideUp:at("hide"),slideToggle:at("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){j.fn[e]=function(e,n,o){return this.animate(t,e,n,o)}}),j.timers=[],j.fx.tick=function(){var e,t=0,n=j.timers;for(Qe=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||j.fx.stop(),Qe=void 0},j.fx.timer=function(e){j.timers.push(e),j.fx.start()},j.fx.interval=13,j.fx.start=function(){et||(et=!0,it())},j.fx.stop=function(){et=null},j.fx.speeds={slow:600,fast:200,_default:400},j.fn.delay=function(t,n){return t=j.fx&&j.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,o){var r=e.setTimeout(n,t);o.stop=function(){e.clearTimeout(r)}})},tt=r.createElement("input"),nt=r.createElement("select").appendChild(r.createElement("option")),tt.type="checkbox",g.checkOn=""!==tt.value,g.optSelected=nt.selected,(tt=r.createElement("input")).value="t",tt.type="radio",g.radioValue="t"===tt.value;var ut,ht=j.expr.attrHandle;j.fn.extend({attr:function(e,t){return z(this,j.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){j.removeAttr(this,e)})}}),j.extend({attr:function(e,t,n){var o,r,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?j.prop(e,t,n):(1===i&&j.isXMLDoc(e)||(r=j.attrHooks[t.toLowerCase()]||(j.expr.match.bool.test(t)?ut:void 0)),void 0!==n?null===n?void j.removeAttr(e,t):r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(o=r.get(e,t))?o:null==(o=j.find.attr(e,t))?void 0:o)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,o=0,r=t&&t.match(M);if(r&&1===e.nodeType)for(;n=r[o++];)e.removeAttribute(n)}}),ut={set:function(e,t,n){return!1===t?j.removeAttr(e,n):e.setAttribute(n,n),n}},j.each(j.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||j.find.attr;ht[t]=function(e,t,o){var r,i,s=t.toLowerCase();return o||(i=ht[s],ht[s]=r,r=null!=n(e,t,o)?s:null,ht[s]=i),r}});var dt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function pt(e){return(e.match(M)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}j.fn.extend({prop:function(e,t){return z(this,j.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[j.propFix[e]||e]})}}),j.extend({prop:function(e,t,n){var o,r,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&j.isXMLDoc(e)||(t=j.propFix[t]||t,r=j.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:e[t]=n:r&&"get"in r&&null!==(o=r.get(e,t))?o:e[t]},propHooks:{tabIndex:{get:function(e){var t=j.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(j.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),j.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){j.propFix[this.toLowerCase()]=this}),j.fn.extend({addClass:function(e){var t,n,o,r,i,s,a,l=0;if(m(e))return this.each(function(t){j(this).addClass(e.call(this,t,gt(this)))});if((t=mt(e)).length)for(;n=this[l++];)if(r=gt(n),o=1===n.nodeType&&" "+pt(r)+" "){for(s=0;i=t[s++];)o.indexOf(" "+i+" ")<0&&(o+=i+" ");r!==(a=pt(o))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,o,r,i,s,a,l=0;if(m(e))return this.each(function(t){j(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[l++];)if(r=gt(n),o=1===n.nodeType&&" "+pt(r)+" "){for(s=0;i=t[s++];)for(;o.indexOf(" "+i+" ")>-1;)o=o.replace(" "+i+" "," ");r!==(a=pt(o))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,o="string"===n||Array.isArray(e);return"boolean"==typeof t&&o?t?this.addClass(e):this.removeClass(e):m(e)?this.each(function(n){j(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,r,i,s;if(o)for(r=0,i=j(this),s=mt(e);t=s[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,o=0;for(t=" "+e+" ";n=this[o++];)if(1===n.nodeType&&(" "+pt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g;j.fn.extend({val:function(e){var t,n,o,r=this[0];return arguments.length?(o=m(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=o?e.call(this,n,j(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=j.map(r,function(e){return null==e?"":e+""})),(t=j.valHooks[this.type]||j.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=j.valHooks[r.type]||j.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(vt,""):null==n?"":n:void 0}}),j.extend({valHooks:{option:{get:function(e){var t=j.find.attr(e,"value");return null!=t?t:pt(j.text(e))}},select:{get:function(e){var t,n,o,r=e.options,i=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?i+1:r.length;for(o=i<0?l:s?i:0;o<l;o++)if(((n=r[o]).selected||o===i)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=j(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,o,r=e.options,i=j.makeArray(t),s=r.length;s--;)((o=r[s]).selected=j.inArray(j.valHooks.option.get(o),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),j.each(["radio","checkbox"],function(){j.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=j.inArray(j(e).val(),t)>-1}},g.checkOn||(j.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),g.focusin="onfocusin"in e;var yt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};j.extend(j.event,{trigger:function(t,n,o,i){var s,a,l,c,u,h,f,p,g=[o||r],y=d.call(t,"type")?t.type:t,b=d.call(t,"namespace")?t.namespace.split("."):[];if(a=p=l=o=o||r,3!==o.nodeType&&8!==o.nodeType&&!yt.test(y+j.event.triggered)&&(y.indexOf(".")>-1&&(y=(b=y.split(".")).shift(),b.sort()),u=y.indexOf(":")<0&&"on"+y,(t=t[j.expando]?t:new j.Event(y,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),n=null==n?[t]:j.makeArray(n,[t]),f=j.event.special[y]||{},i||!f.trigger||!1!==f.trigger.apply(o,n))){if(!i&&!f.noBubble&&!v(o)){for(c=f.delegateType||y,yt.test(c+y)||(a=a.parentNode);a;a=a.parentNode)g.push(a),l=a;l===(o.ownerDocument||r)&&g.push(l.defaultView||l.parentWindow||e)}for(s=0;(a=g[s++])&&!t.isPropagationStopped();)p=a,t.type=s>1?c:f.bindType||y,(h=(Y.get(a,"events")||{})[t.type]&&Y.get(a,"handle"))&&h.apply(a,n),(h=u&&a[u])&&h.apply&&X(a)&&(t.result=h.apply(a,n),!1===t.result&&t.preventDefault());return t.type=y,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),n)||!X(o)||u&&m(o[y])&&!v(o)&&((l=o[u])&&(o[u]=null),j.event.triggered=y,t.isPropagationStopped()&&p.addEventListener(y,bt),o[y](),t.isPropagationStopped()&&p.removeEventListener(y,bt),j.event.triggered=void 0,l&&(o[u]=l)),t.result}},simulate:function(e,t,n){var o=j.extend(new j.Event,n,{type:e,isSimulated:!0});j.event.trigger(o,null,t)}}),j.fn.extend({trigger:function(e,t){return this.each(function(){j.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return j.event.trigger(e,t,n,!0)}}),g.focusin||j.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){j.event.simulate(t,e.target,j.event.fix(e))};j.event.special[t]={setup:function(){var o=this.ownerDocument||this,r=Y.access(o,t);r||o.addEventListener(e,n,!0),Y.access(o,t,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this,r=Y.access(o,t)-1;r?Y.access(o,t,r):(o.removeEventListener(e,n,!0),Y.remove(o,t))}}});var wt=e.location,jt=Date.now(),xt=/\?/;j.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||j.error("Invalid XML: "+t),n};var kt=/\[\]$/,Tt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,St=/^(?:input|select|textarea|keygen)/i;function Et(e,t,n,o){var r;if(Array.isArray(t))j.each(t,function(t,r){n||kt.test(e)?o(e,r):Et(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,o)});else if(n||"object"!==w(t))o(e,t);else for(r in t)Et(e+"["+r+"]",t[r],n,o)}j.param=function(e,t){var n,o=[],r=function(e,t){var n=m(t)?t():t;o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!j.isPlainObject(e))j.each(e,function(){r(this.name,this.value)});else for(n in e)Et(n,e[n],t,r);return o.join("&")},j.fn.extend({serialize:function(){return j.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=j.prop(this,"elements");return e?j.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!j(this).is(":disabled")&&St.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!ce.test(e))}).map(function(e,t){var n=j(this).val();return null==n?null:Array.isArray(n)?j.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}});var At=/%20/g,It=/#.*$/,_t=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dt=/^(?:GET|HEAD)$/,Lt=/^\/\//,Ot={},Rt={},Mt="*/".concat("*"),Pt=r.createElement("a");function qt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var o,r=0,i=t.toLowerCase().match(M)||[];if(m(n))for(;o=i[r++];)"+"===o[0]?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(n)):(e[o]=e[o]||[]).push(n)}}function Ht(e,t,n,o){var r={},i=e===Rt;function s(a){var l;return r[a]=!0,j.each(e[a]||[],function(e,a){var c=a(t,n,o);return"string"!=typeof c||i||r[c]?i?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function Jt(e,t){var n,o,r=j.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:o||(o={}))[n]=t[n]);return o&&j.extend(!0,e,o),e}Pt.href=wt.href,j.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":j.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jt(Jt(e,j.ajaxSettings),t):Jt(j.ajaxSettings,e)},ajaxPrefilter:qt(Ot),ajaxTransport:qt(Rt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,i,s,a,l,c,u,h,d,f,p=j.ajaxSetup({},n),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?j(g):j.event,v=j.Deferred(),y=j.Callbacks("once memory"),b=p.statusCode||{},w={},x={},k="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=Nt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(e,t){return null==u&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==u&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||k;return o&&o.abort(t),C(0,t),this}};if(v.promise(T),p.url=((t||p.url||wt.href)+"").replace(Lt,wt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(M)||[""],null==p.crossDomain){c=r.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Pt.protocol+"//"+Pt.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=j.param(p.data,p.traditional)),Ht(Ot,p,n,T),u)return T;(h=j.event&&p.global)&&0==j.active++&&j.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Dt.test(p.type),i=p.url.replace(It,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(At,"+")):(f=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(xt.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(_t,"$1"),f=(xt.test(i)?"&":"?")+"_="+jt+++f),p.url=i+f),p.ifModified&&(j.lastModified[i]&&T.setRequestHeader("If-Modified-Since",j.lastModified[i]),j.etag[i]&&T.setRequestHeader("If-None-Match",j.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Mt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)T.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(g,T,p)||u))return T.abort();if(k="abort",y.add(p.complete),T.done(p.success),T.fail(p.error),o=Ht(Rt,p,n,T)){if(T.readyState=1,h&&m.trigger("ajaxSend",[T,p]),u)return T;p.async&&p.timeout>0&&(l=e.setTimeout(function(){T.abort("timeout")},p.timeout));try{u=!1,o.send(w,C)}catch(e){if(u)throw e;C(-1,e)}}else C(-1,"No Transport");function C(t,n,r,a){var c,d,f,w,x,k=n;u||(u=!0,l&&e.clearTimeout(l),o=void 0,s=a||"",T.readyState=t>0?4:0,c=t>=200&&t<300||304===t,r&&(w=function(e,t,n){for(var o,r,i,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in n)i=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){i=r;break}s||(s=r)}i=i||s}if(i)return i!==l[0]&&l.unshift(i),n[i]}(p,T,r)),w=function(e,t,n,o){var r,i,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(s=c[l+" "+i]||c["* "+i]))for(r in c)if((a=r.split(" "))[1]===i&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(i=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(p,w,T,c),c?(p.ifModified&&((x=T.getResponseHeader("Last-Modified"))&&(j.lastModified[i]=x),(x=T.getResponseHeader("etag"))&&(j.etag[i]=x)),204===t||"HEAD"===p.type?k="nocontent":304===t?k="notmodified":(k=w.state,d=w.data,c=!(f=w.error))):(f=k,!t&&k||(k="error",t<0&&(t=0))),T.status=t,T.statusText=(n||k)+"",c?v.resolveWith(g,[d,k,T]):v.rejectWith(g,[T,k,f]),T.statusCode(b),b=void 0,h&&m.trigger(c?"ajaxSuccess":"ajaxError",[T,p,c?d:f]),y.fireWith(g,[T,k]),h&&(m.trigger("ajaxComplete",[T,p]),--j.active||j.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return j.get(e,t,n,"json")},getScript:function(e,t){return j.get(e,void 0,t,"script")}}),j.each(["get","post"],function(e,t){j[t]=function(e,n,o,r){return m(n)&&(r=r||o,o=n,n=void 0),j.ajax(j.extend({url:e,type:t,dataType:r,data:n,success:o},j.isPlainObject(e)&&e))}}),j._evalUrl=function(e){return j.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},j.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=j(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return m(e)?this.each(function(t){j(this).wrapInner(e.call(this,t))}):this.each(function(){var t=j(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=m(e);return this.each(function(n){j(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){j(this).replaceWith(this.childNodes)}),this}}),j.expr.pseudos.hidden=function(e){return!j.expr.pseudos.visible(e)},j.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},j.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Ft=j.ajaxSettings.xhr();g.cors=!!Ft&&"withCredentials"in Ft,g.ajax=Ft=!!Ft,j.ajaxTransport(function(t){var n,o;if(g.cors||Ft&&!t.crossDomain)return{send:function(r,i){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);n=function(e){return function(){n&&(n=o=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?i(0,"error"):i(a.status,a.statusText):i(Ut[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),o=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=o:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&o()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),j.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),j.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return j.globalEval(e),e}}}),j.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),j.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(o,i){t=j("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}});var zt,Bt=[],Wt=/(=)\?(?=&|$)|\?\?/;j.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||j.expando+"_"+jt++;return this[e]=!0,e}}),j.ajaxPrefilter("json jsonp",function(t,n,o){var r,i,s,a=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Wt,"$1"+r):!1!==t.jsonp&&(t.url+=(xt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||j.error(r+" was not called"),s[0]},t.dataTypes[0]="json",i=e[r],e[r]=function(){s=arguments},o.always(function(){void 0===i?j(e).removeProp(r):e[r]=i,t[r]&&(t.jsonpCallback=n.jsonpCallback,Bt.push(r)),s&&m(i)&&i(s[0]),s=i=void 0}),"script"}),g.createHTMLDocument=((zt=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===zt.childNodes.length),j.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((o=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(o)):t=r),i=I.exec(e),s=!n&&[],i?[t.createElement(i[1])]:(i=ye([e],t,s),s&&s.length&&j(s).remove(),j.merge([],i.childNodes)));var o,i,s},j.fn.load=function(e,t,n){var o,r,i,s=this,a=e.indexOf(" ");return a>-1&&(o=pt(e.slice(a)),e=e.slice(0,a)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&j.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){i=arguments,s.html(o?j("<div>").append(j.parseHTML(e)).find(o):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},j.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){j.fn[t]=function(e){return this.on(t,e)}}),j.expr.pseudos.animated=function(e){return j.grep(j.timers,function(t){return e===t.elem}).length},j.offset={setOffset:function(e,t,n){var o,r,i,s,a,l,c=j.css(e,"position"),u=j(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),i=j.css(e,"top"),l=j.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1?(s=(o=u.position()).top,r=o.left):(s=parseFloat(i)||0,r=parseFloat(l)||0),m(t)&&(t=t.call(e,n,j.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):u.css(h)}},j.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){j.offset.setOffset(this,e,t)});var t,n,o=this[0];return o?o.getClientRects().length?(t=o.getBoundingClientRect(),n=o.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,o=this[0],r={top:0,left:0};if("fixed"===j.css(o,"position"))t=o.getBoundingClientRect();else{for(t=this.offset(),n=o.ownerDocument,e=o.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===j.css(e,"position");)e=e.parentNode;e&&e!==o&&1===e.nodeType&&((r=j(e).offset()).top+=j.css(e,"borderTopWidth",!0),r.left+=j.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-j.css(o,"marginTop",!0),left:t.left-r.left-j.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===j.css(e,"position");)e=e.offsetParent;return e||be})}}),j.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;j.fn[e]=function(o){return z(this,function(e,o,r){var i;if(v(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===r)return i?i[t]:e[o];i?i.scrollTo(n?i.pageXOffset:r,n?r:i.pageYOffset):e[o]=r},e,o,arguments.length)}}),j.each(["top","left"],function(e,t){j.cssHooks[t]=Ue(g.pixelPosition,function(e,n){if(n)return n=Je(e,t),Pe.test(n)?j(e).position()[t]+"px":n})}),j.each({Height:"height",Width:"width"},function(e,t){j.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,o){j.fn[o]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return z(this,function(t,n,r){var i;return v(t)?0===o.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?j.css(t,n,a):j.style(t,n,r,a)},t,s?r:void 0,s)}})}),j.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){j.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),j.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),j.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,o){return this.on(t,e,n,o)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),j.proxy=function(e,t){var n,o,r;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return o=s.call(arguments,2),(r=function(){return e.apply(t||this,o.concat(s.call(arguments)))}).guid=e.guid=e.guid||j.guid++,r},j.holdReady=function(e){e?j.readyWait++:j.ready(!0)},j.isArray=Array.isArray,j.parseJSON=JSON.parse,j.nodeName=A,j.isFunction=m,j.isWindow=v,j.camelCase=$,j.type=w,j.now=Date.now,j.isNumeric=function(e){var t=j.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof n&&n.amd&&n("jquery",[],function(){return j});var Vt=e.jQuery,$t=e.$;return j.noConflict=function(t){return e.$===j&&(e.$=$t),t&&e.jQuery===j&&(e.jQuery=Vt),j},t||(e.jQuery=e.$=j),j},"object"==typeof module&&"object"==typeof module.exports?module.exports=o.document?r(o,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(o),n("jqueryPlugins",["jquery"],function(e){e.fn.rotateCursorDown=function(){e("svg").animate({borderSpacing:-150,opacity:1},{step:function(t,n){"borderSpacing"==n.prop?e(this).css("-webkit-transform","rotate("+t+"deg)").css("-moz-transform","rotate("+t+"deg)").css("-ms-transform","rotate("+t+"deg)").css("-o-transform","rotate("+t+"deg)").css("transform","rotate("+t+"deg)"):e(this).css(n.prop,t)},duration:500},"linear").promise().then(function(){this.css("-webkit-transform",""),this.css("-moz-transform",""),this.css("-ms-transform",""),this.css("-o-transform",""),this.css("transform",""),this.css("opacity","")})},e.fn.rotateCursorDown=function(){e(".togetherjs-cursor svg").animate({borderSpacing:0,opacity:1},{step:function(t,n){"borderSpacing"==n.prop?e(this).css("-webkit-transform","rotate("+t+"deg)").css("-moz-transform","rotate("+t+"deg)").css("-ms-transform","rotate("+t+"deg)").css("-o-transform","rotate("+t+"deg)").css("transform","rotate("+t+"deg)"):e(this).css(n.prop,t)},duration:500},"linear").promise().then(function(){this.css("-webkit-transform",""),this.css("-moz-transform",""),this.css("-ms-transform",""),this.css("-o-transform",""),this.css("transform",""),this.css("opacity","")})},e.fn.popinWindow=function(){e.browser.mobile?(this.css({left:"0px",opacity:1,zIndex:8888}),e("#togetherjs-window-pointer-right").css({left:"+=74px",opacity:1,zIndex:8888}),e("#togetherjs-window-pointer-right").animate({opacity:1,left:"-=78px"},{duration:60,easing:"linear"}),e("#togetherjs-window-pointer-right").queue(),e("#togetherjs-window-pointer-right").animate({left:"+=4px"},{duration:60,easing:"linear"}),this.animate({opacity:1,left:"0px"},{duration:60,easing:"linear"}),this.queue(),this.animate({left:"0px"},{duration:60,easing:"linear"})):(this.css({left:"+=74px",opacity:1,zIndex:8888}),e("#togetherjs-window-pointer-right").css({left:"+=74px",opacity:1,zIndex:8888}),e("#togetherjs-window-pointer-right").animate({opacity:1,left:"-=78px"},{duration:60,easing:"linear"}),e("#togetherjs-window-pointer-right").queue(),e("#togetherjs-window-pointer-right").animate({left:"+=4px"},{duration:60,easing:"linear"}),this.animate({opacity:1,left:"-=78px"},{duration:60,easing:"linear"}),this.queue(),this.animate({left:"+=4px"},{duration:60,easing:"linear"}))},e.fn.slideIn=function(){return this.css({left:"+=74px",opacity:0,zIndex:8888}),this.animate({left:"-=74px",opacity:1,zIndex:9999},"fast")},e.fn.fadeOut=function(){return this.animate({borderSpacing:-90,opacity:.5},{step:function(t,n){"borderSpacing"==n.prop?e(this).css("-webkit-transform","perspective( 600px ) rotateX("+t+"deg)").css("-moz-transform","perspective( 600px ) rotateX("+t+"deg)").css("-ms-transform","perspective( 600px ) rotateX("+t+"deg)").css("-o-transform","perspective( 600px ) rotateX("+t+"deg)").css("transform","perspective( 600px ) rotateX("+t+"deg)"):e(this).css(n.prop,t)},duration:500},"linear").promise().then(function(){this.css("-webkit-transform",""),this.css("-moz-transform",""),this.css("-ms-transform",""),this.css("-o-transform",""),this.css("transform",""),this.css("opacity","")}),this},e.fn.easeTo=function(e){return this.animate({scrollTop:e},{duration:400,easing:"swing"})},e.fn.animateDockEntry=function(){var e=this.height(),t=this.width(),n=e+4,o=parseInt(this.css("marginLeft"),10);this.css({marginLeft:o+t/2,height:0,width:0,backgroundSize:"0 0"});var r=this;return this.animate({marginLeft:o,height:e,width:t,backgroundSize:n},{duration:600}).promise().then(function(){r.css({marginLeft:"",height:"",width:"",backgroundSize:""})}),this},e.fn.animateDockExit=function(){this.height();var e=this.width(),t=parseInt(this.css("marginLeft"),10);return this.animate({marginLeft:t+e/2,height:0,width:0,backgroundSize:"0 0",opacity:0},600),this},e.fn.animateCursorEntry=function(){},e.fn.animateKeyboard=function(){var e=this.find(".togetherjs-typing-ellipse-one"),t=this.find(".togetherjs-typing-ellipse-two"),n=this.find(".togetherjs-typing-ellipse-three"),o=-1,r=function(){0===(o=(o+1)%4)?(e.css("opacity",.5),t.css("opacity",.5),n.css("opacity",.5)):1==o?e.css("opacity",1):2==o?t.css("opacity",1):n.css("opacity",1)}.bind(this);r();var i=setInterval(r,300);this.data("animateKeyboard",i)},e.fn.stopKeyboardAnimation=function(){clearTimeout(this.data("animateKeyboard")),this.data("animateKeyboard",null)},e.browser||(e.browser={}),e.browser.mobile=void 0!==window.orientation,-1!=navigator.userAgent.search(/mobile/i)&&(e.browser.mobile=!0),e.browser.mobile&&window.matchMedia&&!window.matchMedia("screen and (max-screen-width: 480px)").matches&&(document.body.className+=" togetherjs-mobile-browser")}),n("util",["jquery","jqueryPlugins"],function(e){var t={};return t.Deferred=e.Deferred,TogetherJS.$=e,t.Class=function(e,t){var n;if(void 0===t)t=e;else{e.prototype&&(e=e.prototype);var o=Object.create(e);for(n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);t=o}var r=function(){var e=Object.create(t);return e.constructor.apply(e,arguments),e.constructor=r,e};if(r.prototype=t,t.constructor.name&&(r.className=t.constructor.name,r.toString=function(){return"[Class "+this.className+"]"}),t.classMethods)for(n in t.classMethods)t.classMethods.hasOwnProperty(n)&&(r[n]=t.classMethods[n]);return r},t.extend=TogetherJS._extend,t.forEachAttr=function(e,t,n){n=n||e;for(var o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o)},t.trim=function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},t.safeClassName=function(e){return e.replace(/[^a-zA-Z0-9_\-]/g,"_")||"class"},t.AssertionError=function(e){if(!this instanceof t.AssertionError)return new t.AssertionError(e);this.message=e,this.name="AssertionError"},t.AssertionError.prototype=Error.prototype,t.assert=function(e){if(!e){var n=["Assertion error:"].concat(Array.prototype.slice.call(arguments,1));throw console.error.apply(console,n),console.trace&&console.trace(),new t.AssertionError(n.join(" "))}},t.generateId=function(e){e=e||10;for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUV0123456789",n="",o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},t.pickRandom=function(e){return e[Math.floor(Math.random()*e.length)]},t.mixinEvents=TogetherJS._mixinEvents,t.Module=t.Class({constructor:function(e){this._name=e},toString:function(){return"[Module "+this._name+"]"}}),t.blobToBase64=function(e){for(var t="",n=new Uint8Array(e),o=n.byteLength,r=0;r<o;r++)t+=String.fromCharCode(n[r]);return btoa(t)},t.truncateCommonDomain=function(e,t){if(!t)return e;var n=/^https?:\/\/[^\/]*/i,o=n.exec(e),r=n.exec(t);return o&&r&&o[0]==r[0]?e.substr(o[0].length):e},t.makeUrlAbsolute=function(e,n){if(0===e.search(/^(http|https|ws|wss):/i))return e;if(0===e.search(/^\/\/[^\/]/)){var o=/^(http|https|ws|wss):/i.exec(n);return t.assert(o,"No scheme on base URL",n),o[1]+":"+e}if(0===e.search(/^\//)){var r=/^(http|https|ws|wss):\/\/[^\/]+/i.exec(n);return t.assert(r,"No scheme/domain on base URL",n),r[0]+e}var i=/[^\/]+$/.exec(n);return t.assert(i,"Does not appear to be a URL?",n),n.substr(0,i.index)+e},t.assertValidUrl=function(e){t.assert("string"==typeof e,"URLs must be a string:",e),t.assert(0===e.search(/^(http:\/\/|https:\/\/|\/\/|data:)/i),"URL must have an http, https, data, or // scheme:",e),t.assert(-1===e.search(/[\)\'\"\ ]/),"URLs cannot contain ), ', \", or spaces:",JSON.stringify(e))},t.resolver=function(e,n){return t.assert(e.then,"Bad deferred:",e),t.assert("function"==typeof n,"Not a function:",n),function(){var t;try{t=n.apply(this,arguments)}catch(t){throw e.reject(t),t}return t&&t.then?t.then(function(){e.resolveWith(this,arguments)},function(){e.rejectWith(this,arguments)}):void 0===t?e.resolve():e.resolve(t),t}},t.isPromise=function(e){return"object"==typeof e&&e.then},t.makePromise=function(n){return t.isPromise(n)?n:e.Deferred(function(e){e.resolve(n)})},t.resolveMany=function(){var e,n=!1;return 1==arguments.length&&Array.isArray(arguments[0])?(n=!0,e=arguments[0]):e=Array.prototype.slice.call(arguments),t.Deferred(function(t){var o=e.length;if(o){var r=[],i=!1;e.forEach(function(e,t){e.then(function(e){r[t]=e,o--,s()},function(e){r[t]=e,i=!0,o--,s()})})}else t.resolve();function s(){o||(i?n?t.reject(r):t.reject.apply(t,r):n?t.resolve(r):t.resolve.apply(t,r))}})},t.readFileImage=function(e){return t.Deferred(function(n){var o=new FileReader;o.onload=function(){n.resolve("data:image/jpeg;base64,"+t.blobToBase64(this.result))},o.onerror=function(){n.reject(this.error)},o.readAsArrayBuffer(e.files[0])})},t.matchElement=function(t,n){if(!0===n||!n)return!!n;try{return e(t).is(n)}catch(e){return console.warn("Bad selector:",n,"error:",e),!1}},t.testExpose=function(e){"undefined"!=typeof TogetherJSTestSpy&&t.forEachAttr(e,function(e,t){TogetherJSTestSpy[t]=e})},t}),n("analytics",["util"],function(e){var t=e.Module("analytics");return t.activate=function(){var e=TogetherJS.config.get("enableAnalytics"),t=TogetherJS.config.get("analyticsCode");if(TogetherJS.config.close("enableAnalytics"),TogetherJS.config.close("analyticsCode"),e&&t){var n=window._gaq||[];n.push(["_setAccount",t]),n.push(["_setDomainName",location.hostname]),n.push(["_trackPageview"]),window._gaq=n,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}},t}),n("channels",["util"],function(e){var t=e.Module("channels"),n=e.mixinEvents({onmessage:null,rawdata:!1,onclose:null,closed:!1,baseConstructor:function(){this._buffer=[],this._setupConnection()},send:function(e){if(this.closed)throw"Cannot send to a closed connection";"string"!=typeof e&&(e=JSON.stringify(e)),this._ready()?this._send(e):this._buffer.push(e)},_flush:function(){for(var e=0;e<this._buffer.length;e++)this._send(this._buffer[e]);this._buffer=[]},_incoming:function(e){if(!this.rawdata)try{e=JSON.parse(e)}catch(t){throw console.error("Got invalid JSON data:",e.substr(0,40)),t}this.onmessage&&this.onmessage(e),this.emit("message",e)}});t.WebSocketChannel=e.Class(n,{constructor:function(e){0===e.search(/^https?:/i)&&(e=e.replace(/^http/i,"ws")),this.address=e,this.socket=null,this._reopening=!1,this._lastConnectTime=0,this._backoff=0,this.baseConstructor()},backoffTime:50,maxBackoffTime:1500,backoffDetection:2e3,toString:function(){var e="[WebSocketChannel to "+this.address;return this.socket?e+=" readyState: "+this.socket.readyState:e+=" (socket unopened)",this.closed&&(e+=" CLOSED"),e+"]"},close:function(){this.closed=!0,this.socket?this.socket.close():(this.onclose&&this.onclose(),this.emit("close"))},_send:function(e){this.socket.send(e)},_ready:function(){return this.socket&&this.socket.readyState==this.socket.OPEN},_setupConnection:function(){this.closed||(this._lastConnectTime=Date.now(),this.socket=new WebSocket(this.address),this.socket.onopen=function(){this._flush(),this._reopening=!1}.bind(this),this.socket.onclose=function(e){this.socket=null;var t="error";if(e.wasClean&&(t="log"),console[t]("WebSocket close",e.wasClean?"clean":"unclean","code:",e.code,"reason:",e.reason||"none"),!this.closed){this._reopening=!0,Date.now()-this._lastConnectTime>this.backoffDetection?this._backoff=0:this._backoff++;var n=Math.min(this._backoff*this.backoffTime,this.maxBackoffTime);setTimeout(function(){this._setupConnection()}.bind(this),n)}}.bind(this),this.socket.onmessage=function(e){this._incoming(e.data)}.bind(this),this.socket.onerror=function(e){console.error("WebSocket error:",e.data)}.bind(this))}}),t.PostMessageChannel=e.Class(n,{_pingPollPeriod:100,_pingPollIncrease:100,_pingMax:2e3,constructor:function(e,t){this.expectedOrigin=t,this._pingReceived=!1,this._receiveMessage=this._receiveMessage.bind(this),e&&this.bindWindow(e,!0),this._pingFailures=0,this.baseConstructor()},toString:function(){var e="[PostMessageChannel";return this.window?e+=" to window "+this.window:e+=" not bound to a window",this.window&&!this._pingReceived&&(e+=" still establishing"),e+"]"},bindWindow:function(e,t){this.window&&(this.close(),this.closed=!1),e&&e.contentWindow&&(e=e.contentWindow),this.window=e;var n=this.window;"undefined"!=typeof window&&(n=window),n.addEventListener("message",this._receiveMessage,!1),t||this._setupConnection()},_send:function(e){this.window.postMessage(e,this.expectedOrigin||"*")},_ready:function(){return this.window&&this._pingReceived},_setupConnection:function(){if(!this.closed&&!this._pingReceived&&this.window){this._pingFailures++,this._send("hello");var e=this._pingPollPeriod+this._pingPollIncrease*this._pingFailures;e=e>this._pingPollMax?this._pingPollMax:e,this._pingTimeout=setTimeout(this._setupConnection.bind(this),e)}},_receiveMessage:function(e){if(e.source===this.window)if(this.expectedOrigin&&e.origin!=this.expectedOrigin)console.info("Expected message from",this.expectedOrigin,"but got message from",e.origin);else{if(this.expectedOrigin||(this.expectedOrigin=e.origin),"hello"==e.data)return this._pingReceived=!0,this._pingTimeout&&(clearTimeout(this._pingTimeout),this._pingTimeout=null),void this._flush();this._incoming(e.data)}},close:function(){this.closed=!0,this._pingReceived=!1,this._pingTimeout&&clearTimeout(this._pingTimeout),window.removeEventListener("message",this._receiveMessage,!1),this.onclose&&this.onclose(),this.emit("close")}}),t.PostMessageIncomingChannel=e.Class(n,{constructor:function(e){this.source=null,this.expectedOrigin=e,this._receiveMessage=this._receiveMessage.bind(this),window.addEventListener("message",this._receiveMessage,!1),this.baseConstructor()},toString:function(){var e="[PostMessageIncomingChannel";return this.source?e+=" bound to source "+e:e+=" awaiting source",e+"]"},_send:function(e){this.source.postMessage(e,this.expectedOrigin)},_ready:function(){return!!this.source},_setupConnection:function(){},_receiveMessage:function(e){this.expectedOrigin&&"*"!=this.expectedOrigin&&e.origin!=this.expectedOrigin?console.info("Expected message from",this.expectedOrigin,"but got message from",e.origin):(this.expectedOrigin||(this.expectedOrigin=e.origin),this.source||(this.source=e.source),"hello"!=e.data?this._incoming(e.data):this.source.postMessage("hello",this.expectedOrigin))},close:function(){this.closed=!0,window.removeEventListener("message",this._receiveMessage,!1),this._pingTimeout&&clearTimeout(this._pingTimeout),this.onclose&&this.onclose(),this.emit("close")}}),t.Router=e.Class(e.mixinEvents({constructor:function(e){this._channelMessage=this._channelMessage.bind(this),this._channelClosed=this._channelClosed.bind(this),this._routes=Object.create(null),e&&this.bindChannel(e)},bindChannel:function(e){this.channel&&(this.channel.removeListener("message",this._channelMessage),this.channel.removeListener("close",this._channelClosed)),this.channel=e,this.channel.on("message",this._channelMessage.bind(this)),this.channel.on("close",this._channelClosed.bind(this))},_channelMessage:function(e){if("route"==e.type){var t=e.routeId,n=this._routes[t];if(!n)return void console.warn("No route with the id",t);e.close?this._closeRoute(n.id):(n.onmessage&&n.onmessage(e.message),n.emit("message",e.message))}},_channelClosed:function(){for(var e in this._routes)this._closeRoute(e)},_closeRoute:function(e){var t=this._routes[e];t.onclose&&t.onclose(),t.emit("close"),delete this._routes[e]},makeRoute:function(t){t=t||e.generateId();var n=o(this,t);return this._routes[t]=n,n}}));var o=e.Class(e.mixinEvents({constructor:function(e,t){this.router=e,this.id=t},send:function(e){this.router.channel.send({type:"route",routeId:this.id,message:e})},close:function(){this.router._routes[this.id]===this&&delete this.router._routes[this.id]}}));return t}),n("storage",["util"],function(e){var t=e.assert,n=e.Deferred,o=e.Class({constructor:function(e,t,n){this.name=e,this.storage=t,this.prefix=n},get:function(t,o){var r=this;return n(function(n){setTimeout(e.resolver(n,function(){t=r.prefix+t;var e=r.storage.getItem(t);return e=e?JSON.parse(e):o}))})},set:function(e,t){var o=this;return void 0!==t&&(t=JSON.stringify(t)),n(function(n){e=o.prefix+e,void 0===t?o.storage.removeItem(e):o.storage.setItem(e,t),setTimeout(n.resolve)})},clear:function(){var t=this,o=[];return n(function(n){this.keys().then(function(r){r.forEach(function(e){o.push(t.set(e,void 0))}),e.resolveMany(o).then(function(){n.resolve()})})}.bind(this))},keys:function(t,o){var r=this;return n(function(n){setTimeout(e.resolver(n,function(){t=t||"";for(var e=[],n=0;n<r.storage.length;n++){var i=r.storage.key(n);if(0===i.indexOf(r.prefix+t)){var s=i.substr(r.prefix.length);o&&(s=s.substr(t.length)),e.push(s)}}return e}))})},toString:function(){return"[storage for "+this.name+"]"}}),r=TogetherJS.config.get("storagePrefix");TogetherJS.config.close("storagePrefix");var i=o("localStorage",localStorage,r+".");return i.settings=e.mixinEvents({defaults:{name:"",defaultName:"",avatar:null,stickyShare:null,color:null,seenIntroDialog:!1,seenWalkthrough:!1,dontShowRtcInfo:!1},get:function(e){return t(i.settings.defaults.hasOwnProperty(e),"Unknown setting:",e),i.get("settings."+e,i.settings.defaults[e])},set:function(e,n){return t(i.settings.defaults.hasOwnProperty(e),"Unknown setting:",e),i.set("settings."+e,n)}}),i.tab=o("sessionStorage",sessionStorage,r+"-session."),i}),n("session",["require","util","channels","jquery","storage"],function(e,t,n,o,r){var i,s=!0,a=t.mixinEvents(t.Module("session")),l=t.assert;a.shareId=null,a.clientId=null,a.router=n.Router(),a.firstRun=!1;var c=null;a.AVATAR_SIZE=90;var u=TogetherJS.config.get("includeHashInUrl");TogetherJS.config.close("includeHashInUrl");var h=(location.href+"").replace(/\#.*$/,"");u&&(h=location.href),a.hubUrl=function(e){return e=e||a.shareId,l(e,"URL cannot be resolved before TogetherJS.shareId has been initialized"),TogetherJS.config.close("hubBase"),TogetherJS.config.get("hubBase").replace(/\/*$/,"")+"/hub/"+e},a.shareUrl=function(){l(a.shareId,"Attempted to access shareUrl() before shareId is set");var e=location.hash,t=/\?[^#]*/.exec(location.href),n="";return t&&(n=t[0]),e=(e=e.replace(/&?togetherjs-[a-zA-Z0-9]+/,""))||"#",location.protocol+"//"+location.host+location.pathname+n+e+"&togetherjs="+a.shareId},a.recordUrl=function(){l(a.shareId);var e=TogetherJS.baseUrl.replace(/\/*$/,"")+"/togetherjs/recorder.html";return e+="#&togetherjs="+a.shareId+"&hubBase="+TogetherJS.config.get("hubBase")},a.currentUrl=function(){return u?location.href:location.href.replace(/#.*/,"")},a.hub=t.mixinEvents({});var d=TogetherJS.config.get("ignoreMessages");!0===d&&(s=!1,d=[]);var f=["who","invite","init-connection"],p=!1;function g(e){var t=a.makeHelloMessage(e);e||(a.timeHelloSent=Date.now(),i.Self.url=t.url),a.send(t)}a.send=function(e){s&&-1==d.indexOf(e.type)&&console.info("Send:",e),e.clientId=a.clientId,c.send(e)},a.appSend=function(e){var t=e.type;0===t.search(/^togetherjs\./)?t=t.substr("togetherjs.".length):-1===t.search(/^app\./)&&(t="app."+t),e.type=t,a.send(e)},a.hub.on("hello hello-back",function(t){"hello"==t.type&&g(!0),a.isClient&&!t.isClient&&a.firstRun&&a.timeHelloSent&&Date.now()-a.timeHelloSent<1500&&function(t){if(!t.sameUrl){var n=t.url;t.urlHash&&(n+=t.urlHash),e("ui").showUrlChangeMessage(t.peer,n),location.href=n}}(t)}),a.hub.on("who",function(e){g(!0)}),a.timeHelloSent=null,a.makeHelloMessage=function(e){var t={name:i.Self.name||i.Self.defaultName,avatar:i.Self.avatar,color:i.Self.color,url:a.currentUrl(),urlHash:location.hash,title:document.title,rtcSupported:a.RTCSupported,isClient:a.isClient};return e?t.type="hello-back":(t.type="hello",t.clientVersion=TogetherJS.version),TogetherJS.startup.continued||(t.starting=!0),a.emit("prepare-hello",t),t};var m=["peers","ui","chat","webrtc","cursor","startup","videos","forms","visibilityApi","youtubeVideos"];function v(){return t.Deferred(function(e){a.identityId?e.resolve():r.get("identityId").then(function(n){n||(n=t.generateId(),r.set("identityId",n)),a.identityId=n,e.resolve()})})}function y(){return t.Deferred(function(e){var n,i=location.hash,s=a.shareId,c=!0,u=!0;if(a.firstRun=!TogetherJS.startup.continued,s||TogetherJS.startup._joinShareId&&(s=TogetherJS.startup._joinShareId),!s){var h=/&?togetherjs=([^&]*)/.exec(i);if(h){c=!h[1],s=h[2];var d=i.substr(0,h.index)+i.substr(h.index+h[0].length);location.hash=d}}return r.tab.get("status").then(function(i){var h,d,f,p=TogetherJS.config.get("findRoom");if(TogetherJS.config.close("findRoom"),p&&i&&p!=i.shareId?console.info("Ignoring findRoom in lieu of continued session"):p&&TogetherJS.startup._joinShareId&&console.info("Ignoring findRoom in lieu of explicit invite to session"),!p||"string"!=typeof p||i||TogetherJS.startup._joinShareId){if(p&&!i&&!TogetherJS.startup._joinShareId)return l(p.prefix&&"string"==typeof p.prefix,"Bad findRoom.prefix",p),l(p.max&&"number"==typeof p.max&&p.max>0,"Bad findRoom.max",p),n=t.generateId(),-1!=p.prefix.search(/[^a-zA-Z0-9]/)&&console.warn("Bad value for findRoom.prefix:",JSON.stringify(p.prefix)),void(h=p.prefix,d=p.max,f=TogetherJS.config.get("hubBase").replace(/\/*$/,"")+"/findroom",o.ajax({url:f,dataType:"json",data:{prefix:h,max:d}}).then(function(e){return e.name})).then(function(t){a.clientId=a.identityId+"."+n,r.tab.set("status",{reason:"joined",shareId:t,running:!0,date:Date.now(),sessionId:n}),a.isClient=!0,a.shareId=t,a.emit("shareId"),e.resolve(a.shareId)});if(TogetherJS.startup._launch)i?(c="joined"==i.reason,s||(s=i.shareId),n=i.sessionId):(c="joined"==TogetherJS.startup.reason,l(!n),n=t.generateId()),s||(s=t.generateId());else{if(!i)throw new t.AssertionError("No saved status, and no startup._launch request; why did TogetherJS start?");c="joined"==i.reason,TogetherJS.startup.reason=i.reason,TogetherJS.startup.continued=!0,s=i.shareId,n=i.sessionId,u=!i.running}}else c=!0,s=p,n=t.generateId();l(a.identityId),a.clientId=a.identityId+"."+n,u&&r.tab.set("status",{reason:TogetherJS.startup.reason,shareId:s,running:!0,date:Date.now(),sessionId:n}),a.isClient=c,a.shareId=s,a.emit("shareId"),e.resolve(a.shareId)})})}function b(){g(!1)}function w(){a.emit("resize")}return v.done=v(),a.start=function(){var t;TogetherJS.startup.button?(t=TogetherJS.startup.button.id)&&r.set("startTarget",t):r.get("startTarget").then(function(e){var t=document.getElementById(e);t&&(TogetherJS.startup.button=t)}),v().then(function(){y().then(function(){p=!1,function(){l(!c,"Attempt to re-open channel"),console.info("Connecting to",a.hubUrl(),location.href);var e=n.WebSocketChannel(a.hubUrl());e.onmessage=function(e){p?(s&&-1==d.indexOf(e.type)&&console.info("In:",e),i?e.clientId||-1!=f.indexOf(e.type)?(e.clientId&&(e.peer=i.getPeer(e.clientId,e)),"hello"!=e.type&&"hello-back"!=e.type&&"peer-update"!=e.type||e.peer.updateFromHello(e),e.peer&&(e.sameUrl=e.peer.url==h,e.peer.isSelf||e.peer.updateMessageDate(e)),a.hub.emit(e.type,e),TogetherJS._onmessage(e)):console.warn("Got message without clientId, where clientId is required",e):console.warn("Message received before all modules loaded (ignoring):",e)):s&&console.info("In (but ignored for being early):",e)},c=e,a.router.bindChannel(c)}(),e(["ui"],function(t){TogetherJS.running=!0,t.prepareUI(),e(m,function(){o(function(){i=e("peers");var n=e("startup");a.emit("start"),a.once("ui-ready",function(){p=!0,n.start()}),t.activateUI(),TogetherJS.config.close("enableAnalytics"),TogetherJS.config.get("enableAnalytics")&&e(["analytics"],function(e){e.activate()}),i._SelfLoaded.then(function(){g(!1)}),TogetherJS.emit("ready")})})})})})},a.close=function(e){TogetherJS.running=!1;var t={type:"bye"};e&&(t.reason=e),a.send(t),a.emit("close");var n=window.name;r.tab.get("status").then(function(e){e?(e.running=!1,e.date=Date.now(),r.tab.set("status",e)):console.warn("No session information saved in","status."+n),c.close(),c=null,a.shareId=null,a.emit("shareId"),TogetherJS.emit("close"),TogetherJS._teardown()})},a.on("start",function(){o(window).on("resize",w),u&&o(window).on("hashchange",b)}),a.on("close",function(){o(window).off("resize",w),u&&o(window).off("hashchange",b)}),TogetherJS.startup._launch&&setTimeout(a.start),t.testExpose({getChannel:function(){return c}}),a}),n("templates",["util"],function(e){function t(t){return t=t.replace(/[<][%]\s*\/\*[\S\s\r\n]*\*\/\s*[%][>]/,""),t=(t=e.trim(t)).replace(/http:\/\/localhost:8080/g,TogetherJS.baseUrl)}return{interface:t('<% /*\n   This is basically all the markup and interface for TogetherJS.\n   Note all links should be like *\n   these links are rewritten with the location where TogetherJS was deployed.\n\n   This file is inlined into togetherjs/templates.js\n*/ %>\n<div id="togetherjs-container" class="togetherjs">\n\n  \x3c!-- This is the main set of buttons: --\x3e\n  <div id="togetherjs-dock" class="togetherjs-dock-right">\n    <div id="togetherjs-dock-anchor" title="ÐÐµÑÐµÐ¼ÐµÑÑÐ¸ÑÑ Ð¿Ð°Ð½ÐµÐ»Ñ">\n      <span id="togetherjs-dock-anchor-horizontal">\n        <img src="/lib/togetherjs/images/icn-handle-circle@2x.png" alt="drag">\n      </span>\n      <span id="togetherjs-dock-anchor-vertical">\n        <img src="/lib/togetherjs/images/icn-handle-circle@2x.png" alt="drag">\n      </span>\n    </div>\n    <div id="togetherjs-buttons">\n      <div style="display: none">\n        <button id="togetherjs-template-dock-person" class="togetherjs-button togetherjs-dock-person">\n          <div class="togetherjs-tooltip togetherjs-dock-person-tooltip">\n            <span class="togetherjs-person-name"></span>\n            <span class="togetherjs-person-tooltip-arrow-r"></span>\n          </div>\n          <div class="togetherjs-person togetherjs-person-status-overlay"></div>\n        </button>\n      </div>\n      <button id="togetherjs-profile-button" class="togetherjs-button" title="Ð­ÑÐ¾ Ð²Ñ">\n        <div class="togetherjs-person togetherjs-person-self"></div>\n        <div id="togetherjs-profile-arrow"></div>\n      </button>\n      <button id="togetherjs-share-button" class="togetherjs-button" title="ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ°"></button>\n      <button id="togetherjs-audio-button" class="togetherjs-button" title="ÐÐºÐ»ÑÑÐ¸ÑÑ Ð¼Ð¸ÐºÑÐ¾ÑÐ¾Ð½">\n        <span id="togetherjs-audio-unavailable" class="togetherjs-audio-set" data-toggles=".togetherjs-audio-set">\n        </span>\n        <span id="togetherjs-audio-ready" class="togetherjs-audio-set" data-toggles=".togetherjs-audio-set" style="display: none">\n        </span>\n        <span id="togetherjs-audio-outgoing" class="togetherjs-audio-set" data-toggles=".togetherjs-audio-set" style="display: none">\n        </span>\n        <span id="togetherjs-audio-incoming" class="togetherjs-audio-set" data-toggles=".togetherjs-audio-set" style="display: none">\n        </span>\n        <span id="togetherjs-audio-active" class="togetherjs-audio-set" data-toggles=".togetherjs-audio-set" style="display: none">\n        </span>\n        <span id="togetherjs-audio-muted" class="togetherjs-audio-set" data-toggles=".togetherjs-audio-set" style="display: none">\n        </span>\n        <span id="togetherjs-audio-error" class="togetherjs-audio-set" data-toggles=".togetherjs-audio-set" style="display: none">\n        </span>\n      </button>\n      <button id="togetherjs-chat-button" class="togetherjs-button" title="Ð§Ð°Ñ"></button>\n      <div id="togetherjs-dock-participants"></div>\n    </div>\n  </div>\n\n  \x3c!-- The window for editing the avatar: --\x3e\n  <div id="togetherjs-avatar-edit" class="togetherjs-modal"\n       style="display: none">\n    <header> Ð¡Ð¼ÐµÐ½Ð¸ÑÑ Ð°Ð²Ð°ÑÐ°Ñ </header>\n    <section>\n      <div class="togetherjs-avatar-preview togetherjs-person togetherjs-person-self"></div>\n      <div id="togetherjs-avatar-buttons">\n        <input type="file" class="togetherjs-upload-avatar">\n        \x3c!--<button id="togetherjs-upload-avatar" class="togetherjs-primary">Upload a picture</button>--\x3e\n        \x3c!--<button id="togetherjs-camera-avatar" class="togetherjs-default">Take a picture</button>--\x3e\n      </div>\n    </section>\n    <section class="togetherjs-buttons">\n      <button class="togetherjs-cancel togetherjs-dismiss">ÐÑÐ¼ÐµÐ½Ð°</button>\n      <span class="togetherjs-alt-text">Ð¸Ð»Ð¸</span>\n      <button class="togetherjs-avatar-save togetherjs-primary">Ð¡Ð¾ÑÑÐ°Ð½Ð¸ÑÑ</button>\n    </section>\n  </div>\n\n  \x3c!-- The window for sharing the link: --\x3e\n  <div id="togetherjs-share" class="togetherjs-window"\n       data-bind-to="#togetherjs-share-button" style="display: none">\n    <header> ÐÑÐ¸Ð³Ð»Ð°ÑÐ¸ÑÑ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ° </header>\n    <section>\n      <div class="togetherjs-not-mobile">\n        <p> ÐÐµÑÐµÐ´Ð°Ð¹ÑÐµ ÑÑÑ ÑÑÑÐ»ÐºÑ ÐºÐ¾Ð¼Ñ-Ð»Ð¸Ð±Ð¾ ÑÑÐ¾Ð±Ñ Ð¿ÑÐ¸Ð³Ð»Ð°ÑÐ¸ÑÑ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ°.</p>\n        <input type="text" class="togetherjs-share-link">\n      </div>\n      <div class="togetherjs-only-mobile">\n        <p>ÐÐµÑÐµÐ´Ð°Ð¹ÑÐµ ÑÑÑ ÑÑÑÐ»ÐºÑ ÐºÐ¾Ð¼Ñ-Ð»Ð¸Ð±Ð¾ ÑÑÐ¾Ð±Ñ Ð¿ÑÐ¸Ð³Ð»Ð°ÑÐ¸ÑÑ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ°.</p>\n        <input type="text" class="togetherjs-share-link">\n        \x3c!-- <a class="togetherjs-share-link" href="#">ÐÐ°Ð¶Ð¼Ð¸ÑÐµ Ð¿Ð°Ð»ÑÑÐµÐ¼ ÑÑÐ´Ð°.</a> --\x3e\n      </div>\n    </section>\n  </div>\n\n  \x3c!-- Participant Full List view template: --\x3e\n  <div id="togetherjs-participantlist" class="togetherjs-window"\n       data-bind-to="#togetherjs-participantlist-button" style="display: none">\n    <header> Ð£ÑÐ°ÑÑÐ½Ð¸ÐºÐ¸ </header>\n    <section>\n      <div class="togetherjs-not-mobile">\n        <ul>\n          <li id="togetherjs-participant-item">\n            <img class="togetherjs-person togetherjs-person-small" src="/lib/togetherjs/images/btn-menu-change-avatar.png">\n            <span class="tj-name togetherjs-person-name">Useronewith alongname</span>\n            <span class="tj-status">&#9679;</span>\n            <p class="tj-urllocation">Ð¡ÐµÐ¹ÑÐ°Ñ Ð½Ð°: <a class="togetherjs-person-url togetherjs-person-url-title" href="">http://www.location.comwww.location.comwww.location.comasdfsafd</a></p>\n            <p class="tj-follow">ÐÐ¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°ÑÑ:\n              <label class="togetherjs-follow-question" for="togetherjs-person-status-follow">\n                <input type="checkbox" id="togetherjs-person-status-follow">\n              </label>\n            </p>\n            <section class="togetherjs-buttons">\n              \x3c!-- Displayed when the peer is at a different URL: --\x3e\n              <div class="togetherjs-different-url">\n                <a class="togetherjs-nudge togetherjs-default tj-btn-sm">ÐÑÐºÐ°Ð·Ð°ÑÑ Ð¸Ð¼</a>\n                <a href="#" class="togetherjs-follow togetherjs-person-url togetherjs-primary tj-btn-sm">ÐÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº Ð½Ð¸Ð¼</a>\n              </div>\n              \x3c!-- Displayed when the peer is at your same URL: --\x3e\n              <div class="togetherjs-same-url" style="display: none">\n                <span class="togetherjs-person-name"></span> Ñ ÐÐ°Ð¼Ð¸ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¹ ÑÑÑÐ°Ð½Ð¸ÑÐµ.\n              </div>\n            </section>\n          </li>\n        </ul>\n    </section>\n  </div>\n\n  \x3c!-- Participant detail template: --\x3e\n  <div id="togetherjs-template-participant-window" class="togetherjs-window" style="display: none">\n    <header><div class="togetherjs-person togetherjs-person-small"></div><span class="togetherjs-person-name"></span></header>\n\n    <section class="togetherjs-participant-window-main">\n      <p class="togetherjs-participant-window-row"><strong>Ð Ð¾Ð»Ñ:</strong>\n        <span class="togetherjs-person-role"></span>\n      </p>\n\n      <p class="togetherjs-participant-window-row"><strong>Ð¡ÐµÐ¹ÑÐ°Ñ Ð½Ð°:</strong>\n        <a class="togetherjs-person-url togetherjs-person-url-title"></a>\n      </p>\n\n      <p class="togetherjs-participant-window-row"><strong>Ð¡ÑÐ°ÑÑÑ:</strong>\n        <span class="togetherjs-person-status"></span>\n      </p>\n\n      <p class="togetherjs-participant-window-row"><strong class="togetherjs-float-left">Ð¡Ð»ÐµÐ´Ð¸ÑÑ Ð·Ð° ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ¾Ð¼:</strong>\n        <label class="togetherjs-follow-question togetherjs-float-left" for="togetherjs-person-status-follow">\n          <input type="checkbox" id="togetherjs-person-status-follow">\n        </label>\n        <span class="togetherjs-clear"></span>\n      </p>\n\n    </section>\n\n    <section class="togetherjs-buttons">\n      \x3c!-- Displayed when the peer is at a different URL: --\x3e\n      <div class="togetherjs-different-url">\n        <a class="togetherjs-nudge togetherjs-default">ÐÑÐºÐ°Ð·Ð°ÑÑ Ð¸Ð¼</a>\n        <a href="#" class="togetherjs-follow togetherjs-person-url togetherjs-primary">ÐÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº Ð½Ð¸Ð¼</a>\n      </div>\n      \x3c!-- Displayed when the peer is at your same URL: --\x3e\n      <div class="togetherjs-same-url" style="display: none">\n        <span class="togetherjs-person-name"></span> Ñ ÐÐ°Ð¼Ð¸ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¹ ÑÑÑÐ°Ð½Ð¸ÑÐµ.\n      </div>\n    </section>\n  </div>\n\n  \x3c!-- The chat screen: --\x3e\n  <div id="togetherjs-chat" class="togetherjs-window" data-bind-to="#togetherjs-chat-button"\n       style="display: none">\n    <header> Ð§Ð°Ñ </header>\n    <section class="togetherjs-subtitle">\n      <div id="togetherjs-chat-participants" data-toggles="#togetherjs-chat-no-participants" style="display: none">\n        <span id="togetherjs-chat-participant-list"></span>\n        Ð¸ ÐÑ\n      </div>\n      <div id="togetherjs-chat-no-participants" data-toggles="#togetherjs-chat-participants">\n        ÐÐ´ÐµÑÑ Ð±Ð¾Ð»ÑÑÐµ Ð½Ð¸ÐºÐ¾Ð³Ð¾ Ð½ÐµÑ.\n      </div>\n    </section>\n\n    <div style="display: none">\n\n      \x3c!-- Template for one message: --\x3e\n      <div id="togetherjs-template-chat-message" class="togetherjs-chat-item togetherjs-chat-message">\n        <div class="togetherjs-person"></div>\n        <div class="togetherjs-timestamp"><span class="togetherjs-time">HH:MM</span></span></div>\n        <div class="togetherjs-person-name-abbrev"></div>\n        <div class="togetherjs-chat-content togetherjs-sub-content"></div>\n      </div>\n\n      \x3c!-- Template for when a person leaves: --\x3e\n      <div id="togetherjs-template-chat-left" class="togetherjs-chat-item togetherjs-chat-left-item">\n        <div class="togetherjs-person"></div>\n        <div class="togetherjs-ifnot-declinedJoin">\n          <div class="togetherjs-inline-text"><span class="togetherjs-person-name"></span> Ð¿Ð¾ÐºÐ¸Ð½ÑÐ» ÑÐµÐ°Ð½Ñ.</div>\n        </div>\n        <div class="togetherjs-if-declinedJoin">\n          <div class="togetherjs-inline-text"><span class="togetherjs-person-name"></span> Ð¾ÑÐºÐ°Ð·Ð°Ð»ÑÑ Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº ÑÐµÐ°Ð½ÑÑ.</div>\n        </div>\n        <div class="togetherjs-clear"></div>\n      </div>\n\n      \x3c!-- Template when a person joins the session: --\x3e\n      <div id="togetherjs-template-chat-joined" class="togetherjs-chat-item togetherjs-chat-join-item">\n        <div class="togetherjs-person"></div>\n        <div class="togetherjs-inline-text"><span class="togetherjs-person-name"></span> Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸Ð»ÑÑ Ðº ÑÐµÐ°Ð½ÑÑ.</div>\n        <div class="togetherjs-clear"></div>\n      </div>\n\n      \x3c!-- Template for system-derived messages: --\x3e\n      <div id="togetherjs-template-chat-system" class="togetherjs-chat-item">\n        <span class="togetherjs-chat-content togetherjs-sub-content"></span>\n      </div>\n\n      \x3c!-- Template when a person joins the session: --\x3e\n      \x3c!-- <div id="togetherjs-template-chat-joined" class="togetherjs-chat-item togetherjs-chat-join-item">\n        <div class="togetherjs-person"></div>\n        <div class="togetherjs-inline-text"><span class="togetherjs-person-name"></span> Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸Ð»ÑÑ Ðº ÑÐµÐ°Ð½ÑÑ.</div>\n        <div class="togetherjs-clear"></div>\n      </div> --\x3e\n\n      \x3c!-- Template for when someone goes to a new URL: --\x3e\n      <div id="togetherjs-template-url-change" class="togetherjs-chat-item togetherjs-chat-url-change">\n        <div class="togetherjs-person"></div>\n        <div class="togetherjs-inline-text">\n          <div class="togetherjs-if-sameUrl">\n            <span class="togetherjs-person-name"></span>\n            Ñ ÐÐ°Ð¼Ð¸ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¹ ÑÑÑÐ°Ð½Ð¸ÑÐµ.\n          </div>\n          <div class="togetherjs-ifnot-sameUrl">\n            <span class="togetherjs-person-name"></span>\n            Ð¿ÐµÑÐµÑÐµÐ» Ð½Ð°: <a href="#" class="togetherjs-person-url togetherjs-person-url-title" target="_self"></a>\n            <section class="togetherjs-buttons togetherjs-buttons-notification-diff-url">\n              \x3c!-- Displayed when the peer is at a different URL: --\x3e\n              <div class="togetherjs-different-url togetherjs-notification-diff-url">\n                <a class="togetherjs-nudge togetherjs-default">ÐÑÐºÐ°Ð·Ð°ÑÑ Ð¸Ð¼</a>\n                <a href="#" class="togetherjs-follow togetherjs-person-url togetherjs-primary">ÐÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº Ð½Ð¸Ð¼</a>\n              </div>\n            </section>\n\n            \x3c!-- <div>\n              <a class="togetherjs-nudge togetherjs-secondary">ÐÑÐºÐ°Ð·Ð°ÑÑ Ð¸Ð¼</a>\n              <a href="" class="togetherjs-person-url togetherjs-follow togetherjs-primary">ÐÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº Ð½Ð¸Ð¼</a>\n            </div> --\x3e\n\n          </div>\n        </div>\n        <div class="togetherjs-clear"></div>\n      </div>\n    </div>\n\n    <section id="togetherjs-chat-messages">\n      \x3c!-- FIX ME// need to have some dialogue that says something like - There are no chats yet! --\x3e\n    </section>\n    <section id="togetherjs-chat-input-box">\n      <textarea id="togetherjs-chat-input" placeholder="ÐÐ°Ð¿Ð¸ÑÐ¸ÑÐµ ÑÐ¾Ð¾Ð±ÑÐµÐ½Ð¸Ðµ Ð·Ð´ÐµÑÑ"></textarea>\n    </section>\n  </div>\n\n  \x3c!-- this is a kind of warning popped up when you (successfully) start RTC: --\x3e\n  <div id="togetherjs-rtc-info" class="togetherjs-window"\n       data-bind-to="#togetherjs-audio-button"\n       style="display: none">\n\n    <header> ÐÑÐ´Ð¸Ð¾-ÑÐ°Ñ </header>\n    <section>\n      <p>\n        ÐÐºÐ»ÑÑÐ¸ÑÐµ <strong>Ð¼Ð¸ÐºÑÐ¾ÑÐ¾Ð½ Ð±ÑÐ°ÑÐ·ÐµÑÐ°</strong> Ð²Ð¾Ð·Ð»Ðµ Ð°Ð´ÑÐµÑÐ½Ð¾Ð¹ ÑÑÑÐ¾ÐºÐ¸ Ð²Ð²ÐµÑÑÑ.\n      </p>\n      <p>\n        Ð Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ Ð¿Ð¾ Ð¼Ð¸ÐºÑÐ¾ÑÐ¾Ð½Ñ ÑÐµÑÐµÐ· Ð²ÐµÐ±-Ð±ÑÐ°ÑÐ·ÐµÑ - ÑÐºÑÐ¿ÐµÑÐ¸Ð¼ÐµÐ½ÑÐ°Ð»ÑÐ½Ð°Ñ ÑÑÐ½ÐºÑÐ¸Ñ.\n      </p>\n      <p>\n        Ð£Ð·Ð½Ð°Ð¹ÑÐµ Ð±Ð¾Ð»ÑÑÐµ Ð¾ Ð°ÑÐ´Ð¸Ð¾-ÑÐ°ÑÐµ <a href="https://github.com/mozilla/togetherjs/wiki/About-Audio-Chat-and-WebRTC" target="_blank">Ð·Ð´ÐµÑÑ</a>.\n      </p>\n    </section>\n\n    <section class="togetherjs-buttons">\n      <label for="togetherjs-rtc-info-dismiss" style="display: inline;">\n        <input class="togetherjs-dont-show-again" id="togetherjs-rtc-info-dismiss" type="checkbox">\n        ÐÐµ Ð¿Ð¾ÐºÐ°Ð·ÑÐ²Ð°ÑÑ ÑÐ½Ð¾Ð²Ð°\n      </label>\n      <button class="togetherjs-default togetherjs-dismiss" type="button">ÐÐ°ÐºÑÑÑÑ</button>\n    </section>\n  </div>\n\n  \x3c!-- this is popped up when you hit the audio button, but RTC isn\'t\n  supported: --\x3e\n  <div id="togetherjs-rtc-not-supported" class="togetherjs-window"\n       data-bind-to="#togetherjs-audio-button"\n       style="display: none">\n    <header> ÐÑÐ´Ð¸Ð¾-ÑÐ°Ñ </header>\n\n    <section>\n      <p>ÐÐ»Ñ Ð°ÑÐ´Ð¸Ð¾-ÑÐ°ÑÐ° Ð½ÐµÐ¾Ð±ÑÐ¾Ð´Ð¸Ð¼ Ð±Ð¾Ð»ÐµÐµ Ð½Ð¾Ð²ÑÐ¹ <a href="https://github.com/mozilla/togetherjs/wiki/About-Audio-Chat-and-WebRTC" target="_blank">\n        Ð±ÑÐ°ÑÐ·ÐµÑ\n      </a>!</p>\n      <p>\n        ÐÐ»Ñ Ð¾Ð½Ð»Ð°Ð¹Ð½ Ð°ÑÐ´Ð¸Ð¾-ÑÐ°ÑÐ° Ð½ÐµÐ¾Ð±ÑÐ¾Ð´Ð¸Ð¼ Ð±Ð¾Ð»ÐµÐµ Ð½Ð¾Ð²ÑÐ¹ (Ð¸Ð»Ð¸ Ð´ÑÑÐ³Ð¾Ð¹) Ð±ÑÐ°ÑÐ·ÐµÑ.\n      </p>\n      <p>\n        ÐÐ¾ÑÐµÑÐ¸ÑÐµ\n        <a href="https://github.com/mozilla/togetherjs/wiki/About-Audio-Chat-and-WebRTC" target="_blank">\n          ÑÑÑ ÑÑÑÐ°Ð½Ð¸ÑÑ\n        </a>\n        Ð´Ð»Ñ Ð¿Ð¾Ð»ÑÑÐµÐ½Ð¸Ñ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸ÑÐµÐ»ÑÐ½Ð¾Ð¹ Ð¸Ð½ÑÐ¾ÑÐ¼Ð°ÑÐ¸Ð¸ Ð¸ ÑÐ¿Ð¸ÑÐºÐ° Ð¿Ð¾Ð´Ð´ÐµÑÐ¶Ð¸Ð²Ð°ÐµÐ¼ÑÑ Ð±ÑÐ°ÑÐ·ÐµÑÐ¾Ð².\n      </p>\n    </section>\n\n    <section class="togetherjs-buttons">\n      <div class="togetherjs-rtc-dialog-btn">\n        <button class="togetherjs-default togetherjs-dismiss" type="button">ÐÐ°ÐºÑÑÑÑ</button>\n      </div>\n    </section>\n  </div>\n\n  \x3c!-- The popup when a chat message comes in and the #togetherjs-chat window isn\'t open --\x3e\n  <div id="togetherjs-chat-notifier" class="togetherjs-notification"\n       data-bind-to="#togetherjs-chat-button"\n       style="display: none">\n    <img src="/lib/togetherjs/images/notification-togetherjs-logo.png" class="togetherjs-notification-logo" alt="">\n    <img src="/lib/togetherjs/images/notification-btn-close.png" class="togetherjs-notification-closebtn togetherjs-dismiss" alt="[close]">\n    <section id="togetherjs-chat-notifier-message">\n    </section>\n  </div>\n\n  \x3c!-- The menu when you click on the profile: --\x3e\n  <div id="togetherjs-menu" class="togetherjs-menu" style="display: none">\n    <div class="togetherjs-menu-item togetherjs-menu-disabled" id="togetherjs-menu-profile">\n      <img id="togetherjs-menu-avatar">\n      <span class="togetherjs-person-name-self" id="togetherjs-self-name-display" data-toggles="#togetherjs-menu .togetherjs-self-name"></span>\n      <input class="togetherjs-self-name" type="text" data-toggles="#togetherjs-self-name-display" style="display: none" placeholder="ÐÐ²ÐµÐ´Ð¸ÑÐµ Ð²Ð°ÑÐµ Ð¸Ð¼Ñ">\n    </div>\n    <div class="togetherjs-menu-hr-avatar"></div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-update-name"><img src="/lib/togetherjs/images/button-pencil.png" alt="">Ð¡Ð¼ÐµÐ½Ð¸ÑÑ Ð¸Ð¼Ñ</div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-update-avatar"><img src="/lib/togetherjs/images/btn-menu-change-avatar.png" alt=""> Ð¡Ð¼ÐµÐ½Ð¸ÑÑ Ð°Ð²Ð°ÑÐ°Ñ</div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-update-color"><span class="togetherjs-person-bgcolor-self"></span>ÐÑÐ±ÑÐ°ÑÑ ÑÐ²ÐµÑ Ð¿ÑÐ¾ÑÐ¸Ð»Ñ</div>\n    <div class="togetherjs-hr"></div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-help">Ð¡Ð¿ÑÐ°Ð²ÐºÐ°</div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-feedback">ÐÐ±ÑÐ°ÑÐ½Ð°Ñ ÑÐ²ÑÐ·Ñ</div>\n    <div id="togetherjs-invite" style="display: none">\n      <div class="togetherjs-hr"></div>\n      <div id="togetherjs-invite-users"></div>\n      <div class="togetherjs-menu-item" id="togetherjs-menu-refresh-invite">Refresh users</div>\n      <div class="togetherjs-menu-item" id="togetherjs-menu-invite-anyone">ÐÑÐ¸Ð³Ð»Ð°ÑÐ¸ÑÑ ÐºÐ¾Ð³Ð¾-Ð½Ð¸Ð±ÑÐ´Ñ</div>\n    </div>\n    <div class="togetherjs-hr"></div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-end"><img src="/lib/togetherjs/images/button-end-session.png" alt=""> ÐÐ°ÐºÑÑÑÑ <span class="togetherjs-tool-name">TogetherJS</span></div>\n  </div>\n\n  \x3c!-- template for one person in the invite-users list --\x3e\n  <div style="display: none">\n    <div id="togetherjs-template-invite-user-item" class="togetherjs-menu-item">\n      \x3c!-- FIXME: should include avatar in some way --\x3e\n      <span class="togetherjs-person-name"></span>\n    </div>\n  </div>\n\n  \x3c!-- A window version of #togetherjs-menu, for use on mobile --\x3e\n  <div id="togetherjs-menu-window" class="togetherjs-window" style="display: none">\n    <header>ÐÐ°ÑÑÑÐ¾Ð¹ÐºÐ¸ Ð¸ Ð¿ÑÐ¾ÑÐ¸Ð»Ñ</header>\n    <section>\n    <div class="togetherjs-menu-item">\n      <img class="togetherjs-menu-avatar">\n      <span class="togetherjs-person-name-self" id="togetherjs-self-name-display"></span>\n    </div>\n    <div class="togetherjs-menu-hr-avatar"></div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-update-name-button"><img src="/lib/togetherjs/images/button-pencil.png" alt=""> Ð¡Ð¼ÐµÐ½Ð¸ÑÑ Ð¸Ð¼Ñ</div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-update-avatar-button"><img src="/lib/togetherjs/images/btn-menu-change-avatar.png" alt=""> Ð¡Ð¼ÐµÐ½Ð¸ÑÑ Ð°Ð²Ð°ÑÐ°Ñ</div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-update-color-button"><span class="togetherjs-person-bgcolor-self"></span> ÐÑÐ±ÑÐ°ÑÑ ÑÐ²ÐµÑ Ð¿ÑÐ¾ÑÐ¸Ð»Ñ</div>\n    <div class="togetherjs-hr"></div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-help-button">Ð¡Ð¿ÑÐ°Ð²ÐºÐ°</div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-feedback-button">ÐÐ±ÑÐ°ÑÐ½Ð°Ñ ÑÐ²ÑÐ·Ñ</div>\n    <div class="togetherjs-hr"></div>\n    <div class="togetherjs-menu-item" id="togetherjs-menu-end-button"><img src="/lib/togetherjs/images/button-end-session.png" alt=""> ÐÐ°ÐºÑÑÑÑ <span class="togetherjs-tool-name">TogetherJS</span></div>\n    </section>\n    <section class="togetherjs-buttons">\n      <button class="togetherjs-dismiss togetherjs-primary">Ð¥Ð¾ÑÐ¾ÑÐ¾</button>\n    </section>\n  </div>\n\n  \x3c!-- The name editor, for use on mobile --\x3e\n  <div id="togetherjs-edit-name-window" class="togetherjs-window" style="display: none">\n    <header>ÐÐ·Ð¼ÐµÐ½Ð¸ÑÑ Ð¸Ð¼Ñ</header>\n    <section>\n      <div>\n        <input class="togetherjs-self-name" type="text" placeholder="ÐÐ²ÐµÐ´Ð¸ÑÐµ Ð²Ð°ÑÐµ Ð¸Ð¼Ñ">\n      </div>\n    </section>\n    <section class="togetherjs-buttons">\n      <button class="togetherjs-dismiss togetherjs-primary">Ð¥Ð¾ÑÐ¾ÑÐ¾</button>\n    </section>\n  </div>\n\n  <div class="togetherjs-menu" id="togetherjs-pick-color" style="display: none">\n    <div class="togetherjs-triangle-up"><img src="/lib/togetherjs/images/icn-triangle-up.png"></div>\n    <div style="display: none">\n      <div id="togetherjs-template-swatch" class="togetherjs-swatch">\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Invisible elements that handle the RTC audio: --\x3e\n  <audio id="togetherjs-audio-element"></audio>\n  <audio id="togetherjs-local-audio" muted="true" volume="0.3"></audio>\n  <audio id="togetherjs-notification" src="/lib/togetherjs/images/notification.ogg"></audio>\n\n  \x3c!-- The intro screen for someone who joins a session the first time: --\x3e\n  <div id="togetherjs-intro" class="togetherjs-modal" style="display: none">\n    <header>ÐÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº ÑÐµÐ°Ð½ÑÑ <span class="togetherjs-tool-name">TogetherJS</span></header>\n    <section>\n      <p>ÐÐ°Ñ Ð¿ÑÐ¸Ð³Ð»Ð°ÑÐ¸Ð»Ð¸ Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº Ð±ÑÐ°ÑÐ·ÐµÑÐ½Ð¾Ð¼Ñ ÑÐµÐ°Ð½ÑÑ <a href="https://togetherjs.mozillalabs.com/" target="_blank"><span class="togetherjs-tool-name">TogetherJS</span></a> Ð´Ð»Ñ ÑÐ¾ÑÑÑÐ´Ð½Ð¸ÑÐµÑÑÐ²Ð° Ð² ÑÐµÐ°Ð»ÑÐ½Ð¾Ð¼ Ð²ÑÐµÐ¼ÐµÐ½Ð¸!</p>\n\n      <p>Ð¥Ð¾ÑÐµÐ»Ð¸ Ð±Ñ ÐÑ Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº ÑÐµÐ°Ð½ÑÑ?</p>\n    </section>\n\n    <section class="togetherjs-buttons">\n      <button class="togetherjs-destructive togetherjs-modal-dont-join">ÐÐµÑ, Ð½Ðµ Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½ÑÑÑÑÑ</button>\n      <button class="togetherjs-primary togetherjs-dismiss">ÐÐ°, Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº ÑÐµÐ°Ð½ÑÑ</button>\n    </section>\n  </div>\n\n  \x3c!-- Shown when a web browser is completely incapable of running TogetherJS: --\x3e\n  <div id="togetherjs-browser-broken" class="togetherjs-modal" style="display: none">\n    <header> ÐÐ·Ð²Ð¸Ð½Ð¸ÑÐµ </header>\n\n    <section>\n      <p>\n        Ð ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸Ñ, <span class="togetherjs-tool-name">TogetherJS</span> Ð½Ðµ ÑÐ°Ð±Ð¾ÑÐ°ÐµÑ Ð² ÑÑÐ¾Ð¼ Ð±ÑÐ°ÑÐ·ÐµÑÐµ.  ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ°\n        <a href="https://github.com/mozilla/togetherjs/wiki/Supported-Browsers#supported-browsers">Ð¸ÑÐ¿Ð¾Ð»ÑÐ·ÑÐ¹ÑÐµ\n          Ð¿Ð¾Ð´Ð´ÐµÑÐ¶Ð¸Ð²Ð°ÐµÐ¼ÑÐ¹ Ð±ÑÐ°ÑÐ·ÐµÑ</a> Ð´Ð»Ñ ÑÐ°Ð±Ð¾ÑÑ Ñ <span class="togetherjs-tool-name">TogetherJS</span>.\n      </p>\n\n      <p id="togetherjs-browser-broken-is-ie" style="display: none">\n       ÐÐ°Ð¼ Ð½ÑÐ¶Ð½Ð° ÐÐ°ÑÐ° Ð¿Ð¾Ð¼Ð¾ÑÑ Ð² Ð¸ÑÐ¿ÑÐ°Ð²Ð»ÐµÐ½Ð¸Ð¸ TogetherJS Ð´Ð»Ñ Internet Explorer!  ÐÐ¾Ñ ÑÐ¿Ð¸ÑÐ¾Ðº <a href="https://github.com/mozilla/togetherjs/issues?labels=IE&milestone=&page=1&state=open" target="_blank">Ð¾ÑÐ¸Ð±Ð¾Ðº Ð½Ð° GitHub</a>, ÐºÐ¾ÑÐ¾ÑÑÐµ Ð½Ð°Ð¼ Ð½ÑÐ¶Ð½Ð¾ Ð¸ÑÐ¿ÑÐ°Ð²Ð¸ÑÑ, Ð¸ Ð½Ð°Ð´ ÐºÐ¾ÑÐ¾ÑÑÐ¼Ð¸ ÐÑ Ð¼Ð¾Ð¶ÐµÑÐµ Ð¿Ð¾ÑÐ°Ð±Ð¾ÑÐ°ÑÑ.\n        Internet Explorer <a href="https://github.com/mozilla/togetherjs/wiki/Supported-Browsers#internet-explorer">is\n          currently not supported</a>.  If you do want to try out TogetherJS, we\'d suggest using Firefox or Chrome.\n      </p>\n    </section>\n\n    <section class="togetherjs-buttons">\n      <button class="togetherjs-dismiss togetherjs-primary">ÐÐ°ÐºÑÑÑÑ <span class="togetherjs-tool-name">TogetherJS</span></button>\n    </section>\n\n  </div>\n\n  \x3c!-- Shown when the browser has WebSockets, but is IE (i.e., IE10) --\x3e\n  <div id="togetherjs-browser-unsupported" class="togetherjs-modal" style="display: none">\n    <header> ÐÑÐ°ÑÐ·ÐµÑ Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑÐ¶Ð¸Ð²Ð°ÐµÑÑÑ </header>\n\n    <section>\n      <p>\n       ÐÐ°Ð¼ Ð½ÑÐ¶Ð½Ð° ÐÐ°ÑÐ° Ð¿Ð¾Ð¼Ð¾ÑÑ Ð² Ð¸ÑÐ¿ÑÐ°Ð²Ð»ÐµÐ½Ð¸Ð¸ TogetherJS Ð´Ð»Ñ Internet Explorer!  ÐÐ¾Ñ ÑÐ¿Ð¸ÑÐ¾Ðº <a href="https://github.com/mozilla/togetherjs/issues?labels=IE&milestone=&page=1&state=open" target="_blank">Ð¾ÑÐ¸Ð±Ð¾Ðº Ð½Ð° GitHub</a>, ÐºÐ¾ÑÐ¾ÑÑÐµ Ð½Ð°Ð¼ Ð½ÑÐ¶Ð½Ð¾ Ð¸ÑÐ¿ÑÐ°Ð²Ð¸ÑÑ, Ð¸ Ð½Ð°Ð´ ÐºÐ¾ÑÐ¾ÑÑÐ¼Ð¸ ÐÑ Ð¼Ð¾Ð¶ÐµÑÐµ Ð¿Ð¾ÑÐ°Ð±Ð¾ÑÐ°ÑÑ.\n        Internet Explorer <a href="https://github.com/mozilla/togetherjs/wiki/Supported-Browsers#internet-explorer">is not supported</a>\n        at this time.  While we may add support later, adding support is\n        not currently on our roadmap.  If you do want to try out TogetherJS, we\'d suggest using Firefox or Chrome.\n      </p>\n\n      <p>ÐÑ Ð¼Ð¾Ð¶ÐµÑÐµ Ð¿ÑÐ¾Ð´Ð¾Ð»Ð¶Ð°ÑÑ Ð¸ÑÐ¿Ð¾Ð»ÑÐ·Ð¾Ð²Ð°ÑÑ <span class="togetherjs-tool-name">TogetherJS</span>,Ð½Ð¾ ÑÐºÐ¾ÑÐµÐµ Ð²ÑÐµÐ³Ð¾ ÑÑÐ¾Ð»ÐºÐ½ÐµÑÐµÑÑ\n Ñ Ð¼Ð½Ð¾Ð¶ÐµÑÑÐ²Ð¾Ð¼ Ð¿ÑÐ¾Ð±Ð»ÐµÐ¼. ÐÐ¾Ð¼Ð½Ð¸ÑÐµ Ð¾Ð± ÑÑÐ¾Ð¼.</p>\n\n    </section>\n\n    <section class="togetherjs-buttons">\n      <button class="togetherjs-dismiss togetherjs-primary">ÐÐ°ÐºÑÑÑÑ <span class="togetherjs-tool-name">TogetherJS</span></button>\n      <button class="togetherjs-dismiss togetherjs-secondary togetherjs-browser-unsupported-anyway">ÐÐ¾Ð¿ÑÐ¾Ð±Ð¾Ð²Ð°ÑÑ <span class="togetherjs-tool-name">TogetherJS</span> Ð² Ð»ÑÐ±Ð¾Ð¼ ÑÐ»ÑÑÐ°Ðµ</button>\n    </section>\n\n  </div>\n\n  <div id="togetherjs-confirm-end" class="togetherjs-modal" style="display: none">\n    <header> ÐÐ°Ð²ÐµÑÑÐ¸ÑÑ ÑÐµÐ°Ð½Ñ? </header>\n    <section>\n      <p>\n        ÐÑ Ð´ÐµÐ¹ÑÑÐ²Ð¸ÑÐµÐ»ÑÐ½Ð¾ ÑÐ¾ÑÐ¸ÑÐµ Ð·Ð°Ð²ÐµÑÑÐ¸ÑÑ ÑÐµÐ°Ð½Ñ <span class="togetherjs-tool-name">TogetherJS</span>?\n      </p>\n    </section>\n    <section class="togetherjs-buttons">\n      <button class="togetherjs-cancel togetherjs-dismiss">ÐÑÐ¼ÐµÐ½Ð°</button>\n      <span class="togetherjs-alt-text">Ð¸Ð»Ð¸</span>\n      <button id="togetherjs-end-session" class="togetherjs-destructive">ÐÐ°Ð²ÐµÑÑÐ¸ÑÑ ÑÐµÐ°Ð½Ñ</button>\n    </section>\n  </div>\n\n  <div id="togetherjs-feedback-form" class="togetherjs-modal" style="display: none;">\n    <header> ÐÐ±ÑÐ°ÑÐ½Ð°Ñ ÑÐ²ÑÐ·Ñ </header>\n    <iframe src="https://docs.google.com/a/mozilla.com/forms/d/1lVE7JyRo_tjakN0mLG1Cd9X9vseBX9wci153z9JcNEs/viewform?embedded=true" width="400" height="300" frameborder="0" marginheight="0" marginwidth="0">ÐÐ°Ð³ÑÑÐ¶Ð°Ñ ÑÐ¾ÑÐ¼Ñ ...</iframe>\n    \x3c!-- <p><button class="togetherjs-modal-close">ÐÐ°ÐºÑÑÑÑ</button></p> --\x3e\n  </div>\n\n  <div style="display: none">\n    \x3c!-- This is when you join a session and the other person has already changed to another URL: --\x3e\n    <div id="togetherjs-template-url-change" class="togetherjs-modal">\n      <header> ÐÐµÑÐµÑÐ¾Ð´ Ð½Ð° Ð½Ð¾Ð²ÑÐ¹ URL... </header>\n      <section>\n        <div class="togetherjs-person"></div>\n        ÐÐµÑÐµÑÐ¾Ð´\n        <span class="togetherjs-person-name"></span>\n        Ð½Ð° <a href="" class="togetherjs-person-url togetherjs-person-url-title"></a>\n      </section>\n    </div>\n\n    \x3c!-- This is when someone invites you to their session: --\x3e\n    <div id="togetherjs-template-invite" class="togetherjs-chat-item">\n      <div class="togetherjs-person"></div>\n      <div>\n        <span class="togetherjs-person-name"></span>\n        Ð¿ÑÐ¸Ð³Ð»Ð°ÑÐ¸Ð» <strong class="togetherjs-if-forEveryone">Ð²ÑÐµÑ</strong>\n        <strong class="togetherjs-ifnot-forEveryone">Ð²Ð°Ñ</strong>\n        Ð² <a href="" data-togetherjs-subattr-href="href" class="togetherjs-sub-hrefTitle" target="_blank"></a>\n      </div>\n    </div>\n\n  </div>\n\n  \x3c!-- The pointer at the side of a window: --\x3e\n  <div id="togetherjs-window-pointer-right" style="display: none"></div>\n  <div id="togetherjs-window-pointer-left" style="display: none"></div>\n\n  \x3c!-- The element that overlaps the background of the page during a modal dialog: --\x3e\n  <div id="togetherjs-modal-background" style="display: none"></div>\n\n  \x3c!-- Some miscellaneous templates --\x3e\n  <div style="display: none">\n\n    \x3c!-- This is the cursor: --\x3e\n    <div id="togetherjs-template-cursor" class="togetherjs-cursor togetherjs">\n      \x3c!-- Note: /lib/togetherjs/images/cursor.svg is a copy of this (for editing): --\x3e\n      \x3c!-- crossbrowser svg dropshadow http://demosthenes.info/blog/600/Creating-a-True-CrossBrowser-Drop-Shadow- --\x3e\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      \t width="15px" height="22.838px" viewBox="96.344 146.692 15 22.838" enable-background="new 96.344 146.692 15 22.838"\n      \t xml:space="preserve">\n      <path fill="#231F20" d="M98.984,146.692c2.167,1.322,1.624,6.067,3.773,7.298c-0.072-0.488,2.512-0.931,3.097,0\n      \tc0.503,0.337,1.104-0.846,2.653,0.443c0.555,0.593,3.258,2.179,1.001,8.851c-0.446,1.316,2.854,0.135,1.169,2.619\n      \tc-3.748,5.521-9.455,2.787-9.062,1.746c1.06-2.809-6.889-4.885-4.97-9.896c0.834-2.559,2.898,0.653,2.923,0.29\n      \tc-0.434-1.07-2.608-5.541-2.923-6.985C96.587,150.793,95.342,147.033,98.984,146.692z"/>\n      </svg>\n      \x3c!-- <img class="togetherjs-cursor-img" src="/lib/togetherjs/images/cursor.svg"> --\x3e\n      <span class="togetherjs-cursor-container">\n        <span class="togetherjs-cursor-name"></span>\n        <span style="display:none" class="togetherjs-cursor-typing" id="togetherjs-cursor-typebox">\n          <span class="togetherjs-typing-ellipse-one">&#9679;</span><span class="togetherjs-typing-ellipse-two">&#9679;</span><span class="togetherjs-typing-ellipse-three">&#9679;</span>\n        </span>\n        \x3c!-- Displayed when the cursor is below the screen: --\x3e\n        <span class="togetherjs-cursor-down">\n\n        </span>\n        \x3c!-- Displayed when the cursor is above the screen: --\x3e\n        <span class="togetherjs-cursor-up">\n\n        </span>\n      </span>\n    </div>\n\n    \x3c!-- This is the element that goes around focused form elements: --\x3e\n    <div id="togetherjs-template-focus">\n      <div class="togetherjs-focus togetherjs-person-bordercolor"></div>\n    </div>\n\n    \x3c!-- This is a click: --\x3e\n    <div id="togetherjs-template-click" class="togetherjs-click togetherjs">\n    </div>\n  </div>\n</div>\n'),help:t('<% /*\n  This is used to show the help when you type /help.  Used in\n  TogetherJS.localChatMessage().\n\n*/ %>\n/help : this message\n/test : run an automated/randomized test (or stop one that is in progress)\n  /test start N : run N times (instead of default 100)\n  /test show : show what kind of actions the random test would take (or stop showing)\n  /test describe : describe the possible actions (instead of showing them)\n/clear : clear the chat area\n/record : open up a recorder for the session\n/playback URL : play back a session that was recorded (it\'s up to you to figure out how to host it)\n  /playback local:NAME : play a locally saved log\n/savelogs NAME : save the currently recorded logs under NAME (recorder must be open)\n/baseurl : set a local baseUrl to load TogetherJS from, for debugging a development version of TogetherJS.\n/config : override some TogetherJS configuration parameters\n  /config VAR VALUE : set TogetherJS.config("VAR", VALUE).  VALUE must be a legal Javascript/JSON literal.\n  /config clear : remove all overridden configuration\n'),walkthrough:t('\x3c!--\n    Any elements with .togetherjs-walkthrough-firsttime will only be\n    displayed on during the first-time experience.  Any elements with\n    .togetherjs-walkthrough-not-firsttime will only be displayed when\n    the walkthrough is accessed through the Help menu.\n\n    Note you *cannot* use <section class="togetherjs-walkthrough-slide\n    togetherjs-walkthrough-firsttime">: the number of sections must be the\n    same regardless.\n  --\x3e\n<div id="togetherjs-walkthrough" class="togetherjs-modal togetherjs-modal-wide">\n  <header>ÐÑ Ð¸ÑÐ¿Ð¾Ð»ÑÐ·ÑÐµÑÐµ <span class="togetherjs-tool-name">TogetherJS</span>!<button class="togetherjs-close"></button></header>\n\n  <div id="togetherjs-walkthrough-previous"></div>\n  <div id="togetherjs-walkthrough-next"></div>\n\n  <section class="togetherjs-walkthrough-slide">\n    <p class="togetherjs-walkthrough-main-image"><img src="/lib/togetherjs/images/walkthrough-images-intro.png"></p>\n\t<p><span class="togetherjs-tool-name">TogetherJS</span> ÑÑÐ¾ Ð´Ð¾Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð²ÐµÐ±-ÑÐ°Ð¹ÑÐ¾Ð², Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑÑÐµÐµ Ð²Ð°Ð¼ ÑÐ¾ÑÑÑÐ´Ð½Ð¸ÑÐ°ÑÑ Ñ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ°Ð¼Ð¸ Ð² ÑÐµÐ°Ð»ÑÐ½Ð¾Ð¼ Ð²ÑÐµÐ¼ÐµÐ½Ð¸ Ð½Ð° ÑÐ°Ð¹ÑÐµ <strong class="togetherjs-site-name">EasyComp</strong></p>\n  </section>\n\n  <section class="togetherjs-walkthrough-slide">\n    <div class="togetherjs-walkthrough-firsttime">\n      <div class="togetherjs-walkthrough-main-image">\n        <div class="togetherjs-walkthrough-avatar-section">\n          <div class="togetherjs-avatar-preview togetherjs-person togetherjs-person-self"></div>\n          <div class="togetherjs-avatar-upload-input"><input type="file" class="togetherjs-upload-avatar"></div>\n        </div>\n        <input class="togetherjs-self-name" type="text" placeholder="ÐÐ²ÐµÐ´Ð¸ÑÐµ Ð²Ð°ÑÐµ Ð¸Ð¼Ñ">\n        <div class="togetherjs-swatch togetherjs-person-bgcolor-self"></div>\n        <div class="togetherjs-save-settings">\n          <button class="togetherjs-avatar-save togetherjs-primary">\n            <span id="togetherjs-avatar-when-unsaved">Ð¡Ð¾ÑÑÐ°Ð½Ð¸ÑÑ</span>\n            <span id="togetherjs-avatar-when-saved" style="display: none">Ð¡Ð¾ÑÑÐ°Ð½ÐµÐ½Ð¾!</span>\n          </button>\n        </div>\n      </div>\n      <p>ÐÐ°Ð´Ð°Ð¹ÑÐµ ÑÐ²Ð¾Ð¸ Ð°Ð²Ð°ÑÐ°Ñ, Ð¸Ð¼Ñ Ð¸ ÑÐ²ÐµÑ Ð¿Ð¾Ð»ÑÐ·Ð¾Ð²Ð°ÑÐµÐ»Ñ Ð²Ð²ÐµÑÑÑ. ÐÑÐ¸ Ð¶ÐµÐ»Ð°Ð½Ð¸Ð¸ Ð¸Ð·Ð¼ÐµÐ½Ð¸ÑÑ Ð¸Ñ Ð¿Ð¾Ð·Ð´Ð½ÐµÐµ, ÑÑÐ»ÐºÐ½Ð¸ÑÐµ Ð¿Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐµ ÐÑÐ¾ÑÐ¸Ð»Ñ.</p>\n    </div>\n    <div class="togetherjs-walkthrough-not-firsttime">\n      <p class="togetherjs-walkthrough-main-image"><img src="/lib/togetherjs/images/walkthrough-images-profile.png"></p>\n      <p>ÐÑ Ð¼Ð¾Ð¶ÐµÑÐµ Ð¸Ð·Ð¼ÐµÐ½Ð¸ÑÑ ÑÐ²Ð¾Ð¸ Ð°Ð²Ð°ÑÐ°Ñ, Ð¸Ð¼Ñ Ð¸ ÑÐ²ÐµÑ Ð¿Ð¾Ð»ÑÐ·Ð¾Ð²Ð°ÑÐµÐ»Ñ, Ñ Ð¿Ð¾Ð¼Ð¾ÑÑÑ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÐÑÐ¾ÑÐ¸Ð»Ñ.</p>\n    </div>\n  </section>\n\n  <section class="togetherjs-walkthrough-slide">\n    <p class="togetherjs-walkthrough-main-image togetherjs-ifnot-creator"><img src="/lib/togetherjs/images/walkthrough-images-invite.png">\n    </p>\n    <p class="togetherjs-ifnot-creator">ÐÑ Ð¼Ð¾Ð¶ÐµÑÐµ Ð¿ÑÐ¸Ð³Ð»Ð°ÑÐ¸ÑÑ Ð½Ð¾Ð²ÑÑ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ¾Ð² Ð² Ð²Ð°Ñ ÑÐµÐ°Ð½Ñ, Ð¿Ð¾ÑÐ»Ð°Ð² Ð¸Ð¼ ÑÑÑÐ»ÐºÑ Ñ Ð¿ÑÐ¸Ð³Ð»Ð°ÑÐµÐ½Ð¸ÐµÐ¼ Ñ Ð¿Ð¾Ð¼Ð¾ÑÑÑ Ð¿Ð°Ð½ÐµÐ»Ð¸ <span class="togetherjs-tool-name">TogetherJS</span>.</p>\n    <p class="togetherjs-walkthrough-main-image togetherjs-if-creator">\n      <span class="togetherjs-walkthrough-sendlink">\n        ÐÐµÑÐµÐ´Ð°Ð¹ÑÐµ ÑÑÑ ÑÑÑÐ»ÐºÑ ÐºÐ¾Ð¼Ñ-Ð»Ð¸Ð±Ð¾ ÑÑÐ¾Ð±Ñ Ð¿ÑÐ¸Ð³Ð»Ð°ÑÐ¸ÑÑ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ°.\n      </span>\n      <input type="text" class="togetherjs-share-link">\n    </p>\n    <p class="togetherjs-if-creator">ÐÐµÑÐµÐ´Ð°Ð¹ÑÐµ ÑÑÐ°ÑÑÐ½Ð¸ÐºÑ ÑÑÑÐ»ÐºÑ Ð²Ð²ÐµÑÑÑ, ÑÑÐ¾Ð±Ñ Ð¾Ð½ Ð¼Ð¾Ð³ Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑÑÑ Ðº ÐÐ°ÑÐµÐ¼Ñ ÑÐµÐ°Ð½ÑÑ! ÐÑ ÑÐ°ÐºÐ¶Ðµ Ð¼Ð¾Ð¶ÐµÑÐµ Ð½Ð°Ð¹ÑÐ¸ ÑÑÑ ÑÑÑÐ»ÐºÑ Ñ Ð¿ÑÐ¸Ð³Ð»Ð°ÑÐµÐ½Ð¸ÐµÐ¼ Ð½Ð° Ð¿Ð°Ð½ÐµÐ»Ð¸ <span class="togetherjs-tool-name">TogetherJS</span>.</p>\n  </section>\n\n  <section class="togetherjs-walkthrough-slide">\n    <p class="togetherjs-walkthrough-main-image"><img src="/lib/togetherjs/images/walkthrough-images-participant.png"></p>\n    <p>Ð£ÑÐ°ÑÑÐ½Ð¸ÐºÐ¸,Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸Ð²ÑÐ¸ÐµÑÑ Ðº ÐÐ°ÑÐµÐ¼Ñ ÑÐµÐ°Ð½ÑÑ <span class="togetherjs-tool-name">TogetherJS</span> Ð¿Ð¾ÑÐ²ÑÑÑÑ Ð·Ð´ÐµÑÑ. ÐÑ Ð¼Ð¾Ð¶ÐµÑÐµ ÑÑÐ»ÐºÐ½ÑÑÑ Ð¿Ð¾ Ð°Ð²Ð°ÑÐ°ÑÑ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ°, ÑÑÐ¾Ð±Ñ ÑÐ²Ð¸Ð´ÐµÑÑ Ð±Ð¾Ð»ÑÑÐµ Ð¸Ð½ÑÐ¾ÑÐ¼Ð°ÑÐ¸Ð¸.</p>\n  </section>\n\n  <section class="togetherjs-walkthrough-slide">\n    <p class="togetherjs-walkthrough-main-image"><img src="/lib/togetherjs/images/walkthrough-images-chat.png"></p>\n    <p>RÐ¾Ð³Ð´Ð° Ð²Ð°ÑÐ¸ ÑÑÐ°ÑÑÐ½Ð¸ÐºÐ¸ Ð¿ÑÐ¸ÑÐ¾ÐµÐ´Ð¸Ð½ÑÑÑÑ Ðº Ð²Ð°ÑÐµÐ¼Ñ ÑÐµÐ°Ð½ÑÑ <span class="togetherjs-tool-name">TogetherJS</span>, Ð²Ñ ÑÐ¼Ð¾Ð¶ÐµÑÐµ Ð¾Ð±ÑÐ°ÑÑÑÑ Ñ Ð½Ð¸Ð¼Ð¸ Ð·Ð´ÐµÑÑ!</p>\n  </section>\n\n  <section class="togetherjs-walkthrough-slide">\n    <p class="togetherjs-walkthrough-main-image"><img src="/lib/togetherjs/images/walkthrough-images-rtc.png"></p>\n    <p>ÐÑÐ»Ð¸ ÐÐ°Ñ Ð±ÑÐ°ÑÐ·ÐµÑ Ð¿Ð¾Ð´Ð´ÐµÑÐ¶Ð¸Ð²Ð°ÐµÑ Ð°ÑÐ´Ð¸Ð¾-ÑÐ°Ñ, ÐÑ Ð¼Ð¾Ð¶ÐµÑÐµ Ð·Ð°Ð¿ÑÑÑÐ¸ÑÑ ÐµÐ³Ð¾ Ð½Ð°Ð¶Ð°ÑÐ¸ÐµÐ¼ Ð½Ð° Ð¸ÐºÐ¾Ð½ÐºÑ Ð¼Ð¸ÐºÑÐ¾ÑÐ¾Ð½Ð°. Ð£Ð·Ð½Ð°Ð¹ÑÐµ Ð±Ð¾Ð»ÑÑÐµ Ð¾Ð± ÑÑÐ¾Ð¹ ÑÐºÑÐ¿ÐµÑÐ¸Ð¼ÐµÐ½ÑÐ°Ð»ÑÐ½Ð¾Ð¹ ÑÑÐ½ÐºÑÐ¸Ð¸ <a href="https://github.com/mozilla/togetherjs/wiki/About-Audio-Chat-and-WebRTC" target="_blank">Ð·Ð´ÐµÑÑ</a>.</p>\n  </section>\n\n  <section class="togetherjs-walkthrough-slide">\n    <p class="togetherjs-walkthrough-main-image"><img src="/lib/togetherjs/images/walkthrough-images-logo.png"></p>\n    <p>ÐÑ Ð²Ð¾Ñ ÐÑ Ð¸ Ð³Ð¾ÑÐ¾Ð²Ñ Ð¸ÑÐ¿Ð¾Ð»ÑÐ·Ð¾Ð²Ð°ÑÑ <span class="togetherjs-tool-name">TogetherJS</span>. Ð¢ÐµÐ¿ÐµÑÑ Ð²Ñ Ð¼Ð¾Ð¶ÐµÑÐµ ÑÐ¾ÑÑÑÐ´Ð½Ð¸ÑÐ°ÑÑ Ð½Ð° ÑÐ°Ð¹ÑÐµ <strong class="togetherjs-site-name">EasyComp</strong>!</p>\n  </section>\n\n  <div style="display: none">\n    \x3c!-- There is one of these created for each slide: --\x3e\n    <span id="togetherjs-template-walkthrough-slide-progress" class="togetherjs-walkthrough-slide-progress">&#9679;</span>\n  </div>\n  <section id="togetherjs-walkthrough-progress">\n  </section>\n\n  <section class="togetherjs-buttons">\n    <button class="togetherjs-primary togetherjs-dismiss">Ð¯ Ð³Ð¾ÑÐ¾Ð²!</button>\n  </section>\n\n</div>\x3c!-- /.togetherjs-modal --\x3e\n')}}),n("peers",["util","session","storage","require"],function(e,t,n,o){var r,i=e.Module("peers"),s=e.assert,a=1e4,l=18e4,c=6e5;o(["ui"],function(e){r=e});var u=["Friendly Fox","Cosmic Cuttlefish","Bionic Beaver","Xenial Xerus","Trusty Tahr","Artful Aardvark","Disco Dingo","Zesty Zapus","Yakkety Yak","Wily Werewolf","Utopic Unicorn","Saucy Salamander","Raring Ringtail","Quantal Quetzal","Precise Pangolin","Oneiric Ocelot","Natty Narwhal","Maverick Meerkat","Lucid Lynx","Karmic Koala","Jaunty Jackalope","Intrepid Ibex","Hardy Heron","Gutsy Gibbon","Feisty Fawn","Edgy Eft","Dapper Drake","Breezy Badger","Hoary Hedgehog","Warty Warthog","Brilliant Beaver","Observant Owl","Gregarious Giraffe","Wild Wolf","Silent Seal","Wacky Whale","Curious Cat","Intelligent Iguana"],h=e.Class({isSelf:!1,constructor:function(e,t){t=t||{},s(e),s(!h.peers[e]),this.id=e,this.identityId=t.identityId||null,this.status=t.status||"live",this.idle=t.status||"active",this.name=t.name||null,this.avatar=t.avatar||null,this.color=t.color||"#00FF00",this.view=r.PeerView(this),this.lastMessageDate=0,this.following=t.following||!1,h.peers[e]=this;var n=t.joined||!1;t.fromHelloMessage&&(this.updateFromHello(t.fromHelloMessage),"hello"==t.fromHelloMessage.type&&(n=!0)),i.emit("new-peer",this),n&&this.view.notifyJoined(),this.view.update()},repr:function(){return"Peer("+JSON.stringify(this.id)+")"},serialize:function(){return{id:this.id,status:this.status,idle:this.idle,url:this.url,hash:this.hash,title:this.title,identityId:this.identityId,rtcSupported:this.rtcSupported,name:this.name,avatar:this.avatar,color:this.color,following:this.following}},destroy:function(){this.view.destroy(),delete h.peers[this.id]},updateMessageDate:function(e){"inactive"==this.idle&&this.update({idle:"active"}),"bye"==this.status&&this.unbye(),this.lastMessageDate=Date.now()},updateFromHello:function(n){var o=!1,r=!1;n.url&&n.url!=this.url&&(this.url=n.url,this.hash=null,this.title=null,o=!0),n.hash!=this.hash&&(this.hash=n.urlHash,o=!0),n.title!=this.title&&(this.title=n.title,o=!0),void 0!==n.rtcSupported&&(this.rtcSupported=n.rtcSupported),void 0!==n.identityId&&(this.identityId=n.identityId),n.name&&n.name!=this.name&&(this.name=n.name,r=!0),n.avatar&&n.avatar!=this.avatar&&(e.assertValidUrl(n.avatar),this.avatar=n.avatar,r=!0),n.color&&n.color!=this.color&&(this.color=n.color,r=!0),void 0!==n.isClient&&(this.isCreator=!n.isClient),"live"!=this.status&&(this.status="live",i.emit("status-updated",this)),"active"!=this.idle&&(this.idle="active",i.emit("idle-updated",this)),n.rtcSupported&&i.emit("rtc-supported",this),o&&i.emit("url-updated",this),r&&i.emit("identity-updated",this),this.following&&t.emit("follow-peer",this)},update:function(e){e.idle&&(this.idle=e.idle),e.status&&(this.status=e.status),this.view.update()},className:function(t){return(t=t||"")+e.safeClassName(this.id)},bye:function(){"bye"!=this.status&&(this.status="bye",i.emit("status-updated",this)),this.view.update()},unbye:function(){"bye"==this.status&&(this.status="live",i.emit("status-updated",this)),this.view.update()},nudge:function(){t.send({type:"url-change-nudge",url:location.href,to:this.id})},follow:function(){this.following||(i.getAllPeers().forEach(function(e){e.following&&e.unfollow()}),this.following=!0,m(),this.view.update(),t.emit("follow-peer",this))},unfollow:function(){this.following=!1,m(),this.view.update()}});function d(e){e&&e.peers.forEach(function(e){h.deserialize(e)})}function f(){var e=i.getAllPeers(),t=Date.now();e.forEach(function(e){"active"==e.idle&&t-e.lastMessageDate>l&&e.update({idle:"inactive"}),"bye"!=e.status&&t-e.lastMessageDate>c&&e.bye()})}t.on("follow-peer",function(e){if(e.url!=t.currentUrl()){var n=e.url;e.urlHash&&(n+=e.urlHash),location.href=n}}),h.peers={},h.deserialize=function(e){e.fromStorage=!0;h(e.id,e)},i.Self=void 0,t.on("start",function(){i.Self||(i.Self=e.mixinEvents({isSelf:!0,id:t.clientId,identityId:t.identityId,status:"live",idle:"active",name:null,avatar:null,color:null,defaultName:null,loaded:!1,isCreator:!t.isClient,update:function(o){var r=!1,s=!1,a={type:"peer-update"};"string"==typeof o.name&&o.name!=this.name&&(this.name=o.name,a.name=this.name,o.fromLoad||(n.settings.set("name",this.name),r=!0)),o.avatar&&o.avatar!=this.avatar&&(e.assertValidUrl(o.avatar),this.avatar=o.avatar,a.avatar=this.avatar,o.fromLoad||(n.settings.set("avatar",this.avatar),r=!0)),o.color&&o.color!=this.color&&(this.color=o.color,a.color=this.color,o.fromLoad||(n.settings.set("color",this.color),r=!0)),o.defaultName&&o.defaultName!=this.defaultName&&(this.defaultName=o.defaultName,o.fromLoad||(n.settings.set("defaultName",this.defaultName),r=!0)),o.status&&o.status!=this.status&&(this.status=o.status,i.emit("status-updated",this)),o.idle&&o.idle!=this.idle&&(this.idle=o.idle,s=!0,i.emit("idle-updated",this)),this.view.update(),r&&!o.fromLoad&&(t.emit("self-updated"),t.send(a)),s&&!o.fromLoad&&t.send({type:"idle-status",idle:this.idle})},className:function(e){return(e=e||"")+"self"},_loadFromSettings:function(){return e.resolveMany(n.settings.get("name"),n.settings.get("avatar"),n.settings.get("defaultName"),n.settings.get("color")).then(function(t,o,r,s){if(r||(r=e.pickRandom(u),n.settings.set("defaultName",r)),!s){for(s=Math.floor(16777215*Math.random()).toString(16);s.length<6;)s="0"+s;s="#"+s,n.settings.set("color",s)}o||(o=TogetherJS.baseUrl+"/lib/togetherjs/images/default-avatar.png"),this.update({name:t,avatar:o,defaultName:r,color:s,fromLoad:!0}),i._SelfLoaded.resolve()}.bind(this))},_loadFromApp:function(){var e,t,n,o=TogetherJS.config.get("getUserName"),r=TogetherJS.config.get("getUserColor"),i=TogetherJS.config.get("getUserAvatar");o&&(e="string"==typeof o?o:o())&&"string"!=typeof e&&(console.warn("Error in getUserName(): should return a string (got",e,")"),e=null),r&&(t="string"==typeof r?r:r())&&"string"!=typeof t&&(console.warn("Error in getUserColor(): should return a string (got",t,")"),t=null),i&&(n="string"==typeof i?i:i())&&"string"!=typeof n&&(console.warn("Error in getUserAvatar(): should return a string (got",n,")"),n=null),(e||t||n)&&this.update({name:e,color:t,avatar:n})}}),i.Self.view=r.PeerView(i.Self),n.tab.get("peerCache").then(d),i.Self._loadFromSettings().then(function(){i.Self._loadFromApp(),i.Self.view.update(),t.emit("self-updated")}))}),t.on("refresh-user-data",function(){i.Self&&i.Self._loadFromApp()}),TogetherJS.config.track("getUserName",TogetherJS.config.track("getUserColor",TogetherJS.config.track("getUserAvatar",function(){i.Self&&i.Self._loadFromApp()}))),i._SelfLoaded=e.Deferred(),i.getPeer=function(e,n){s(e);var o=h.peers[e];return e===t.clientId?i.Self:n&&!o?o=h(e,{fromHelloMessage:n}):(s(o,"No peer with id:",e),!n||"hello"!=n.type&&"hello-back"!=n.type&&"peer-update"!=n.type||(o.updateFromHello(n),o.view.update()),h.peers[e])},i.getAllPeers=function(t){var n=[];return e.forEachAttr(h.peers,function(e){t&&"live"!=e.status||n.push(e)}),n},t.hub.on("bye",function(e){i.getPeer(e.clientId).bye()});var p=null;t.on("start",function(){p&&(console.warn("Old peers checkActivityTask left over?"),clearTimeout(p)),p=setInterval(f,a)}),t.on("close",function(){e.forEachAttr(h.peers,function(e){e.destroy()}),n.tab.set("peerCache",void 0),clearTimeout(p),p=null});var g=null;function m(){var t;n.tab.set("peerCache",(t=[],e.forEachAttr(h.peers,function(e){t.push(e.serialize())}),{peers:t}))}return t.on("visibility-change",function(e){e?(g&&clearTimeout(g),g=setTimeout(function(){i.Self.update({idle:"inactive"})},12e4)):(g&&clearTimeout(g),"inactive"==i.Self.idle&&i.Self.update({idle:"active"}))}),t.hub.on("idle-status",function(e){e.peer.update({idle:e.idle})}),t.hub.on("ping",function(){t.send({type:"ping-back"})}),window.addEventListener("pagehide",function(){m()},!1),e.mixinEvents(i),e.testExpose({setIdleTime:function(e){l=e,a=e/2,TogetherJS.running&&(clearTimeout(p),p=setInterval(f,a))}}),e.testExpose({setByeTime:function(e){c=e,a=Math.min(a,e/2),TogetherJS.running&&(clearTimeout(p),p=setInterval(f,a))}}),i}),n("windowing",["jquery","util","peers","session"],function(e,t,n,o){var r=t.assert,i=t.Module("windowing"),s=e(window);i.show=function(t,n){t=e(t),(n=n||{}).bind=n.bind||t.attr("data-bind-to");var s=t.hasClass("togetherjs-notification"),h=t.hasClass("togetherjs-modal");n.bind&&(n.bind=e(n.bind)),i.hide(),t.stop(),t.show(),t.css({opacity:"1"}),n.bind&&(r(!h,"Binding does not currently work with modals"),l(t,n.bind)),s?t.slideIn():h||t.popinWindow(),h&&(c().show(),u.bind()),a=n.onClose||null,o.emit("display-window",t.attr("id"),t)};var a=null;function l(t,n){if(!e.browser.mobile){t=e(t),r(n.length,"Cannot find binding:",n.selector,"from:",t.selector);var o="right",i=n.offset();i.height=n.height(),i.width=n.width();var a=s.height();i.top-=s.scrollTop(),i.left-=s.scrollLeft();var l,c,u=t.height()+5,h=t.width()+20;if(l=i.left-11-h,c=i.top+i.height/2-u/2,c=Math.min(a-10-u,Math.max(10,c)),t.css({top:c+"px",left:l+"px"}),t.hasClass("togetherjs-window")){e("#togetherjs-window-pointer-right, #togetherjs-window-pointer-left").hide();var d=e("#togetherjs-window-pointer-"+o);d.show(),d.css({top:i.top+Math.floor(i.height/2)+"px",left:l+t.width()+9+"px"})}t.data("boundTo",n.selector||"#"+n.attr("id")),n.addClass("togetherjs-active")}}function c(){if(c.element)return c.element;var t=e("#togetherjs-modal-background");return r(t.length),c.element=t,t.click(function(){i.hide()}),t}o.on("resize",function(){var t=e(".togetherjs-modal:visible, .togetherjs-window:visible");if(t.length){var n=t.data("boundTo");n&&l(t,n=e(n))}}),i.hide=function(t){(t=(t=e(t=t||".togetherjs-window, .togetherjs-modal, .togetherjs-notification")).filter(":visible")).filter(":not(.togetherjs-notification)").hide(),c().hide();var n=[];t.each(function(t,o){o=e(o),n.push(o);var r=o.data("boundTo");r&&((r=e(r)).addClass("togetherjs-animated").addClass("togetherjs-color-pulse"),setTimeout(function(){r.removeClass("togetherjs-color-pulse").removeClass("togetherjs-animated")},1010),o.data("boundTo",null),r.removeClass("togetherjs-active"),o.hasClass("togetherjs-notification")&&o.fadeOut().promise().then(function(){this.hide()}))}),e("#togetherjs-window-pointer-right, #togetherjs-window-pointer-left").hide(),a&&(a(),a=null),n.length&&o.emit("hide-window",n)},i.showNotification=function(t,n){t=e(t),n=n||{},r(!1)},i.toggle=function(t){(t=e(t)).is(":visible")?i.hide(t):i.show(t)};var u={bind:function(){e(document).keydown(u.onKeydown)},unbind:function(){e(document).unbind("keydown",u.onKeydown)},onKeydown:function(e){27==e.which&&i.hide()}};return o.on("close",function(){u.unbind()}),o.on("new-element",function(t){t.find(".togetherjs-close, .togetherjs-dismiss").click(function(t){var n=e(t.target).closest(".togetherjs-window, .togetherjs-modal, .togetherjs-notification");return i.hide(n),t.stopPropagation(),!1})}),i}),n("templating",["jquery","util","peers","windowing","session"],function(e,t,n,o,r){var i=t.assert,s=t.Module("templating");return s.clone=function(t){var n=e(t="#togetherjs-template-"+t);return i(n.length,"No template found with id:",t),(n=n.clone()).attr("id",null),n},s.sub=function(n,o){var a=s.clone(n);if(o=o||{},t.forEachAttr(o,function(t,n){var o=a.find(".togetherjs-sub-"+n).removeClass("togetherjs-sub-"+n);o.length&&("string"==typeof t?o.text(t):t instanceof e?o.append(t):i(!1,"Unknown variable value type:",n,"=",t));var r=a.find(".togetherjs-if-"+n).removeClass("togetherjs-sub-"+n);t||r.hide(),r=a.find(".togetherjs-ifnot-"+n).removeClass("togetherjs-ifnot-"+n),t&&r.hide();var s="data-togetherjs-subattr-"+n;a.find("["+s+"]").each(function(n,o){i("string"==typeof t);var r=(o=e(o)).attr(s);o.attr(s,null),o.attr(r,t)})}),o.peer&&o.peer.view.setElement(a),o.date){var l=o.date;"number"==typeof l&&(l=new Date(l));var c=l.getHours(),u=l.getMinutes(),h=c+":";u<10&&(h+="0"),h+=u,a.find(".togetherjs-time").text(h)}return r.emit("new-element",a),a},s}),n("linkify",[],function(){return function(e){return e.jquery&&(e=e[0]),e.normalize(),function e(t){for(var n=t.childNodes.length,o=0;o<n;o++)t.childNodes[o].nodeType==document.ELEMENT_NODE&&e(t.childNodes[o]);var r=[];for(o=0;o<n;o++)t.childNodes[o].nodeType==document.TEXT_NODE&&r.push(t.childNodes[o]);r.forEach(function(n){if(n.nodeType==document.ELEMENT_NODE)e(n);else if(n.nodeType==document.TEXT_NODE)for(;;){var o=n.nodeValue,r=/\bhttps?:\/\/[a-z0-9\.\-_](:\d+)?[^ \n\t<>()\[\]]*/i.exec(o);if(!r)break;var i=document.createTextNode(o.substr(0,r.index));t.replaceChild(i,n);var s=document.createElement("a");s.setAttribute("target","_blank"),s.href=r[0],s.appendChild(document.createTextNode(r[0])),t.insertBefore(s,i.nextSibling);var a=document.createTextNode(o.substr(r.index+r[0].length));t.insertBefore(a,s.nextSibling),n=a}})}(e),e}}),function(e){var t=/^[\s,#]+/,o=/\s+$/,r=0,i=Math,s=i.round,a=i.min,l=i.max,c=i.random;function u(e,n){if("object"==typeof(e=e||"")&&e.hasOwnProperty("_tc_id"))return e;var c=function(e){var n={r:255,g:255,b:255},r=1,s=!1,c=!1;"string"==typeof e&&(e=function(e){e=e.replace(t,"").replace(o,"").toLowerCase();var n,r=!1;if(p[e])e=p[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0};if(n=T.rgb.exec(e))return{r:n[1],g:n[2],b:n[3]};if(n=T.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=T.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=T.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=T.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=T.hex6.exec(e))return{r:y(n[1]),g:y(n[2]),b:y(n[3]),format:r?"name":"hex"};if(n=T.hex3.exec(e))return{r:y(n[1]+""+n[1]),g:y(n[2]+""+n[2]),b:y(n[3]+""+n[3]),format:r?"name":"hex"};return!1}(e));"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(u=e.r,h=e.g,d=e.b,n={r:255*m(u,255),g:255*m(h,255),b:255*m(d,255)},s=!0,c="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=w(e.s),e.v=w(e.v),n=function(e,t,n){e=6*m(e,360),t=m(t,100),n=m(n,100);var o=i.floor(e),r=e-o,s=n*(1-t),a=n*(1-r*t),l=n*(1-(1-r)*t),c=o%6;return{r:255*[n,a,s,s,l,n][c],g:255*[l,n,n,a,s,s][c],b:255*[s,s,l,n,n,a][c]}}(e.h,e.s,e.v),s=!0,c="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=w(e.s),e.l=w(e.l),n=function(e,t,n){var o,r,i;function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=m(e,360),t=m(t,100),n=m(n,100),0===t)o=r=i=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=s(l,a,e+1/3),r=s(l,a,e),i=s(l,a,e-1/3)}return{r:255*o,g:255*r,b:255*i}}(e.h,e.s,e.l),s=!0,c="hsl"),e.hasOwnProperty("a")&&(r=e.a));var u,h,d;r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1);return{ok:s,format:e.format||c,r:a(255,l(n.r,0)),g:a(255,l(n.g,0)),b:a(255,l(n.b,0)),a:r}}(e),v=c.r,j=c.g,x=c.b,k=c.a,C=s(100*k)/100,S=c.format;return v<1&&(v=s(v)),j<1&&(j=s(j)),x<1&&(x=s(x)),{ok:c.ok,format:S,_tc_id:r++,alpha:k,toHsv:function(){var e=d(v,j,x);return{h:360*e.h,s:e.s,v:e.v,a:k}},toHsvString:function(){var e=d(v,j,x),t=s(360*e.h),n=s(100*e.s),o=s(100*e.v);return 1==k?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+C+")"},toHsl:function(){var e=h(v,j,x);return{h:360*e.h,s:e.s,l:e.l,a:k}},toHslString:function(){var e=h(v,j,x),t=s(360*e.h),n=s(100*e.s),o=s(100*e.l);return 1==k?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+C+")"},toHex:function(){return f(v,j,x)},toHexString:function(){return"#"+f(v,j,x)},toRgb:function(){return{r:s(v),g:s(j),b:s(x),a:k}},toRgbString:function(){return 1==k?"rgb("+s(v)+", "+s(j)+", "+s(x)+")":"rgba("+s(v)+", "+s(j)+", "+s(x)+", "+C+")"},toPercentageRgb:function(){return{r:s(100*m(v,255))+"%",g:s(100*m(j,255))+"%",b:s(100*m(x,255))+"%",a:k}},toPercentageRgbString:function(){return 1==k?"rgb("+s(100*m(v,255))+"%, "+s(100*m(j,255))+"%, "+s(100*m(x,255))+"%)":"rgba("+s(100*m(v,255))+"%, "+s(100*m(j,255))+"%, "+s(100*m(x,255))+"%, "+C+")"},toName:function(){return g[f(v,j,x)]||!1},toFilter:function(){var e=f(v,j,x),t=e,o=Math.round(255*parseFloat(k)).toString(16),r=o,i=n&&n.gradientType?"GradientType = 1, ":"";if(secondColor){var s=u(secondColor);t=s.toHex(),r=Math.round(255*parseFloat(s.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr=#"+b(o)+e+",endColorstr=#"+b(r)+t+")"},toString:function(e){var t=!1;return"rgb"===(e=e||this.format)&&(t=this.toRgbString()),"prgb"===e&&(t=this.toPercentageRgbString()),"hex"===e&&(t=this.toHexString()),"name"===e&&(t=this.toName()),"hsl"===e&&(t=this.toHslString()),"hsv"===e&&(t=this.toHsvString()),t||this.toHexString()}}}function h(e,t,n){e=m(e,255),t=m(t,255),n=m(n,255);var o,r,i=l(e,t,n),s=a(e,t,n),c=(i+s)/2;if(i==s)o=r=0;else{var u=i-s;switch(r=c>.5?u/(2-i-s):u/(i+s),i){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return{h:o,s:r,l:c}}function d(e,t,n){e=m(e,255),t=m(t,255),n=m(n,255);var o,r,i=l(e,t,n),s=a(e,t,n),c=i,u=i-s;if(r=0===i?0:u/i,i==s)o=0;else{switch(i){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return{h:o,s:r,v:c}}function f(e,t,n){var o=[b(s(e).toString(16)),b(s(t).toString(16)),b(s(n).toString(16))];return o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}u.fromRatio=function(e){if("object"==typeof e){var t={};for(var n in e)t[n]=w(e[n]);e=t}return u(e)},u.equals=function(e,t){return!(!e||!t)&&u(e).toRgbString()==u(t).toRgbString()},u.random=function(){return u.fromRatio({r:c(),g:c(),b:c()})},u.desaturate=function(e,t){var n=u(e).toHsl();return n.s-=(t||10)/100,n.s=v(n.s),u(n)},u.saturate=function(e,t){var n=u(e).toHsl();return n.s+=(t||10)/100,n.s=v(n.s),u(n)},u.greyscale=function(e){return u.desaturate(e,100)},u.lighten=function(e,t){var n=u(e).toHsl();return n.l+=(t||10)/100,n.l=v(n.l),u(n)},u.darken=function(e,t){var n=u(e).toHsl();return n.l-=(t||10)/100,n.l=v(n.l),u(n)},u.complement=function(e){var t=u(e).toHsl();return t.h=(t.h+180)%360,u(t)},u.triad=function(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+120)%360,s:t.s,l:t.l}),u({h:(n+240)%360,s:t.s,l:t.l})]},u.tetrad=function(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+90)%360,s:t.s,l:t.l}),u({h:(n+180)%360,s:t.s,l:t.l}),u({h:(n+270)%360,s:t.s,l:t.l})]},u.splitcomplement=function(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+72)%360,s:t.s,l:t.l}),u({h:(n+216)%360,s:t.s,l:t.l})]},u.analogous=function(e,t,n){t=t||6,n=n||30;var o=u(e).toHsl(),r=360/n,i=[u(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,i.push(u(o));return i},u.monochromatic=function(e,t){t=t||6;for(var n=u(e).toHsv(),o=n.h,r=n.s,i=n.v,s=[],a=1/t;t--;)s.push(u({h:o,s:r,v:i})),i=(i+a)%1;return s},u.readability=function(e,t){var n=u(e).toRgb(),o=u(t).toRgb(),r=(299*n.r+587*n.g+114*n.b)/1e3,i=(299*o.r+587*o.g+114*o.b)/1e3,s=Math.max(n.r,o.r)-Math.min(n.r,o.r)+Math.max(n.g,o.g)-Math.min(n.g,o.g)+Math.max(n.b,o.b)-Math.min(n.b,o.b);return{brightness:Math.abs(r-i),color:s}},u.readable=function(e,t){var n=u.readability(e,t);return n.brightness>125&&n.color>500},u.mostReadable=function(e,t){for(var n,o=0,r=!1,i=0;i<t.length;i++){var s=u.readability(e,t[i]),a=s.brightness>125&&s.color>500,l=s.brightness/125*3+s.color/500;(a&&!r||a&&r&&l>o||!a&&!r&&l>o)&&(r=a,o=l,n=t[i])}return n};var p=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},g=u.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(p);function m(e,t){var n;"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var o,r="string"==typeof(o=e)&&-1!=o.indexOf("%");return e=a(t,l(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function v(e){return a(1,l(0,e))}function y(e){return parseInt(e,16)}function b(e){return 1==e.length?"0"+e:""+e}function w(e){return e<=1&&(e=100*e+"%"),e}var j,x,k,T=(x="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",k="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{rgb:new RegExp("rgb"+x),rgba:new RegExp("rgba"+k),hsl:new RegExp("hsl"+x),hsla:new RegExp("hsla"+k),hsv:new RegExp("hsv"+x),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});"undefined"!=typeof module&&module.exports?module.exports=u:void 0!==n?n("tinycolor",[],function(){return u}):e.tinycolor=u}(this),n("elementFinder",["util","jquery"],function(e,t){var n=e.Module("elementFinder"),o=e.assert;return n.ignoreElement=function(e){for(e instanceof t&&(e=e[0]);e;){if(t(e).hasClass("togetherjs"))return!0;e=e.parentNode}return!1},n.elementLocation=function e(n){if(o(null!==n,"Got null element"),n instanceof t&&(n=n[0]),n[0]&&n.attr&&1==n[0].nodeType&&(n=n[0]),n.id)return"#"+n.id;if("BODY"==n.tagName)return"body";if("HEAD"==n.tagName)return"head";if(n===document)return"document";var r=n.parentNode;if(!r||r==n)throw console.warn("elementLocation(",n,") has null parent"),new Error("No locatable parent found");for(var i=e(r),s=r.childNodes,a=s.length,l=0,c=0;c<a&&s[c]!=n;c++)if(s[c].nodeType==document.ELEMENT_NODE){if(-1!=s[c].className.indexOf("togetherjs"))continue;l++}return i+":nth-child("+(l+1)+")"},n.CannotFind=e.Class({constructor:function(e,t,n){this.prefix="",this.location=e,this.reason=t,this.context=n},toString:function(){var e;try{e=n.elementLocation(this.context)}catch(t){e=this.context}return"[CannotFind "+this.prefix+"("+this.location+"): "+this.reason+" in "+e+"]"}}),n.findElement=function e(t,o){var r,i;if(o=o||document,"body"===t)return document.body;if("head"===t)return document.head;if("document"===t)return document;if(0===t.indexOf("body")){r=document.body;try{return e(t.substr("body".length),r)}catch(e){throw e instanceof n.CannotFind&&(e.prefix="body"+e.prefix),e}}else if(0===t.indexOf("head")){r=document.head;try{return e(t.substr("head".length),r)}catch(e){throw e instanceof n.CannotFind&&(e.prefix="head"+e.prefix),e}}else if(0===t.indexOf("#")){var s;if(-1===(t=t.substr(1)).indexOf(":")?(s=t,i=""):(s=t.substr(0,t.indexOf(":")),i=t.substr(t.indexOf(":"))),!(r=document.getElementById(s)))throw n.CannotFind("#"+s,"No element by that id",o);if(!i)return r;try{return e(i,r)}catch(e){throw e instanceof n.CannotFind&&(e.prefix="#"+s+e.prefix),e}}else{if(0!==t.indexOf(":nth-child("))throw n.CannotFind(t,"Malformed location",o);if(-1==(t=t.substr(":nth-child(".length)).indexOf(")"))throw"Invalid location, missing ): "+t;var a=t.substr(0,t.indexOf(")")),l=a=parseInt(a,10);t=t.substr(t.indexOf(")")+1);var c=o.childNodes;r=null;for(var u=0;u<c.length;u++){var h=c[u];if(h.nodeType==document.ELEMENT_NODE){if(-1!=h.className.indexOf("togetherjs"))continue;if(0===--l){r=h;break}}}if(!r)throw n.CannotFind(":nth-child("+a+")","container only has "+(a-l)+" elements",o);if(!t)return r;try{return n.findElement(t,r)}catch(e){throw e instanceof n.CannotFind&&(e.prefix=":nth-child("+a+")"+e.prefix),e}}},n.elementByPixel=function(e){return function e(o,r){var i=null,s=o.children();return s.each(function(){var e=t(this);if(!e.hasClass("togetherjs")&&"fixed"!=e.css("position")&&e.is(":visible"))return!(e.offset().top>r)&&void(i=e)}),s.length&&i?e(i,r):{location:n.elementLocation(o[0]),offset:r-o.offset().top,absoluteTop:r,documentHeight:t(document).height()}}(t(document.body),e)},n.pixelForPosition=function(e){if("body"==e.location)return e.offset;var o;try{o=n.findElement(e.location)}catch(o){if(o instanceof n.CannotFind&&e.absoluteTop){var r=e.absoluteTop/e.documentHeight;return t(document).height()*r}throw o}return t(o).offset().top+e.offset},n}),n("visibilityApi",["util","session"],function(e,t){var n,o,r=e.Module("visibilityApi");function i(){t.emit("visibility-change",document[n])}return void 0!==document.hidden?(n="hidden",o="visibilitychange"):void 0!==document.mozHidden?(n="mozHidden",o="mozvisibilitychange"):void 0!==document.msHidden?(n="msHidden",o="msvisibilitychange"):void 0!==document.webkitHidden&&(n="webkitHidden",o="webkitvisibilitychange"),t.on("start",function(){document.addEventListener(o,i,!1)}),t.on("close",function(){document.removeEventListener(o,i,!1)}),r.hidden=function(){return document[n]},r}),n("ui",["require","jquery","util","session","templates","templating","linkify","peers","windowing","tinycolor","elementFinder","visibilityApi"],function(e,t,n,o,r,i,s,a,l,c,u,h){var d,f=n.Module("ui"),p=n.assert,g=n.AssertionError,m=t(window),v=61,y=null,b=["#8A2BE2","#7FFF00","#DC143C","#00FFFF","#8FBC8F","#FF8C00","#FF00FF","#FFD700","#F08080","#90EE90","#FF6347"];e(["chat"],function(e){d=e}),f.displayToggle=function(e){e=t(e),p(e.length,"No element",arguments[0]);var n=t(e.attr("data-toggles"));p(n.length,"Cannot toggle",e[0],"selector",n.selector),n.hide(),e.show()},f.container=null;var w=null;function j(e){return function(){f.container&&e.apply(this,arguments);var t=this,n=Array.prototype.slice.call(arguments);o.once("ui-ready",function(){e.apply(t,n)})}}function x(){var e=t("#togetherjs-menu:visible");if(e.length){var n=t("#togetherjs-profile-button"),o=n.offset();e.css({top:o.top+n.height()-m.scrollTop()+"px",left:o.left+n.width()-10-e.width()-m.scrollLeft()+"px"})}}function k(){var e=t("#togetherjs-pick-color:visible");if(e.length){var n=t("#togetherjs-menu-update-color"),o=n.offset();e.css({top:o.top+n.height(),left:o.left})}}function T(){t("#togetherjs-menu").hide(),t(document).unbind("click",C),f.displayToggle("#togetherjs-self-name-display"),t("#togetherjs-pick-color").hide()}function C(e){for(var t=e.target;t;){if("togetherjs-menu"==t.id)return;t=t.parentNode}T()}function S(e){p("number"==typeof e),p(e&&Math.floor(e)==e);var n=t("#togetherjs-dock"),o=n.height()+v*e;p(o>=3*v,"Height went too low (",o,"), should never be less than 3 buttons high (",3*v,")"),n.css({height:o+"px"})}function E(){var e=t("input.togetherjs-share-link"),n=t("a.togetherjs-share-link"),r=t("#togetherjs-session-id");o.shareId?(e.val(o.shareUrl()),n.attr("href",o.shareUrl()),r.text(o.shareId)):(e.val(""),n.attr("href","#"),r.text("(none)"))}function A(){var e=TogetherJS.config.get("inviteFromRoom");return p(e),n.makeUrlAbsolute(e,o.hubUrl())}f.prepareUI=function(){if("complete"!=document.readyState&&"interactive"!=document.readyState)return w="deferring",void document.addEventListener("DOMContentLoaded",function(){var e=w;w=null,f.prepareUI(),"activate"==e&&f.activateUI()});var e=f.container=t(r.interface);if(p(e.length),t("body").append(e),e.find(".togetherjs-person").each(function(){var e=t(this),n=e.find(".togetherjs-person-avatar-swatch");n.length||e.append('<div class="togetherjs-person-avatar-swatch"></div>')}),o.firstRun&&TogetherJS.startTarget){y=Date.now()+300+50,setTimeout(function(){y=Date.now()+300+40;var n=e.find("#togetherjs-dock"),o=n.offset(),r=t(TogetherJS.startTarget).offset();r.top=Math.floor(r.top-o.top),r.left=Math.floor(r.left-o.left);var i="translate("+r.left+"px, "+r.top+"px)";n.css({MozTransform:i,WebkitTransform:i,transform:i,opacity:"0.0"}),setTimeout(function(){y=Date.now()+300+20;var e="transform 0.3s ease-out, ";e+="opacity 0.3s ease-out",n.css({opacity:"1.0",MozTransition:"-moz-"+e,MozTransform:"translate(0, 0)",WebkitTransition:"-webkit-"+e,WebkitTransform:"translate(0, 0)",transition:e,transform:"translate(0, 0)"}),setTimeout(function(){y=null,n.attr("style","")},510)},5)},5)}if(TogetherJS.startTarget){var n=t(TogetherJS.startTarget),i=n.text().toLowerCase().replace(/\s+/g," ");"start togetherjs"==(i=i.replace(/^\s*/,"").replace(/\s*$/,""))&&n.attr("data-end-togetherjs-html","ÐÐ°ÐºÑÑÑÑ TogetherJS"),n.attr("data-end-togetherjs-html")&&(n.attr("data-start-togetherjs-html",n.html()),n.html(n.attr("data-end-togetherjs-html"))),n.addClass("togetherjs-started")}f.container.find(".togetherjs-window > header, .togetherjs-modal > header").each(function(){t(this).append(t('<button class="togetherjs-close"></button>'))}),TogetherJS.config.track("disableWebRTC",function(e,t){e&&!t?(f.container.find("#togetherjs-audio-button").hide(),S(-1)):!e&&t&&(f.container.find("#togetherjs-audio-button").show(),S(1))})},f.activateUI=function(){if(w)return console.warn("ui.activateUI called before document is ready; waiting..."),void(w="activate");f.container||f.prepareUI();var r=f.container;t.browser.mobile,f.prepareShareLink(r),r.find("input.togetherjs-share-link").on("keydown",function(e){if(27==e.which)return l.hide("#togetherjs-share"),!1}),o.on("shareId",E);var s=r.find("#togetherjs-chat-input");function u(){var e=s.val();t.trim(e)&&(s.val(""),s.trigger("input").trigger("propertychange"),d.submit(e))}s.bind("keydown",function(e){return 13!=e.which||e.shiftKey?27==e.which?(l.hide("#togetherjs-chat"),!1):void 0:(u(),!1)}),s.on("input propertychange",function(){var e=t(this),n=e.height();e.height(20),this.scrollTop=0,this.scrollTop=9999;var o=this.scrollTop+e.height();o>100?(o=100,this.style.overflowY="scroll"):this.style.overflowY="hidden",this.style.height=o+"px";var r=o-n;return t("#togetherjs-chat-input-box").height(t("#togetherjs-chat-input-box").height()+r),t("#togetherjs-chat-messages").height(t("#togetherjs-chat-messages").height()-r),!1}),n.testExpose({submitChat:u});var h=r.find("#togetherjs-dock-anchor");if(p(h.length),(h=r.find("#togetherjs-dock-anchor-disabled")).mousedown(function(e){var n=t("#togetherjs-dock"),o=function(){var e=t("#togetherjs-dock");if(e.hasClass("togetherjs-dock-right"))return"right";if(e.hasClass("togetherjs-dock-left"))return"left";if(e.hasClass("togetherjs-dock-bottom"))return"bottom";throw new g("#togetherjs-dock doesn't have positioning class")}();function r(){return!1}function i(e){var t,r=m.width()+window.pageXOffset-e.pageX,i=e.pageX-window.pageXOffset;m.height(),window.pageYOffset,e.pageY;t=i<r&&i<1e4?"left":r<i&&r<1e4?"right":"bottom",n.removeClass("togetherjs-dock-left"),n.removeClass("togetherjs-dock-right"),n.removeClass("togetherjs-dock-bottom"),n.addClass("togetherjs-dock-"+t),o&&t!=o&&(l.hide(),o=null)}return t(document).bind("mousemove",i),t(document).bind("selectstart",r),t(document).one("mouseup",function(){t(document).unbind("mousemove",i),t(document).unbind("selectstart",r)}),!1}),t.browser.mobile){t("#togetherjs-audio-button").click(function(){l.toggle("#togetherjs-rtc-not-supported")}),t("#togetherjs-profile-button").click(function(){l.toggle("#togetherjs-menu-window")});t("#togetherjs-dock-anchor #togetherjs-dock-anchor-horizontal img").attr("src","/lib/togetherjs/images/togetherjs-logo-close.png"),t("#togetherjs-dock-anchor").toggle(function(){t("body").css({position:"",top:"",left:""}),t("#togetherjs-dock-anchor #togetherjs-dock-anchor-horizontal img").attr("src","lib/togetherjs/images/togetherjs-logo-open.png"),t(".togetherjs-window").animate({opacity:0}),t("#togetherjs-dock-participants").animate({opacity:0}),t("#togetherjs-dock #togetherjs-buttons").animate({opacity:0}),t(".togetherjs-dock-right").animate({width:"40px"},{duration:60,easing:"linear"})},function(){t(".togetherjs-window").animate({opacity:1}),t("#togetherjs-dock-participants").animate({opacity:1}),t("#togetherjs-dock #togetherjs-buttons").animate({opacity:1}),t(window).width()<480?t(".togetherjs-dock-right").animate({width:"204px"},{duration:60,easing:"linear"}):t(".togetherjs-dock-right").animate({width:"27%"},{duration:60,easing:"linear"}),t("#togetherjs-dock-anchor #togetherjs-dock-anchor-horizontal img").attr("src","/lib/togetherjs/images/togetherjs-logo-close.png")})}t("#togetherjs-share-button").click(function(){l.toggle("#togetherjs-share")}),t("#togetherjs-profile-button").click(function(e){return t.browser.mobile?(l.show("#togetherjs-menu-window"),!1):(t("#togetherjs-menu").is(":visible")?T():(n=t("#togetherjs-menu"),p(n.length),n.show(),x(),t(document).bind("click",C)),e.stopPropagation(),!1);var n}),t("#togetherjs-menu-feedback, #togetherjs-menu-feedback-button").click(function(){l.hide(),T(),l.show("#togetherjs-feedback-form")}),t("#togetherjs-menu-help, #togetherjs-menu-help-button").click(function(){l.hide(),T(),e(["walkthrough"],function(e){l.hide(),e.start(!1)})}),t("#togetherjs-menu-update-name").click(function(){t("#togetherjs-menu .togetherjs-self-name").css({width:t("#togetherjs-menu").width()-32+"px"}),f.displayToggle("#togetherjs-menu .togetherjs-self-name"),t("#togetherjs-menu .togetherjs-self-name").focus()}),t("#togetherjs-menu-update-name-button").click(function(){l.show("#togetherjs-edit-name-window"),t("#togetherjs-edit-name-window input").focus()}),t("#togetherjs-menu .togetherjs-self-name").bind("keyup change",function(e){if(console.log("alrighty",e),13!=e.which){var n=t("#togetherjs-menu .togetherjs-self-name").val();console.log("values!!",n),n&&a.Self.update({name:n})}else f.displayToggle("#togetherjs-self-name-display")}),t("#togetherjs-menu-update-avatar, #togetherjs-menu-update-avatar-button").click(function(){T(),l.show("#togetherjs-avatar-edit")}),t("#togetherjs-menu-end, #togetherjs-menu-end-button").click(function(){T(),l.show("#togetherjs-confirm-end")}),t("#togetherjs-end-session").click(function(){o.close()}),t("#togetherjs-menu-update-color").click(function(){var e=t("#togetherjs-pick-color");e.is(":visible")?e.hide():(e.show(),k(),e.find(".togetherjs-swatch-active").removeClass("togetherjs-swatch-active"),e.find('.togetherjs-swatch[data-color="'+a.Self.color+'"]').addClass("togetherjs-swatch-active"))}),t("#togetherjs-pick-color").click(".togetherjs-swatch",function(e){var n=t(e.target).attr("data-color");return a.Self.update({color:n}),e.stopPropagation(),!1}),t("#togetherjs-pick-color").click(function(e){return t("#togetherjs-pick-color").hide(),e.stopPropagation(),!1}),b.forEach(function(e){var n=i.sub("swatch");n.attr("data-color",e);var o=c.darken(e);n.css({backgroundColor:e,borderColor:o}),t("#togetherjs-pick-color").append(n)}),t("#togetherjs-chat-button").click(function(){l.toggle("#togetherjs-chat")}),o.on("display-window",function(e,n){if("togetherjs-chat"==e)t.browser.mobile||t("#togetherjs-chat-input").focus();else if("togetherjs-share"==e){var o=n.find("input.togetherjs-share-link");o.is(":visible")&&o.focus().select()}}),r.find("#togetherjs-chat-notifier").click(function(e){t(e.target).is("a")||r.is(".togetherjs-close")||l.show("#togetherjs-chat")}),t(".togetherjs header.togetherjs-title").each(function(e,n){var o=t('<button class="togetherjs-minimize"></button>');o.click(function(e){var t=o.closest(".togetherjs-window");l.hide(t)}),t(n).append(o)}),t("#togetherjs-avatar-done").click(function(){f.displayToggle("#togetherjs-no-avatar-edit")}),t("#togetherjs-self-color").css({backgroundColor:a.Self.color});var v=a.Self.avatar;v&&t("#togetherjs-self-avatar").attr("src",v);var j=t("#togetherjs-starter button");j.click(function(){l.show("#togetherjs-about")}).addClass("togetherjs-running"),"Start TogetherJS"==j.text()&&(j.attr("data-start-text",j.text()),j.text("End TogetherJS Session")),f.activateAvatarEdit(r,{onSave:function(){l.hide("#togetherjs-avatar-edit")}}),TogetherJS.config.track("inviteFromRoom",function(e,t){e?r.find("#togetherjs-invite").show():r.find("#togetherjs-invite").hide()}),r.find("#togetherjs-menu-refresh-invite").click(_),r.find("#togetherjs-menu-invite-anyone").click(function(){N(null)}),o.emit("new-element",f.container),y&&y>Date.now()?setTimeout(function(){y=null,o.emit("ui-ready",f)},y-Date.now()):o.emit("ui-ready",f)},f.activateAvatarEdit=function(e,r){r=r||{};var i=null;e.find(".togetherjs-avatar-save").prop("disabled",!0),e.find(".togetherjs-avatar-save").click(function(){i&&(a.Self.update({avatar:i}),e.find(".togetherjs-avatar-save").prop("disabled",!0),r.onSave&&r.onSave())}),e.find(".togetherjs-upload-avatar").on("change",function(){n.readFileImage(this).then(function(s){var a;(a=s,n.Deferred(function(e){var n=t("<canvas>");n[0].height=o.AVATAR_SIZE,n[0].width=o.AVATAR_SIZE;var r=n[0].getContext("2d"),i=new Image;i.src=a,setTimeout(function(){var t=i.naturalWidth||i.width,s=i.naturalHeight||i.height;t*=o.AVATAR_SIZE/s,s=o.AVATAR_SIZE,r.drawImage(i,0,0,t,s),e.resolve(n[0].toDataURL("image/png"))})})).then(function(t){i=t,e.find(".togetherjs-avatar-preview").css({backgroundImage:"url("+i+")"}),e.find(".togetherjs-avatar-save").prop("disabled",!1),r.onPending&&r.onPending()})})})},f.prepareShareLink=function(e){e.find("input.togetherjs-share-link").click(function(){t(this).select()}).change(function(){E()}),e.find("a.togetherjs-share-link").click(function(){return!1}),E()},o.on("resize",function(){x(),k()}),o.on("close",function(){t.browser.mobile&&t("body").css({position:"",top:"",left:""}),f.container&&(f.container.remove(),f.container=null),t(".togetherjs").remove();var e=t("#togetherjs-starter button");if(e.removeClass("togetherjs-running"),e.attr("data-start-text")&&(e.text(e.attr("data-start-text")),e.attr("data-start-text","")),TogetherJS.startTarget){var n=t(TogetherJS.startTarget);n.attr("data-start-togetherjs-html")&&n.html(n.attr("data-start-togetherjs-html")),n.removeClass("togetherjs-started")}}),f.chat={text:function(e){p("string"==typeof e.text),p(e.peer),p(e.messageId);var n=e.date||Date.now(),o=f.container.find("#togetherjs-chat .togetherjs-chat-message");o.length&&(o=t(o[o.length-1]));var r=null;if(o&&(r=parseInt(o.attr("data-date"),10)),o&&o.attr("data-person")==e.peer.id&&r&&n<r+5e3){o.attr("data-date",n);var a=o.find(".togetherjs-chat-content");p(a.length),e.text=a.text()+"\n"+e.text,e.messageId=o.attr("data-message-id"),o.remove()}var l=i.sub("chat-message",{peer:e.peer,content:e.text,date:n});s(l.find(".togetherjs-chat-content")),l.attr("data-person",e.peer.id).attr("data-date",n).attr("data-message-id",e.messageId),f.chat.add(l,e.messageId,e.notify)},joinedSession:function(e){p(e.peer);var t=e.date||Date.now(),n=i.sub("chat-joined",{peer:e.peer,date:t});f.chat.add(n,e.peer.className("join-message-"),4e3)},leftSession:function(e){p(e.peer);var t=e.date||Date.now(),n=i.sub("chat-left",{peer:e.peer,date:t,declinedJoin:e.declinedJoin});f.chat.add(n,e.peer.className("join-message-"),4e3)},system:function(e){p(!e.peer),p("string"==typeof e.text);var t=e.date||Date.now(),n=i.sub("chat-system",{content:e.text,date:t});f.chat.add(n,void 0,!0)},clear:j(function(){f.container.find("#togetherjs-chat-messages").empty()}),urlChange:function(e){p(e.peer),p("string"==typeof e.url),p("boolean"==typeof e.sameUrl);var n,o=e.peer.className("url-change-"),r="togetherjs-chat-"+o,s=e.date||Date.now();n=e.title?e.title+" ("+e.url+")":e.url;var a=i.sub("url-change",{peer:e.peer,date:s,href:e.url,title:n,sameUrl:e.sameUrl});a.find(".togetherjs-nudge").click(function(){return e.peer.nudge(),!1}),a.find(".togetherjs-follow").click(function(){var t=e.peer.url;e.peer.urlHash&&(t+=e.peer.urlHash),location.href=t});var l=!e.sameUrl;e.sameUrl&&!t("#"+r).length||f.chat.add(a,o,l)},invite:function(e){p(e.peer),p("string"==typeof e.url);var t=e.peer.className("invite-"),n=e.date||Date.now(),o=e.url.replace(/\#?&togetherjs=.*/,"").replace(/^\w+:\/\//,""),r=i.sub("invite",{peer:e.peer,date:n,href:e.url,hrefTitle:o,forEveryone:e.forEveryone});e.forEveryone&&r.find("a").click(function(){d.submit("Followed link to "+e.url)}),f.chat.add(r,t,!0)},hideTimeout:null,add:j(function(e,t,o){t&&e.attr("id","togetherjs-chat-"+n.safeClassName(t));var r=f.container.find("#togetherjs-chat-messages");p(r.length);var i=f.container.find("#togetherjs-chat-notifier");r.append(e),f.chat.scroll();var s=!!o,a=i.find("#togetherjs-chat-notifier-message");o&&h.hidden()&&f.container.find("#togetherjs-notification")[0].play(),t&&a.data("message-id")==t&&(s=!0),r.is(":visible")&&(s=!1),s&&(a.empty(),a.append(e.clone(!0,!0)),a.data("message-id")!=t?(a.data("message-id",t||""),l.show(i)):i.is(":visible")||l.show(i),"number"==typeof o&&(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),this.hideTimeout=setTimeout(function(){l.hide(i),this.hideTimeout=null}.bind(this),o)))}),scroll:j(function(){var e=f.container.find("#togetherjs-chat-messages")[0];e.scrollTop=e.scrollHeight})},o.on("display-window",function(e,t){"togetherjs-chat"==e&&(f.chat.scroll(),l.hide("#togetherjs-chat-notifier"))}),f.PeerView=n.Class({constructor:function(e){p(void 0!==e.isSelf,"PeerView instantiated with non-Peer object"),this.peer=e,this.dockClick=this.dockClick.bind(this)},setElement:function(e){var t=0;["togetherjs-person","togetherjs-person-status","togetherjs-person-name","togetherjs-person-name-abbrev","togetherjs-person-bgcolor","togetherjs-person-swatch","togetherjs-person-status","togetherjs-person-role","togetherjs-person-url","togetherjs-person-url-title","togetherjs-person-bordercolor"].forEach(function(n){var o=e.find("."+n);o.addClass(this.peer.className(n+"-")),t+=o.length},this),t||console.warn("setElement(",e,") doesn't contain any person items"),this.updateDisplay(e)},updateDisplay:j(function(e){e=e||f.container;var r=this.peer.name;this.peer.isSelf&&(r="ÐÑ"),e.find("."+this.peer.className("togetherjs-person-name-")).text(this.peer.name||""),e.find("."+this.peer.className("togetherjs-person-name-abbrev-")).text(r);var i=e.find("."+this.peer.className("togetherjs-person-"));if(this.peer.avatar&&(n.assertValidUrl(this.peer.avatar),i.css({backgroundImage:"url("+this.peer.avatar+")"})),"inactive"==this.peer.idle?i.addClass("togetherjs-person-inactive"):i.removeClass("togetherjs-person-inactive"),i.attr("title",this.peer.name),this.peer.color&&(i.css({borderColor:this.peer.color}),i.find(".togetherjs-person-avatar-swatch").css({borderTopColor:this.peer.color,borderRightColor:this.peer.color})),this.peer.color){var s=e.find("."+this.peer.className("togetherjs-person-bgcolor-"));s.css({backgroundColor:this.peer.color}),(s=e.find("."+this.peer.className("togetherjs-person-bordercolor-"))).css({borderColor:this.peer.color})}e.find("."+this.peer.className("togetherjs-person-role-")).text(this.peer.isCreator?"CÐ¾Ð·Ð´Ð°ÑÐµÐ»Ñ":"Ð£ÑÐ°ÑÑÐ½Ð¸Ðº");var l=this.peer.title||"";this.peer.title&&(l+=" ("),l+=n.truncateCommonDomain(this.peer.url,location.href),this.peer.title&&(l+=")"),e.find("."+this.peer.className("togetherjs-person-url-title-")).text(l);var c,u=this.peer.url;(this.peer.urlHash&&(u+=this.peer.urlHash),e.find("."+this.peer.className("togetherjs-person-url-")).attr("href",u),e.find("."+this.peer.className("togetherjs-person-status-")).text("active"==this.peer.idle?"ÐÐºÑÐ¸Ð²ÐµÐ½":"ÐÐµ Ð°ÐºÑÐ¸Ð²ÐµÐ½"),this.peer.isSelf)&&(t(".togetherjs-self-name").each(function(e,n){(n=t(n)).val()!=this.peer.name&&n.val(this.peer.name)}.bind(this)),t("#togetherjs-menu-avatar").attr("src",this.peer.avatar),this.peer.name||t("#togetherjs-menu .togetherjs-person-name-self").text(this.peer.defaultName));this.peer.url!=o.currentUrl()?e.find("."+this.peer.className("togetherjs-person-")).addClass("togetherjs-person-other-url"):e.find("."+this.peer.className("togetherjs-person-")).removeClass("togetherjs-person-other-url"),this.peer.following?this.followCheckbox&&this.followCheckbox.prop("checked",!0):this.followCheckbox&&this.followCheckbox.prop("checked",!1),(c=a.getAllPeers(!0)).length?(f.displayToggle("#togetherjs-chat-participants"),t("#togetherjs-chat-participant-list").text(c.map(function(e){return e.name}).join(", "))):f.displayToggle("#togetherjs-chat-no-participants"),this.updateFollow()}),update:function(){this.peer.isSelf||("live"==this.peer.status?this.dock():this.undock()),this.updateDisplay(),this.updateUrlDisplay()},updateUrlDisplay:function(e){var t=this.peer.url;if(t&&(t!=this._lastUpdateUrlDisplay||e)){this._lastUpdateUrlDisplay=t;var n=t==o.currentUrl();f.chat.urlChange({peer:this.peer,url:this.peer.url,title:this.peer.title,sameUrl:n})}},urlNudge:function(){this.updateUrlDisplay(!0)},notifyJoined:function(){f.chat.joinedSession({peer:this.peer})},dock:j(function(){a.getAllPeers().length;if(!this.dockElement){this.dockElement=i.sub("dock-person",{peer:this.peer}),this.dockElement.attr("id",this.peer.className("togetherjs-dock-element-")),f.container.find("#togetherjs-dock-participants").append(this.dockElement),this.dockElement.find(".togetherjs-person").animateDockEntry(),S(1),this.detailElement=i.sub("participant-window",{peer:this.peer});var e=this.peer.className("togetherjs-person-status-follow-");this.detailElement.find('[for="togetherjs-person-status-follow"]').attr("for",e),this.detailElement.find("#togetherjs-person-status-follow").attr("id",e),this.detailElement.find(".togetherjs-follow").click(function(){location.href=t(this).attr("href")}),this.detailElement.find(".togetherjs-nudge").click(function(){this.peer.nudge()}.bind(this)),this.followCheckbox=this.detailElement.find("#"+e),this.followCheckbox.change(function(){this.checked||this.peer.unfollow()}),this.maybeHideDetailWindow=this.maybeHideDetailWindow.bind(this),o.on("hide-window",this.maybeHideDetailWindow),f.container.append(this.detailElement),this.dockElement.click(function(){this.detailElement.is(":visible")?l.hide(this.detailElement):(l.show(this.detailElement,{bind:this.dockElement}),this.scrollTo(),this.cursor().element.animate({opacity:.3}).animate({opacity:1}).animate({opacity:.3}).animate({opacity:1}))}.bind(this)),this.updateFollow()}}),undock:function(){this.dockElement&&this.dockElement.animateDockExit().promise().then(function(){this.dockElement.remove(),this.dockElement=null,this.detailElement.remove(),this.detailElement=null,S(-1)}.bind(this))},scrollTo:function(){if(this.peer.url==o.currentUrl()){var e=this.peer.scrollPosition;e?(e=u.pixelForPosition(e),t("html, body").easeTo(e)):console.warn("Peer has no scroll position:",this.peer)}},updateFollow:function(){if(this.peer.url&&this.detailElement){var e=this.detailElement.find(".togetherjs-same-url"),t=this.detailElement.find(".togetherjs-different-url");this.peer.url==o.currentUrl()?(e.show(),t.hide()):(e.hide(),t.show())}},maybeHideDetailWindow:function(e){this.detailElement&&e[0]&&e[0][0]===this.detailElement[0]&&(this.followCheckbox[0].checked?this.peer.follow():this.peer.unfollow())},dockClick:function(){},cursor:function(){return e("cursor").getClient(this.peer.id)},destroy:function(){o.off("hide-window",this.maybeHideDetailWindow)}});var I=!1;function _(){I||(I=!0,e(["who"],function(e){var n=e.getList(A());function o(e,n){var o=i.sub("invite-user-item",{peer:e});o.attr("data-clientid",e.id),n?o.insertBefore(n):t("#togetherjs-invite-users").append(o),o.click(function(){N(e.clientId)})}function r(e,n){var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(e[i]);r.sort(function(e,t){return e.name<t.name?-1:1});var s=0;f.container.find("#togetherjs-invite-users .togetherjs-menu-item").each(function(){var i=t(this);if(!n||e[i.attr("data-clientid")]){if(!(s>=r.length)){for(;s<r.length&&i.attr("data-clientid")!==r[s].id;)o(r[s],i),s++;for(;s<r.length&&i.attr("data-clientid")==r[s].id;)s++}}else i.remove()});for(var a=s;a<r.length;a++)o(r[s])}n.then(function(e){r(e,!0),I=!1}),n.progress(r)}))}function N(t){e(["who"],function(e){e.invite(A(),t).then(function(){T()})})}o.hub.on("invite",function(t){t.forClientId&&t.clientId!=a.Self.id||e(["who"],function(e){var n=e.ExternalPeer(t.userInfo.clientId,t.userInfo);f.chat.invite({peer:n,url:t.url,forEveryone:!t.forClientId})})}),f.showUrlChangeMessage=j(function(e,t){var n=i.sub("url-change",{peer:e});f.container.append(n),l.show(n)}),o.hub.on("url-change-nudge",function(e){e.to&&e.to!=o.clientId||e.peer.urlNudge()}),o.on("new-element",function(e){TogetherJS.config.get("toolName")&&f.updateToolName(e)});var D=!1;return f.updateToolName=function(e){e=e||t(document.body);var n=TogetherJS.config.get("toolName");D&&!n&&(n="TogetherJS"),n&&(e.find(".togetherjs-tool-name").text(n),D=!0)},TogetherJS.config.track("toolName",function(e){f.updateToolName(f.container)}),f}),n("playback",["jquery","util","session","storage","require"],function(e,t,n,o,r){var i=t.Module("playback"),s=(t.assert,{"cursor-update":!0,"scroll-update":!0});function a(e){e=(e=e.replace(/\r\n/g,"\n")).split(/\n/g);for(var t=[],n=0;n<e.length;n++){var o=e[n];if(0===(o=o.replace(/^\s+/,"").replace(/\s+$/,"")).search(/\/\*/)){var r=o.search(/\*\//);if(-1==r){console.warn("bad line:",o);continue}o=o.substr(r+2)}(o=o.replace(/^\s+/,""))&&(o=JSON.parse(o),t.push(o))}return l(t)}i.getLogs=function(t){return 0===t.search(/^local:/)?e.Deferred(function(e){o.get("recording."+t.substr("local:".length)).then(function(t){t?(t=a(t),e.resolve(t)):e.resolve(null)},function(t){e.reject(t)})}):e.Deferred(function(n){e.ajax({url:t,dataType:"text"}).then(function(e){e=a(e),n.resolve(e)},function(e){n.reject(e)})})};var l=t.Class({constructor:function(e,t){this.logs=e,this.fromStorage=t,this.pos=0},play:function(){if(this.start=Date.now(),this.pos>=this.logs.length)this.unload();else{if(0!==this.pos){for(var e=[],t=!1,n=this.pos-1;n>=0;n--){var o=this.logs[n];if(s[o.type]&&e.push(o),"hello"==o.type||"hello-back"==o.type){this.playItem(o),t=!0;break}}for(t||console.warn("No hello message found before position",this.pos),e.reverse(),n=0;n<e.length;n++)this.playItem(e[n])}this.playOne()}},cancel:function(){this.playTimer&&(clearTimeout(this.playTimer),this.playTimer=null),this.start=null,this.pos=0,this.unload()},pause:function(){this.playTimer&&(clearTimeout(this.playTimer),this.playTimer=null)},playOne:function(){if(this.playTimer=null,this.pos>=this.logs.length)this.unload();else{var e=this.logs[this.pos];if(this.playItem(e),this.pos++,this.pos>=this.logs.length)this.unload();else{var t=this.logs[this.pos].date-e.date;this.playTimer=setTimeout(this.playOne.bind(this),t),this.fromStorage&&this.savePos()}}},playItem:function(e){"hello"==e.type&&e.url!=(location.href+"").replace(/\#.*/,"")&&this.pause();try{n._getChannel().onmessage(e)}catch(t){console.warn("Could not play back message:",e,"error:",t)}},save:function(){this.fromStorage=!0,o.set("playback.logs",this.logs),this.savePos()},savePos:function(){o.set("playback.pos",this.pos)},unload:function(){this.fromStorage&&(o.set("playback.logs",void 0),o.set("playback.pos",void 0))}});return i.getRunningLogs=function(){return o.get("playback.logs").then(function(e){if(!e)return null;var t=l(e,!0);return o.get("playback.pos").then(function(e){return e=e||0,t.pos=e,t})})},i}),n("chat",["require","jquery","util","session","ui","templates","playback","storage","peers","windowing"],function(e,t,n,o,r,i,s,a,l,c){var u,h=n.Module("chat"),d=n.assert;o.hub.on("chat",function(e){r.chat.text({text:e.text,peer:e.peer,messageId:e.messageId,notify:!0}),m({text:e.text,date:Date.now(),peerId:e.peer.id,messageId:e.messageId})}),o.hub.on("bye",function(e){r.chat.leftSession({peer:e.peer,declinedJoin:"declined-join"==e.reason})}),h.submit=function(e){var t=e.split(/ /);if("/"==t[0].charAt(0)){var n=t[0].substr(1).toLowerCase(),i=f["command_"+n];if(i)return void i.apply(null,t.slice(1))}var s=o.clientId+"-"+Date.now();o.send({type:"chat",text:e,messageId:s}),r.chat.text({text:e,peer:l.Self,messageId:s,notify:!1}),m({text:e,date:Date.now(),peerId:l.Self.id,messageId:s})};var f={command_help:function(){var e=n.trim(i.help);r.chat.system({text:e})},command_test:function(o){if(u){if(""!==(o=n.trim(o||"").split(/\s+/g))[0]&&o.length||(o=this._testCancel?["cancel"]:["start"]),"cancel"==o[0])return r.chat.system({text:"Aborting test"}),this._testCancel(),void(this._testCancel=null);if("start"==o[0]){var s=parseInt(o[1],10);!isNaN(s)&&s||(s=100),r.chat.system({text:"Testing with walkabout.js"});var a=t(i.walkabout),l=r.container.find(".togetherjs-test-container");l.empty(),l.append(a),l.show();var c=l.find(".togetherjs-status");return c.text("starting..."),void(this._testCancel=u.runManyActions({ondone:function(){c.text("done"),c.one("click",function(){l.hide()}),this._testCancel=null},onstatus:function(e){var t="actions: "+e.actions.length+" running: "+(e.times-e.remaining)+" / "+e.times;c.text(t)}}))}if("show"!=o[0])"describe"!=o[0]?r.chat.system({text:"Did not understand: "+o.join(" ")}):u.findActions().forEach(function(e){r.chat.system({text:e.description()})},this);else this._testShow.length?(this._testShow.forEach(function(e){e&&e.remove()},this),this._testShow=[]):u.findActions().forEach(function(e){this._testShow.push(e.show())},this)}else e(["walkabout"],function(e){u=e,this.command_test(o)}.bind(this))},_testCancel:null,_testShow:[],command_clear:function(){r.chat.clear()},command_exec:function(){var e,t=Array.prototype.slice.call(arguments).join(" "),n=eval;try{e=n(t)}catch(e){r.chat.system({text:"Error: "+e})}void 0!==e&&r.chat.system({text:""+e})},command_record:function(){r.chat.system({text:"When you see the robot appear, the recording will have started"}),window.open(o.recordUrl(),"_blank","left,width="+t(window).width()/2)},playing:null,command_playback:function(e){if(this.playing)return this.playing.cancel(),this.playing.unload(),this.playing=null,void r.chat.system({text:"playback cancelled"});e?(s.getLogs(e).then(function(e){e?(e.save(),this.playing=e,e.play()):r.chat.system({text:"No logs found."})}.bind(this),function(t){r.chat.system({text:"Error fetching "+e+":\n"+JSON.stringify(t,null,"  ")})}),c.hide("#togetherjs-chat")):r.chat.system({text:"Nothing is playing"})},command_savelogs:function(e){o.send({type:"get-logs",forClient:o.clientId,saveAs:e}),o.hub.on("logs",function t(n){n.request.forClient==o.clientId&&n.request.saveAs==e&&a.set("recording."+e,n.logs).then(function(){o.hub.off("logs",t),r.chat.system({text:"Saved as local:"+e})})})},command_baseurl:function(e){e?(e=e.replace(/\/*$/,""),r.chat.system({text:"If this goes wrong, do this in the console to reset:\n  localStorage.setItem('togetherjs.baseUrlOverride', null)"}),a.set("baseUrlOverride",{baseUrl:e,expiresAt:Date.now()+864e5}).then(function(){r.chat.system({text:"baseUrl overridden (to "+e+"), will last for one day."})})):a.get("baseUrlOverride").then(function(e){e?r.chat.system({text:"Set to: "+e.baseUrl}):r.chat.system({text:"No baseUrl override set"})})},command_config:function(e,t){if(e||t){if("clear"==e)return a.set("configOverride",void 0),void r.chat.system({text:"Clearing all overridden configuration"});if(console.log("config",[e,t]),e&&t){try{t=JSON.parse(t)}catch(e){return void r.chat.system({text:"Error: value ("+t+") could not be parsed: "+e})}TogetherJS._defaultConfiguration.hasOwnProperty(e)||r.chat.system({text:"Warning: variable "+e+" is unknown"}),a.get("configOverride").then(function(n){(n=n||{})[e]=t,n.expiresAt=Date.now()+864e5,a.set("configOverride",n).then(function(){r.chat.system({text:"Variable "+e+" = "+JSON.stringify(t)+"\nValue will be set for one day."})})})}else r.chat.system({text:"Error: must provide /config VAR VALUE"})}else a.get("configOverride").then(function(e){e?(n.forEachAttr(e,function(e,t){"expiresAt"!=t&&r.chat.system({text:"  "+t+" = "+JSON.stringify(e)})}),r.chat.system({text:"Config expires at "+new Date(e.expiresAt)})):r.chat.system({text:"No config override"})})}},p="chatlog",g=100;function m(e){d(e.peerId),d(e.messageId),d(e.date),d("string"==typeof e.text),v().then(function(t){for(var n=t.length-1;n>=0;n--)if(t[n].messageId===e.messageId)return;t.push(e),t.length>g&&t.splice(0,t.length-g),a.tab.set(p,t)})}function v(){return a.tab.get(p,[])}return o.once("ui-ready",function(){v().then(function(e){if(e)for(var t=0;t<e.length;t++){var n=l.getPeer(e[t].peerId);r.chat.text({text:e[t].text,date:e[t].date,peer:n,messageId:e[t].messageId})}})}),o.on("close",function(){a.tab.set(p,void 0)}),h}),n("console",["util"],function(e){var t=window.console||{log:function(){}},n=e.Class({constructor:function(){this.messages=[],this.level=this.levels.log},messageLimit:100,levels:{debug:1,log:2,info:3,notify:4,warn:5,error:6,fatal:7},maxLevel:0,consoleLevels:[[],t.debug||[],t.log||[],t.info||[],t.notify||[],t.warn||[],t.error||[],t.fatal||[]],levelNames:{},setLevel:function(e){var t;if("string"==typeof e){if(void 0===(t=this.levels[e]))throw new Error("Tried to set Console level to unknown level string: "+e);e=t}if("function"==typeof e){if(-1==(t=this.consoleLevels.indexOf(e)))throw new Error("Tried to set Console level based on unknown console function: "+e);e=t}if("number"==typeof e){if(e<0)throw new Error("Console level must be 0 or larger: "+e);if(e>this.maxLevel)throw new Error("Console level must be "+this.maxLevel+" or smaller: "+e)}this.level=e},write:function(e){try{this.messages.push([Date.now(),e,this._stringify(Array.prototype.slice.call(arguments,1))])}catch(e){t.warn("Error stringifying argument:",e)}if("suppress"!=e&&this.level<=e){var n=t[this.levelNames[e]];n||(n=t.log),n.apply(t,Array.prototype.slice.call(arguments,1))}},suppressedWrite:function(){this.write.apply(this,["suppress"].concat(Array.prototype.slice.call(arguments)))},trace:function(e){e=e||"log",t.trace&&(e="suppressedWrite");try{throw new Error}catch(t){var n=t.stack;n=n.replace(/^[^\n]*\n/,""),this[e](n)}t.trace&&t.trace()},_browserInfo:function(){return["TogetherJS base URL: "+TogetherJS.baseUrl,"User Agent: "+navigator.userAgent,"Page loaded: "+this._formatDate(TogetherJS.pageLoaded),"Age: "+this._formatMinutes(Date.now()-TogetherJS.pageLoaded)+" minutes","URL: "+location.href,"------+------+----------------------------------------------"]},_stringify:function(e){for(var t="",n=0;n<e.length;n++)t&&(t+=" "),t+=this._stringifyItem(e[n]);return t},_stringifyItem:function(e){if("string"==typeof e)return""===e?'""':e;if("object"==typeof e&&e.repr)try{return e.repr()}catch(n){t.warn("Error getting object repr:",e,n)}return null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),e.toString()},_formatDate:function(e){return new Date(e).toISOString()},_formatTime:function(e){return((e-TogetherJS.pageLoaded)/1e3).toFixed(2)},_formatMinutes:function(e){var t=Math.floor(e/1e3/60),n=e-1e3*t*60;if(t>10)return t;var r=Math.floor(n/1e3)+"";return t+=":","0:00"==(t+=r=o(r,2,"0"))&&(t+=((n/1e3).toFixed(3)+"").substr(1)),t},_formatLevel:function(e){return"suppress"===e?"":this.levelNames[e]},toString:function(){try{var e=this._browserInfo();return this.messages.forEach(function(t){e.push(o(this._formatTime(t[0]),6)+" "+function(e,t,n){e+="",n=n||" ";for(;e.length<t;)e+=n;return e}(this._formatLevel(t[1]),6)+" "+function(e,t,n){var o;if(-1==(e+="").indexOf("\n"))return e;n=n||" ";var r="";for(o=0;o<t;o++)r+=n;for(e=e.split(/\n/g),o=1;o<e.length;o++)e[o]=r+e[o];return e.join("\n")}(t[2],14))},this),e.join("\n")}catch(e){throw t.warn("Error running console.toString():",e),e}},submit:function(t){return e.Deferred(function(e){var n=(t=t||{}).site||TogetherJS.config.get("pasteSite")||"https://www.friendpaste.com/",o=new XMLHttpRequest;o.open("POST",n),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify({title:t.title||"TogetherJS log file",snippet:this.toString(),language:"text"})),o.onreadystatechange=function(){if(4===o.readyState)JSON.parse(o.responseText)}})}});function o(e,t,n){for(e+="",n=n||" ";e.length<t;)e=n+e;return e}e.forEachAttr(n.prototype.levels,function(e,t){var o;n.prototype[t]=(o=e,function(){this.write.apply(this,[o].concat(Array.prototype.slice.call(arguments)))}),n.prototype.maxLevel=Math.max(n.prototype.maxLevel,e)}),e.forEachAttr(n.prototype.levels,function(e,t){n.prototype.levelNames[e]=t});var r=n();return r.ConsoleClass=n,r}),n("eventMaker",["jquery","util"],function(e,t){var n=t.Module("eventMaker");return n.performClick=function(t){var n=document.createEvent("MouseEvents");if(n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.togetherjsInternal=!0,!(t=e(t)[0]).dispatchEvent(n)&&"A"==t.tagName){var o=t.href;if(o)return void(location.href=o)}},n.fireChange=function(t){t=e(t)[0];var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!0),t.dispatchEvent(n)},n}),n("cursor",["jquery","ui","util","session","elementFinder","tinycolor","eventMaker","peers","templating"],function(e,t,n,o,r,i,s,a,l){var c=n.assert,u=n.Module("cursor"),h=["#111","#eee"],d=50,f=35/180*Math.PI,p=Math.ceil(Math.sin(f)*d);o.hub.on("cursor-update",function(e){e.sameUrl?g.getClient(e.clientId).updatePosition(e):g.getClient(e.clientId).hideOtherUrl()});var g=n.Class({constructor:function(t){this.clientId=t,this.element=l.clone("cursor"),this.elementClass="togetherjs-scrolled-normal",this.element.addClass(this.elementClass),this.updatePeer(a.getPeer(t)),this.lastTop=this.lastLeft=null,e(document.body).append(this.element),this.element.animateCursorEntry(),this.keydownTimeout=null,this.clearKeydown=this.clearKeydown.bind(this),this.atOtherUrl=!1},KEYDOWN_WAIT_TIME:2e3,updatePeer:function(t){this.element.css({color:t.color}),this.element.find("img.togetherjs-cursor-img").attr("src",function(t){var n=e("<canvas></canvas>");n.attr("height",d),n.attr("width",p);var o=n[0].getContext("2d");return o.fillStyle=t,o.moveTo(0,0),o.beginPath(),o.lineTo(0,d/1.2),o.lineTo(Math.sin(f/2)*d/1.5,Math.cos(f/2)*d/1.5),o.lineTo(Math.sin(f)*d/1.2,Math.cos(f)*d/1.2),o.lineTo(0,0),o.shadowColor="rgba(0,0,0,0.3)",o.shadowBlur=2,o.shadowOffsetX=1,o.shadowOffsetY=2,o.strokeStyle="#ffffff",o.stroke(),o.fill(),n[0].toDataURL("image/png")}(t.color));var n=this.element.find(".togetherjs-cursor-name"),o=this.element.find(".togetherjs-cursor-container");c(n.length),n.text(t.name),o.css({backgroundColor:t.color,color:i.mostReadable(t.color,h)}),this.element.find("svg path").attr("fill",t.color),"live"!=t.status?(this.element.find("svg").animate({opacity:0},350),this.element.find(".togetherjs-cursor-container").animate({width:34,height:20,padding:12,margin:0},200).animate({width:0,height:0,padding:0,opacity:0},200)):this.element.animate({opacity:.3}).animate({opacity:1})},setClass:function(e){e!=this.elementClass&&(this.element.removeClass(this.elementClass).addClass(e),this.elementClass=e)},updatePosition:function(t){var n,o;if(this.atOtherUrl&&(this.element.show(),this.atOtherUrl=!1),t.element){var i=e(r.findElement(t.element)).offset();n=i.top+t.offsetY,o=i.left+t.offsetX}else n=t.top,o=t.left;this.lastTop=n,this.lastLeft=o,this.setPosition(n,o)},hideOtherUrl:function(){this.atOtherUrl||(this.atOtherUrl=!0,this.element.hide())},rotateCursorDown:function(){var t=e(this.element).find("svg");t.animate({borderSpacing:-150,opacity:1},{step:function(e,n){"borderSpacing"==n.prop?t.css("-webkit-transform","rotate("+e+"deg)").css("-moz-transform","rotate("+e+"deg)").css("-ms-transform","rotate("+e+"deg)").css("-o-transform","rotate("+e+"deg)").css("transform","rotate("+e+"deg)"):t.css(n.prop,e)},duration:500},"linear").promise().then(function(){t.css("-webkit-transform","").css("-moz-transform","").css("-ms-transform","").css("-o-transform","").css("transform","").css("opacity","")})},setPosition:function(t,n){var o=e(window).scrollTop(),r=e(window).height();t<o?(t=25,this.setClass("togetherjs-scrolled-above")):t>o+r-d?(t=r-d-5,this.setClass("togetherjs-scrolled-below")):this.setClass("togetherjs-scrolled-normal"),this.element.css({top:t,left:n})},refresh:function(){null!==this.lastTop&&this.setPosition(this.lastTop,this.lastLeft)},setKeydown:function(){this.keydownTimeout?clearTimeout(this.keydownTimeout):this.element.find(".togetherjs-cursor-typing").show().animateKeyboard(),this.keydownTimeout=setTimeout(this.clearKeydown,this.KEYDOWN_WAIT_TIME)},clearKeydown:function(){this.keydownTimeout=null,this.element.find(".togetherjs-cursor-typing").hide().stopKeyboardAnimation()},_destroy:function(){this.element.remove(),this.element=null}});g._cursors={},u.getClient=g.getClient=function(e){var t=g._cursors[e];return t||(t=g._cursors[e]=g(e)),t},g.forEach=function(e,t){t=t||null;for(var n in g._cursors)g._cursors.hasOwnProperty(n)&&e.call(t,g._cursors[n],n)},g.destroy=function(e){g._cursors[e]._destroy(),delete g._cursors[e]},a.on("new-peer identity-updated status-updated",function(e){g.getClient(e.id).updatePeer(e)});var m=0,v=100,y=-1,b=-1,w=null;function j(t){var n=Date.now();if(!(n-m<v)){m=n;var i=t.pageX,s=t.pageY;if(!(Math.abs(y-i)<3&&Math.abs(b-s)<3)){y=i,b=s;var a=t.target,l=e(a).closest(".togetherjs-window, .togetherjs-popup, #togetherjs-dock");if(l.length?a=l[0]:r.ignoreElement(a)&&(a=null),!a||a==document.documentElement||a==document.body)return w={type:"cursor-update",top:s,left:i},void o.send(w);var c=(a=e(a)).offset();if(c){var u=i-c.left,h=s-c.top;w={type:"cursor-update",element:r.elementLocation(a),offsetX:Math.floor(u),offsetY:Math.floor(h)},o.send(w)}else console.warn("Could not get offset of element:",a[0])}}}var x=null,k=0,T=75,C=300;function S(){var e=Date.now();if(x){if(!(e-k<C))return;clearTimeout(x)}x=setTimeout(A,T),k||(k=e)}var E=null;function A(){x=null,k=0,g.forEach(function(e){e.refresh()}),E={type:"scroll-update",position:r.elementByPixel(e(window).scrollTop())},o.send(E)}o.on("prepare-hello",function(e){E&&(e.scrollPosition=E.position)}),o.hub.on("scroll-update",function(e){e.peer.scrollPosition=e.position,e.peer.following&&e.peer.view.scrollTo()});var I=!1;function _(t){t.togetherjsInternal||setTimeout(function(){if(TogetherJS.running){var i=t.target;if(i==document.documentElement&&(i=document.body),!r.ignoreElement(i)&&"video"!==i.nodeName.toLowerCase()){var s=TogetherJS.config.get("dontShowClicks"),l=TogetherJS.config.get("cloneClicks");if(n.matchElement(i,l)||!n.matchElement(i,s)){var c=r.elementLocation(i),u=e(i).offset(),h=t.pageX-u.left,d=t.pageY-u.top;o.send({type:"cursor-click",element:c,offsetX:h,offsetY:d}),n.matchElement(i,s)||D({top:t.pageY,left:t.pageX},a.Self.color)}}}})}o.hub.on("hello-back hello",function(e){"hello"==e.type&&(I=!0),e.scrollPosition&&(e.peer.scrollPosition=e.scrollPosition,!I&&e.sameUrl&&Date.now()-o.timeHelloSent<2e3&&(I=!0,e.peer.view.scrollTo()))}),o.on("ui-ready",function(){e(document).mousemove(j),document.addEventListener("click",_,!0),document.addEventListener("keydown",R,!0),e(window).scroll(S),S()}),o.on("close",function(){g.forEach(function(e,t){g.destroy(t)}),e(document).unbind("mousemove",j),document.removeEventListener("click",_,!0),document.removeEventListener("keydown",R,!0),e(window).unbind("scroll",S)}),o.hub.on("hello",function(e){w&&o.send(w),E&&o.send(E)});var N=3e3;function D(t,n){var o=l.clone("click");e(document.body).append(o),o.css({top:t.top,left:t.left,borderColor:n}),setTimeout(function(){o.addClass("togetherjs-clicking")},100),setTimeout(function(){o.remove()},N)}o.hub.on("cursor-click",function(t){if(t.sameUrl){g.getClient(t.clientId).updatePosition(t);var o=e(r.findElement(t.element)),i=o.offset(),a=i.top+t.offsetY,l=i.left+t.offsetX,c=TogetherJS.config.get("cloneClicks");n.matchElement(o,c)&&s.performClick(o);var u=TogetherJS.config.get("dontShowClicks");n.matchElement(o,u)||D({top:a,left:l},t.peer.color)}});var L=0,O=500;function R(e){setTimeout(function(){var e=Date.now();e-L<O||(L=e,o.send({type:"keydown"}))})}return o.hub.on("keydown",function(e){g.getClient(e.clientId).setKeydown()}),n.testExpose({Cursor:g}),u}),n("ot",["util"],function(e){var t=e.Module("ot"),n=e.assert,o=e.Class({constructor:function(){this._items={},this._count=0},contains:function(e){return n("string"==typeof e),this._items.hasOwnProperty(e)},add:function(e){n("string"==typeof e),this.contains(e)||(this._items[e]=null,this._count++)},remove:function(e){n("string"==typeof e),this.contains(e)&&(delete this._items[e],this._count++)},isEmpty:function(){return!this._count}}),r=e.Class({constructor:function(e){this._q=[],this._size=e,this._deleted=0},_trim:function(){this._size&&this._q.length>this._size&&(this._q.splice(0,this._q.length-this._size),this._deleted+=this._q.length-this._size)},push:function(e){this._q.push(e),this._trim()},last:function(){return this._q[this._q.length-1]},walkBack:function(e,t){for(var n=!0,o=this._q.length-1;o>=0;o--){var r=this._q[o];if(!1===(n=e.call(t,r,o+this._deleted)))return n;n||(n=!0)}return n},walkForward:function(e,t,n){for(var o=!0,r=e;r<this._q.length;r++){var i=this._q[r-this._deleted];if(!1===(o=t.call(n,i,r)))return o;o||(o=!0)}return o},insert:function(e,t){this._q.splice(e-this._deleted,0,t)}}),i=e.Class({constructor:function(e,t,o,r,i){this.version=e,this.clientId=t,this.delta=o,this.known=r,this.outOfOrder=!!i,n("number"==typeof e&&"string"==typeof t,"Bad Change():",e,t)},toString:function(){var e="[Change "+this.version+"."+this.clientId+": ";e+=this.delta+" ",this.outOfOrder&&(e+="(out of order) ");var t=[];for(var n in this.known)this.known.hasOwnProperty(n)&&t.push(n);return t.sort(),e+="{",t.length?t.forEach(function(t,n){n&&(e+=";"),e+=t+":"+this.known[t]},this):e+="nothing known",e+"}]"},clone:function(){return i(this.version,this.clientId,this.delta.clone(),e.extend(this.known),this.outOfOrder)},isBefore:function(e){return n(e!==this,"Tried to compare a change to itself",this),e.version>this.version||e.version==this.version&&e.clientId>this.clientId},knowsAboutAll:function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t]&&(!this.known[t]||this.known[t]<e[t]))return!1;return!0},knowsAboutChange:function(e){return e.clientId==this.clientId||this.known[e.clientId]&&this.known[e.clientId]>=e.version},knowsAboutVersion:function(e,t){return!e||t==this.clientId||this.known[t]&&this.known[t]>=e},maybeMissingChanges:function(e,t){return!!e&&(!this.known[t]||!(this.known[t]>=e)&&!(t>this.clientId&&this.known[t]>=this.version-1||t<this.clientId&&this.known[t]==this.version))}});return t.SimpleHistory=e.Class({constructor:function(e,t,n){this.clientId=e,this.committed=t,this.current=t,this.basis=n,this.queue=[],this.deltaId=1,this.selection=null},setSelection:function(e){this.selection=e?t.TextReplace(e[0],e[1]-e[0],"@"):null},getSelection:function(){return this.selection?[this.selection.start,this.selection.start+this.selection.del]:null},add:function(e){var t={id:this.clientId+"."+this.deltaId++,delta:e};return this.queue.length||(t.basis=this.basis),this.queue.push(t),this.current=e.apply(this.current),!!t.basis},commit:function(e){if(e.basis!==this.basis)return!1;if(this.queue.length&&this.queue[0].id===e.id)return n(e.basis===this.queue[0].basis),this.committed=this.queue.shift().delta.apply(this.committed),this.basis++,this.queue.length&&(this.queue[0].basis=this.basis),!1;var t=e.delta;return this.queue=this.queue.map(function(e){var n=e.delta.transpose(t);return t=n[1],{id:e.id,delta:n[0]}}),this.selection&&(this.selection=this.selection.transpose(t)[0]),this.committed=e.delta.apply(this.committed),this.basis++,this.queue.length&&(this.queue[0].basis=this.basis),this.current=this.committed,this.queue.forEach(function(e){this.current=e.delta.apply(this.current)}.bind(this)),!0},getNextToSend:function(){var e=this.queue[0];return e?e.sent?null:(n(e.basis),e.sent=!0,e):null}}),t.History=e.Class({constructor:function(e,t){this._history=r(),this._history.push({clientId:"init",state:t}),this.clientId=e,this.known={},this.mostRecentLocalChange=null},add:function(e){if(e.clientId==this.clientId)return this._history.push(e),this.mostRecentLocalChange=e.version,e.delta;n(!this.known[e.clientId]||this.known[e.clientId]<e.version,"Got a change",e,"that appears older (or same as) a known change",this.known[e.clientId]);var t=this._history.last();if(("init"==t.clientId||t.isBefore(e))&&e.knowsAboutAll(this.known)&&e.knowsAboutVersion(this.mostRecentLocalChange,this.clientId))return this._history.push(e),this.known[e.clientId]=e.version,e.delta;this.logHistory("//");var r=o();for(var i in this.known)this.known.hasOwnProperty(i)&&e.maybeMissingChanges(this.known[i],i)&&r.add(i);if(e.maybeMissingChanges(this.mostRecentLocalChange,this.clientId)&&r.add(this.clientId),!r.isEmpty()){var s=null;this._history.walkBack(function(t,n){return s=n,"init"!=t.clientId&&!(r.contains(t.clientId)&&!e.maybeMissingChanges(t.version,t.clientId)&&(r.remove(t.clientId),r.isEmpty()))},this),this._history.walkForward(s,function(t,n){if("init"==t.clientId)return!0;if(e.isBefore(t))return!1;if(!e.knowsAboutChange(t)){var o=this.promoteDelta(t.delta,n,e);o.equals(t.delta),this.logChange("->rebase",e,function(){var n=e.delta.transpose(o);e.delta=n[0],e.known[t.clientId]=t.version},"with:",t)}return!0},this)}var a=null;this._history.walkBack(function(t,n){return"init"!=t.clientId&&!t.isBefore(e)||(a=n+1,!1)},this),n(a),this._history.insert(a,e);var l=e.delta;return this._history.walkForward(a+1,function(t,o){if(!t.knowsAboutChange(e)){t.clone();this.logChange("^^fix",t,function(){var n=t.delta.transpose(l);console.log("  ^^real");var o=t.delta.transpose(l);t.delta=o[0],t.known[e.clientId]=e.version,l=n[1]},"clone:",e.delta+""),console.log("(trans)",l+""),n(t.knowsAboutChange(e))}},this),this.logHistory("!!"),l},promoteDelta:function(e,t,n){return this._history.walkForward(t+1,function(t,o){if(n.isBefore(t))return!1;if(n.knowsAboutChange(t)){var r=t.delta.transpose(e);e=r[1]}return!0}),e},logHistory:function(e){e=e||"";var t,o=Array.prototype.slice.call(arguments,1);console.log.apply(console,[e+"history",this.clientId,":"].concat(o)),console.log(e+" state:",JSON.stringify(this.getStateSafe())),this._history.walkForward(0,function(o,r){if(r){try{t=o.delta.apply(t)}catch(e){t="Error: "+e}console.log(e+"  ",r,o+"",JSON.stringify(t))}else n("init"==o.clientId),console.log(e+" init:",JSON.stringify(o.state)),t=o.state})},logChange:function(e,t,n){e=e||"before";var o=Array.prototype.slice.call(arguments,3);console.log.apply(console,[e,this.clientId,":",t+""].concat(o).concat([JSON.stringify(this.getStateSafe(!0))]));try{n()}finally{console.log(e+" after:",t+"",JSON.stringify(this.getStateSafe()))}},addDelta:function(t){var n=this._createVersion(),o=i(n,this.clientId,t,e.extend(this.knownVersions));return this.add(o),o},_createVersion:function(){var e=1;for(var t in this.knownVersions)e=Math.max(e,this.knownVersions[t]);return(e=Math.max(e,this.mostRecentLocalChange))+1},fault:function(e){throw new Error("Fault")},getState:function(){var e;return this._history.walkForward(0,function(t){e="init"==t.clientId?t.state:t.delta.apply(e)},this),e},getStateSafe:function(){try{return this.getState()}catch(e){return"Error: "+e}}}),t.TextReplace=e.Class({constructor:function(e,t,o){n("number"==typeof e&&"number"==typeof t&&"string"==typeof o,e,t,o),n(e>=0&&t>=0,e,t),this.start=e,this.del=t,this.text=o},toString:function(){return this.empty()?"[no-op]":this.del?this.text?"[replace "+this.del+" chars with "+JSON.stringify(this.text)+" @"+this.start+"]":"[delete "+this.del+" chars @"+this.start+"]":"[insert "+JSON.stringify(this.text)+" @"+this.start+"]"},equals:function(e){return e.constructor===this.constructor&&e.del===this.del&&e.start===this.start&&e.text===this.text},clone:function(e,n,o){return void 0===e&&(e=this.start),void 0===n&&(n=this.del),void 0===o&&(o=this.text),t.TextReplace(e,n,o)},empty:function(){return!this.del&&!this.text},apply:function(t){if(this.empty())return t;if(this.start>t.length)throw console.trace(),new e.AssertionError("Start after end of text ("+JSON.stringify(t)+"/"+t.length+"): "+this);if(this.start+this.del>t.length)throw new e.AssertionError("Start+del after end of text ("+JSON.stringify(t)+"/"+t.length+"): "+this);return t.substr(0,this.start)+this.text+t.substr(this.start+this.del)},transpose:function(e){var o;return n(e instanceof t.TextReplace,"Transposing with non-TextReplace:",e),this.empty()?[this.clone(),e.clone()]:e.empty()?[this.clone(),e.clone()]:e.before(this)?[this.clone(this.start+e.text.length-e.del),e.clone()]:this.before(e)?[this.clone(),e.clone(e.start+this.text.length-this.del)]:e.sameRange(this)?[this.clone(this.start+e.text.length,0),e.clone(void 0,0)]:e.contains(this)?[this.clone(e.start+e.text.length,0,this.text),e.clone(void 0,e.del-this.del+this.text.length,e.text+this.text)]:this.contains(e)?[this.clone(void 0,this.del-e.del+e.text.length,e.text+this.text),e.clone(this.start,0,e.text)]:this.overlapsStart(e)?(o=this.start+this.del-e.start,[this.clone(void 0,this.del-o),e.clone(this.start+this.text.length,e.del-o)]):(n(e.overlapsStart(this),e+"","does not overlap start of",this+"",e.before(this)),o=e.start+e.del-this.start,[this.clone(e.start+e.text.length,this.del-o),e.clone(void 0,e.del-o)])},before:function(e){return this.start+this.del<=e.start},contains:function(e){return e.start>=this.start&&e.start+e.del<this.start+this.del},sameRange:function(e){return e.start==this.start&&e.del==this.del},overlapsStart:function(e){return this.start<e.start&&this.start+this.del>e.start},classMethods:{fromChange:function(e,t){n("string"==typeof e),n("string"==typeof t);for(var o=0;o<t.length&&t.charAt(o)==e.charAt(o);)o++;for(var r=0;r<t.length-o&&r<e.length-o&&t.charAt(t.length-r-1)==e.charAt(e.length-r-1);)r++;var i=e.substr(o,e.length-o-r),s=t.substr(o,t.length-o-r);return i.length||s?this(o,i.length,s):null},random:function(e,t){var n,o,r,i=["ins","del","repl"];switch(e.length||(i=["ins"]),t.pick(i)){case"ins":return n=t.number(2)?t.string(t.number(3)+1):t.string(1),this(o=t.number(4)?t.number(3)?t.number(e.length):e.length-1:0,0,n);case"del":return t.number(20)?(o=t.number(e.length-1),r=t.number(2)?t.number(5)+1:1,this(o,r=Math.min(r,e.length-o),"")):this(0,e.length,"");case"repl":return o=t.number(e.length-1),r=t.number(5),this(o,r=Math.min(r,e.length-o),n=t.string(t.number(2)+1))}throw"Unreachable"}}}),t}),n("forms",["jquery","util","session","elementFinder","eventMaker","templating","ot"],function(e,t,n,o,r,i,s){var a=t.Module("forms"),l=t.assert,c=5,u=!1;function h(t){var n=TogetherJS.config.get("ignoreForms");return!0===n||e(t).is(n.join(","))}function d(e){var t=e.target.tagName;"TEXTAREA"!=t&&"INPUT"!=t||f(e)}function f(e){p({element:e.target,value:S(e.target)})}function p(t){var r=e(t.element);l(r);var i=t.tracker,a=t.value;if(!u&&!(o.ignoreElement(r)||x(r)&&!i||h(r))){var c={type:"form-update",element:o.elementLocation(r)};if(C(r)||i){var d=r.data("togetherjsHistory");if(d){if(d.current==a)return;var f=s.TextReplace.fromChange(d.current,a);return l(f),d.add(f),void A(c.element,d,i)}c.value=a,c.basis=1,r.data("togetherjsHistory",s.SimpleHistory(n.clientId,a,1))}else c.value=a;n.send(c)}}function g(t){var n=((t=e(t)).prop("type")||"text").toLowerCase();return"INPUT"==t.prop("tagName")&&-1!=["radio","checkbox"].indexOf(n)}var m={},v=[];TogetherJS.addTracker=function(e,t){l("function"==typeof e,"You must pass in a class"),l("string"==typeof e.prototype.trackerName,"Needs a .prototype.trackerName string"),"destroy update init makeInit tracked".split(/ /).forEach(function(t){l("function"==typeof e.prototype[t],"Missing required tracker method: "+t)}),"scan tracked".split(/ /).forEach(function(t){l("function"==typeof e[t],"Missing required tracker class method: "+t)}),m[e.prototype.trackerName]=e,t||N()};var y=t.Class({trackerName:"AceEditor",constructor:function(t){this.element=e(t)[0],l(e(this.element).hasClass("ace_editor")),this._change=this._change.bind(this),this._editor().document.on("change",this._change)},tracked:function(t){return this.element===e(t)[0]},destroy:function(e){this._editor().document.removeListener("change",this._change)},update:function(e){this._editor().document.setValue(e.value)},init:function(e,t){this.update(e)},makeInit:function(){return{element:this.element,tracker:this.trackerName,value:this._editor().document.getValue()}},_editor:function(){return this.element.env},_change:function(e){u||p({tracker:this.trackerName,element:this.element,value:this.getContent()})},getContent:function(){return this._editor().document.getValue()}});y.scan=function(){return e(".ace_editor")},y.tracked=function(t){return!!e(t).closest(".ace_editor").length},TogetherJS.addTracker(y,!0);var b=t.Class({trackerName:"CodeMirrorEditor",constructor:function(t){this.element=e(t)[0],l(this.element.CodeMirror),this._change=this._change.bind(this),this._editor().on("change",this._change)},tracked:function(t){return this.element===e(t)[0]},destroy:function(e){this._editor().off("change",this._change)},update:function(e){this._editor().setValue(e.value)},init:function(e){e.value&&this.update(e)},makeInit:function(){return{element:this.element,tracker:this.trackerName,value:this._editor().getValue()}},_change:function(e,t){u||p({tracker:this.trackerName,element:this.element,value:this.getContent()})},_editor:function(){return this.element.CodeMirror},getContent:function(){return this._editor().getValue()}});b.scan=function(){for(var t=[],n=document.body.getElementsByTagName("*"),o=n.length,r=0;r<o;r++){var i=n[r];i.CodeMirror&&t.push(i)}return e(t)},b.tracked=function(t){for(t=e(t)[0];t;){if(t.CodeMirror)return!0;t=t.parentNode}return!1},TogetherJS.addTracker(b,!0);var w=t.Class({trackerName:"CKEditor",constructor:function(t){this.element=e(t)[0],l(CKEDITOR),l(CKEDITOR.dom.element.get(this.element)),this._change=this._change.bind(this),this._editor().on("change",this._change)},tracked:function(t){return this.element===e(t)[0]},destroy:function(e){this._editor().removeListener("change",this._change)},update:function(e){this._editor().editable().setHtml(e.value)},init:function(e,t){this.update(e)},makeInit:function(){return{element:this.element,tracker:this.trackerName,value:this.getContent()}},_change:function(e){u||p({tracker:this.trackerName,element:this.element,value:this.getContent()})},_editor:function(){return CKEDITOR.dom.element.get(this.element).getEditor()},getContent:function(){return this._editor().getData()}});function j(){v.forEach(function(e){e.destroy()}),v=[]}function x(e){var n=!1;return t.forEachAttr(m,function(t){t.tracked(e)&&(n=!0)}),n}function k(t,n){t=e(t)[0];for(var o=0;o<v.length;o++){var r=v[o];if(r.tracked(t))return l(!n||n==r.trackerName,"Expected to map to a tracker type",n,"but got",r.trackerName),r}return null}w.scan=function(){var t=[];if("undefined"!=typeof CKEDITOR){var n;for(var o in CKEDITOR.instances)(n=document.getElementById(o)||document.getElementsByName(o)[0])&&t.push(n);return e(t)}},w.tracked=function(t){return"undefined"!=typeof CKEDITOR&&(t=e(t)[0],!(!CKEDITOR.dom.element.get(t)||!CKEDITOR.dom.element.get(t).getEditor()))},TogetherJS.addTracker(w,!0);var T="color date datetime datetime-local email tel text time week".split(/ /g);function C(t){var n=(t=e(t)).prop("tagName"),o=(t.prop("type")||"text").toLowerCase();return"TEXTAREA"==n||"INPUT"==n&&-1!=T.indexOf(o)}function S(t){return g(t=e(t))?t.prop("checked"):t.val()}function E(t,n){var o=!1;g(t=e(t))?!!t.prop("checked")!=(n=!!n)&&(o=!0,t.prop("checked",n)):t.val()!=n&&(o=!0,t.val(n));o&&r.fireChange(t)}function A(e,t,o){var r=t.getNextToSend();if(r){var i={type:"form-update",element:e,"server-echo":!0,replace:{id:r.id,basis:r.basis,delta:{start:r.delta.start,del:r.delta.del,text:r.delta.text}}};o&&(i.tracker=o),n.send(i)}}n.hub.on("form-update",function(t){if(t.sameUrl){var n,r=e(o.findElement(t.element));t.tracker&&(n=k(r,t.tracker),l(n));var i,a,c,h=r[0].ownerDocument.activeElement;if(C(h)&&(i=[h.selectionStart,h.selectionEnd]),C(r)&&(a=[r[0].selectionStart,r[0].selectionEnd]),t.replace){var d=r.data("togetherjsHistory");if(!d)return void console.warn("form update received for uninitialized form element");d.setSelection(a),t.replace.delta=s.TextReplace(t.replace.delta.start,t.replace.delta.del,t.replace.delta.text);var f=d.commit(t.replace),p=null;if(void 0!==n&&(p=n.trackerName),A(t.element,d,p),!f)return;c=d.current,a=d.getSelection()}else c=t.value;u=!0;try{n?n.update({value:c}):E(r,c),C(r)&&(r[0].selectionStart=a[0],r[0].selectionEnd=a[1]),h!=r[0]&&(h.focus(),C(h)&&(h.selectionStart=i[0],h.selectionEnd=i[1]))}finally{u=!1}}});var I=!1;function _(){I=!0;var t={type:"form-init",pageAge:Date.now()-TogetherJS.pageLoaded,updates:[]};e("textarea, input, select").each(function(){if(!(o.ignoreElement(this)||x(this)||h(this))){var n,r=e(this),i=S(r),s={element:o.elementLocation(this),value:i,elementType:(n=r,"TEXTAREA"==(n=e(n)[0]).tagName?"textarea":"SELECT"==n.tagName?"select":"INPUT"==n.tagName?(n.getAttribute("type")||"text").toLowerCase():"?")};if(C(r)){var a=r.data("togetherjsHistory");a&&(s.value=a.committed,s.basis=a.basis)}t.updates.push(s)}}),v.forEach(function(n){var r=n.makeInit();l(n.tracked(r.element));var i=e(r.element).data("togetherjsHistory");i&&(r.value=i.committed,r.basis=i.basis),r.element=o.elementLocation(e(r.element)),t.updates.push(r)}),t.updates.length&&n.send(t)}function N(){e("textarea, input, select").each(function(){if(!x(this)&&!o.ignoreElement(this)){var t=e(this),r=S(t);t.data("togetherjsHistory",s.SimpleHistory(n.clientId,r,1))}}),j(),l(!v.length),t.forEachAttr(m,function(t){var o=t.scan();o&&e.each(o,function(){var o=new t(this);e(this).data("togetherjsHistory",s.SimpleHistory(n.clientId,o.getContent(),1)),v.push(o)})})}n.on("reinitialize",N),n.on("ui-ready",N),n.on("close",j),n.hub.on("form-init",function(t){if(t.sameUrl){if(I){var r=Date.now()-TogetherJS.pageLoaded;if(t.pageAge<r)return}t.updates.forEach(function(r){var i;try{i=o.findElement(r.element)}catch(e){return void console.warn(e)}u=!0;try{if(r.tracker){var a=k(i,r.tracker);l(a),a.init(r,t)}else E(i,r.value);if(r.basis){var c=e(i).data("togetherjsHistory");c&&c.basis===r.basis&&1!==c.basis||e(i).data("togetherjsHistory",s.SimpleHistory(n.clientId,r.value,r.basis))}}finally{u=!1}})}});var D=null;function L(e){var t=e.target;o.ignoreElement(t)||x(t)?O(e):t!=D&&(D=t,n.send({type:"form-focus",element:o.elementLocation(t)}))}function O(e){e.target;D&&(D=null,n.send({type:"form-focus",element:null}))}var R={};return n.hub.on("form-focus",function(t){var n=R[t.peer.id];if(n&&(n.remove(),n=null),t.element){var r=o.findElement(t.element),s=function(t,n){var o=(n=e(n)).offset();if(!o)return console.warn("Could not get offset of element:",n[0]),null;var r=i.sub("focus",{peer:t});return(r=r.find(".togetherjs-focus")).css({top:o.top-c+"px",left:o.left-c+"px",width:n.outerWidth()+2*c+"px",height:n.outerHeight()+2*c+"px"}),e(document.body).append(r),r}(t.peer,r);s&&(R[t.peer.id]=s)}}),n.hub.on("hello",function(e){D&&setTimeout(function(){D&&n.send({type:"form-focus",element:o.elementLocation(D)})})}),n.on("ui-ready",function(){e(document).on("change",f),e(document).on("input keyup cut paste",d),e(document).on("focusin",L),e(document).on("focusout",O)}),n.on("close",function(){e(document).off("change",f),e(document).off("input keyup cut paste",d),e(document).off("focusin",L),e(document).off("focusout",O)}),n.hub.on("hello",function(e){e.sameUrl&&setTimeout(_)}),a}),n("startup",["util","require","jquery","windowing","storage"],function(e,t,n,o,r){e.assert;var i=e.Module("startup"),s=null,a=["browserBroken","browserUnsupported","sessionIntro","walkthrough","share"],l=null;i.start=function(){if(s){var e=-1;l&&(e=a.indexOf(l)),++e>=a.length?s.emit("startup-ready"):(l=a[e],c[l](i.start))}else t(["session"],function(e){s=e,i.start()})};var c={browserBroken:function(e){window.WebSocket?e():(o.show("#togetherjs-browser-broken",{onClose:function(){s.close()}}),n.browser.msie&&n("#togetherjs-browser-broken-is-ie").show())},browserUnsupported:function(e){if(n.browser.msie){var t=!0;o.show("#togetherjs-browser-unsupported",{onClose:function(){t?s.close():e()}}),n("#togetherjs-browser-unsupported-anyway").click(function(){t=!1})}else e()},sessionIntro:function(e){if(s.isClient&&s.firstRun)if(TogetherJS.config.close("suppressJoinConfirmation"),TogetherJS.config.get("suppressJoinConfirmation"))e();else{var t=!1;o.show("#togetherjs-intro",{onClose:function(){t||e()}}),n("#togetherjs-intro .togetherjs-modal-dont-join").click(function(){t=!0,o.hide(),s.close("declined-join")})}else e()},walkthrough:function(e){r.settings.get("seenIntroDialog").then(function(n){n?e():t(["walkthrough"],function(t){t.start(!0,function(){r.settings.set("seenIntroDialog",!0),e()})})})},share:function(e){TogetherJS.config.close("suppressInvite"),s.isClient||!s.firstRun||TogetherJS.config.get("suppressInvite")?e():t(["windowing"],function(e){e.show("#togetherjs-share")})}};return i}),n("videos",["jquery","util","session","elementFinder"],function(e,t,n,o){var r=[],i="timeupdate",s=["play","pause"],a=3e3;function l(){var t,n,o=e("video");t=o,s.forEach(function(e){n=c(e),t.on(e,n),r.push({name:e,listener:n})}),o.each(function(t,n){var o,s=(o=0,function(e){var t=e.target.currentTime;u(t,o)&&c(i)(e),o=t});e(n).on(i,s),r.push({name:i,listener:s})})}function c(e){return function(t,r){var i=t.target;r||(r={}),r.silent||n.send({type:"video-"+e,location:o.elementLocation(i),position:i.currentTime})}}function u(e,t){return 1e3*Math.abs(e-t)>a}function h(){var t=e("video");r.forEach(function(e){t.off(e.name,e.listener)}),r=[]}function d(t){return e(o.findElement(t))}function f(e,t){e.prop("currentTime",t)}n.on("reinitialize",function(){h(),l()}),n.on("ui-ready",l),n.on("close",h),n.hub.on("video-timeupdate",function(e){var t=d(e.location);u(t.prop("currentTime"),e.position)&&f(t,e.position)}),s.forEach(function(e){n.hub.on("video-"+e,function(t){var n=d(t.location);f(n,t.position),n.trigger(e,{silent:!0})})})}),n("walkthrough",["util","ui","jquery","windowing","templates","templating","session","peers"],function(e,t,n,o,r,i,s,a){var l=e.assert,c=e.Module("walkthrough"),u=null,h=null,d=null;function f(e){d.hide(),n(d[e]).show();var t=h.find("#togetherjs-walkthrough-progress .togetherjs-walkthrough-slide-progress");t.removeClass("togetherjs-active"),n(t[e]).addClass("togetherjs-active");var o=n("#togetherjs-walkthrough-next").removeClass("togetherjs-disabled"),r=n("#togetherjs-walkthrough-previous").removeClass("togetherjs-disabled");e==d.length-1?o.addClass("togetherjs-disabled"):0===e&&r.addClass("togetherjs-disabled")}function p(){var e=m();--e<0&&(e=0),f(e)}function g(){var e=m();++e>=d.length&&(e=d.length-1),f(e)}function m(){var e=d.filter(":visible");if(!e.length)return 0;for(var t=0;t<d.length;t++)if(d[t]==e[0])return t;return 0}return c.start=function(e,c){if(!h){(h=n(r.walkthrough)).hide(),t.container.append(h),(d=h.find(".togetherjs-walkthrough-slide")).hide();var m=n("#togetherjs-walkthrough-progress");d.each(function(e){var t=i.sub("walkthrough-slide-progress");m.append(t),t.click(function(){f(e)})}),h.find("#togetherjs-walkthrough-previous").click(p),h.find("#togetherjs-walkthrough-next").click(g),t.prepareShareLink(h),h.find(".togetherjs-self-name").bind("keyup",function(e){var t=n(e.target).val();a.Self.update({name:t})}),h.find(".togetherjs-swatch").click(function(){var e=n("#togetherjs-pick-color");if(e.is(":visible"))e.hide();else{e.show(),e.find(".togetherjs-swatch-active").removeClass("togetherjs-swatch-active"),e.find('.togetherjs-swatch[data-color="'+a.Self.color+'"]').addClass("togetherjs-swatch-active");var t=h.find(".togetherjs-swatch").offset();e.css({top:t.top,left:t.left-7})}}),s.isClient?(h.find(".togetherjs-if-creator").remove(),h.find(".togetherjs-ifnot-creator").show()):(h.find(".togetherjs-if-creator").show(),h.find(".togetherjs-ifnot-creator").remove()),t.activateAvatarEdit(h,{onSave:function(){h.find("#togetherjs-avatar-when-saved").show(),h.find("#togetherjs-avatar-when-unsaved").hide()},onPending:function(){h.find("#togetherjs-avatar-when-saved").hide(),h.find("#togetherjs-avatar-when-unsaved").show()}}),a.Self.update({}),s.emit("new-element",h)}l("boolean"==typeof e,"You must provide a firstTime boolean parameter"),e?(h.find(".togetherjs-walkthrough-firsttime").show(),h.find(".togetherjs-walkthrough-not-firsttime").hide()):(h.find(".togetherjs-walkthrough-firsttime").hide(),h.find(".togetherjs-walkthrough-not-firsttime").show()),u=c,f(0),o.show(h)},c.stop=function(){o.hide(h),u&&(u(),u=null)},s.on("hide-window",function(){u&&(u(),u=null)}),c}),n("webrtc",["require","jquery","util","session","ui","peers","storage","windowing"],function(e,t,n,o,r,i,s,a){var l=n.Module("webrtc"),c=n.assert;if(o.RTCSupported=!!(window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection),o.RTCSupported&&t.browser.mozilla&&parseInt(t.browser.version,10)<=19)try{new window.mozRTCPeerConnection}catch(e){o.RTCSupported=!1}var u={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};window.mozRTCPeerConnection&&(u.mandatory.MozDontOfferDataChannel=!0);var h=window.URL,d=window.mozRTCSessionDescription||window.webkitRTCSessionDescription||window.RTCSessionDescription,f=window.mozRTCIceCandidate||window.webkitRTCIceCandidate||window.RTCIceCandidate;function p(e){if(!window.mozRTCPeerConnection)return e;for(var t=e.split("\r\n"),n=[],o=0;o<t.length;o++)n.push(t[o]),-1!==t[o].search("m=")&&n.push("a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA");return e=n.join("\r\n")}function g(e,t,n){n=n||function(e){console.error("Error in getUserMedia:",e)},(navigator.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia).call(navigator,e,t,n)}function m(e){r.displayToggle(e),"#togetherjs-audio-incoming"==e?t("#togetherjs-audio-button").addClass("togetherjs-animated").addClass("togetherjs-color-alert"):t("#togetherjs-audio-button").removeClass("togetherjs-animated").removeClass("togetherjs-color-alert")}return o.on("ui-ready",function(){t("#togetherjs-self-avatar").click(function(){var e=i.Self.avatar;e&&s.attr("src",e),r.displayToggle("#togetherjs-avatar-edit")}),o.RTCSupported||t("#togetherjs-avatar-edit-rtc").hide();var e=null,s=t("#togetherjs-self-avatar-preview"),a=t("#togetherjs-self-avatar-accept"),l=t("#togetherjs-self-avatar-cancel"),u=t("#togetherjs-avatar-use-camera"),d=t("#togetherjs-avatar-video"),f=t("#togetherjs-avatar-upload");function p(t){e=t,s.attr("src",e),a.attr("disabled",null)}u.click(function(){m?function(){c(m);var e=d[0].videoHeight,n=d[0].videoWidth;n*=o.AVATAR_SIZE/e,e=o.AVATAR_SIZE;var r=t("<canvas>");r[0].height=o.AVATAR_SIZE,r[0].width=o.AVATAR_SIZE;var i=r[0].getContext("2d");i.arc(o.AVATAR_SIZE/2,o.AVATAR_SIZE/2,o.AVATAR_SIZE/2,0,2*Math.PI),i.closePath(),i.clip(),i.drawImage(d[0],(o.AVATAR_SIZE-n)/2,0,n,e),p(r[0].toDataURL("image/png"))}():g({video:!0,audio:!1},function(e){m=!0,d[0].src=h.createObjectURL(e),d[0].play()},function(e){console.error("getUserMedia error:",e)})}),a.click(function(){i.Self.update({avatar:e}),r.displayToggle("#togetherjs-no-avatar-edit"),t("#togetherjs-participants-other").show(),a.attr("disabled","1")}),l.click(function(){r.displayToggle("#togetherjs-no-avatar-edit"),t("#togetherjs-participants-other").show()});var m=!1;f.on("change",function(){var e=new FileReader;e.onload=function(){!function(e,n){var r=t("<canvas>");r[0].height=o.AVATAR_SIZE,r[0].width=o.AVATAR_SIZE;var i=r[0].getContext("2d"),s=new Image;s.src=e,setTimeout(function(){var e=s.naturalWidth||s.width,t=s.naturalHeight||s.height;e*=o.AVATAR_SIZE/t,t=o.AVATAR_SIZE,i.drawImage(s,0,0,e,t),n(r[0].toDataURL("image/png"))})}("data:image/jpeg;base64,"+n.blobToBase64(this.result),function(e){p(e)})},e.onerror=function(){console.error("Error reading file:",this.error)},e.readAsArrayBuffer(this.files[0])})}),o.on("ui-ready",function(){if(t("#togetherjs-audio-button").click(function(){t("#togetherjs-rtc-info").is(":visible")?a.hide():o.RTCSupported?function(){if(i=!0,s.settings.get("dontShowRtcInfo").then(function(e){e||a.show("#togetherjs-rtc-info")}),!e)return void E(N);l||N()}():a.show("#togetherjs-rtc-not-supported")}),o.RTCSupported){m("#togetherjs-audio-ready");var e=null,i=!1,l=!1,v=t("#togetherjs-audio-element"),y=null,b=null,w=!1,j=null,x=null,k=!1,T=null,C=null;r.container.find("#togetherjs-rtc-info .togetherjs-dont-show-again").change(function(){s.settings.set("dontShowRtcInfo",this.checked)}),o.hub.on("rtc-offer",function(t){function n(){I().setRemoteDescription(new d({type:"offer",sdp:b}),function(){w=!0,_(),N()},function(e){S("Error doing RTC setRemoteDescription:",e)})}(b||j||x||y)&&D(),b=t.offer,i?e?n():E(n):m("#togetherjs-audio-incoming")}),o.hub.on("rtc-answer",function(t){if(j||x||b||!y)return D(),void o.send({type:"rtc-abort"});x=t.answer,c(y),c(e),I().setRemoteDescription(new d({type:"answer",sdp:x}),function(){k=!0,N()},function(e){S("Error doing RTC setRemoteDescription:",e)})}),o.hub.on("rtc-ice-candidate",function(e){C=e.candidate,(w||k)&&_()}),o.hub.on("rtc-abort",function(t){D(),i&&(e?N():E(function(){N()}))}),o.hub.on("hello",function(e){m("#togetherjs-audio-ready"),i&&(y||j)&&(D(),N())})}else m("#togetherjs-audio-unavailable");function S(){console.warn.apply(console,arguments);for(var e="",n=0;n<arguments.length;n++){e&&(e+=" ");var o=arguments[n];if("string"==typeof o)e+=o;else{var r;try{r=JSON.stringify(o)}catch(e){}r||(r=""+o),e+=r}}m("#togetherjs-audio-error"),t("#togetherjs-audio-error").attr("title",e)}function E(t){g({video:!1,audio:!0},function(n){e=n,A("#togetherjs-local-audio",n),t&&t()},function(e){e&&1==e.code||S("getUserMedia error:",e)})}function A(e,n){e=t(e)[0],console.log("Attaching",n,"to",e),window.mozRTCPeerConnection?(e.mozSrcObject=n,e.play()):(e.autoplay=!0,e.src=h.createObjectURL(n))}function I(){if(c(e),T)return T;try{T=function(){if(window.webkitRTCPeerConnection)return new webkitRTCPeerConnection({iceServers:[{url:"stun:stun.l.google.com:19302"}]},{optional:[{DtlsSrtpKeyAgreement:!0}]});if(window.mozRTCPeerConnection)return new mozRTCPeerConnection({iceServers:[{url:"stun:23.21.150.121"}]},{optional:[]});throw new n.AssertionError("Called makePeerConnection() without supported connection")}()}catch(e){throw S("Error creating PeerConnection:",e),e}return T.onaddstream=function(e){console.log("got event",e,e.type),A(v,e.stream),m("#togetherjs-audio-active")},T.onstatechange=function(){console.log("state change",T.readyState),"closed"==T.readyState&&m("#togetherjs-audio-ready")},T.onicecandidate=function(e){e.candidate&&o.send({type:"rtc-ice-candidate",candidate:{sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid,candidate:e.candidate.candidate}})},T.addStream(e),T}function _(){C&&(console.log("adding ice",C),T.addIceCandidate(new f(C)))}function N(){var e=I();if(!b||w)if(y||b){if(!j&&!x){var t=setTimeout(function(){j||S("createAnswer Timed out; reload or restart browser")},2e3);e.createAnswer(function(n){n.sdp=p(n.sdp),clearTimeout(t),e.setLocalDescription(n,function(){o.send({type:"rtc-answer",answer:n.sdp}),j=n},function(e){clearTimeout(t),S("Error doing RTC setLocalDescription:",e)},u)},function(e){S("Error doing RTC createAnswer:",e)})}}else e.createOffer(function(t){console.log("made offer",t),t.sdp=p(t.sdp),e.setLocalDescription(t,function(){o.send({type:"rtc-offer",offer:t.sdp}),y=t,m("#togetherjs-audio-outgoing")},function(e){S("Error doing RTC setLocalDescription:",e)},u)},function(e){S("Error doing RTC createOffer:",e)});else e.setRemoteDescription(new d({type:"offer",sdp:b}),function(){w=!0,_(),N()},function(e){S("Error doing RTC setRemoteDescription:",e)})}function D(){j=x=y=b=null,k=w=!1,T=null,v[0].removeAttribute("src")}}),l}),n("who",["util","channels","session","ui"],function(e,t,n,o){var r=e.assert,i=e.Module("who");return i.getList=function(n){return e.Deferred(function(e){var o,r,s=t.WebSocketChannel(n),a={},l=0;s.onmessage=function(t){"init-connection"==t.type&&(o=t.peerCount),"who"==t.type&&setTimeout(function(){u()},2e3),"hello-back"==t.type&&(a[t.clientId]||(a[t.clientId]=i.ExternalPeer(t.clientId,t),o&&++l>=o?u():e.notify(a))),console.log("users",a)},s.send({type:"who","server-echo":!0,clientId:null});var c=setTimeout(function(){u()},5e3);function u(){c&&clearTimeout(c),r&&clearTimeout(r),s.close(),e.resolve(a)}})},i.invite=function(o,r){return e.Deferred(function(i){var s=t.WebSocketChannel(o),a=e.generateId();s.onmessage=function(e){"invite"==e.type&&e.inviteId==a&&(s.close(),i.resolve())};var l=n.makeHelloMessage(!1);delete l.type,l.clientId=n.clientId,s.send({type:"invite",inviteId:a,url:n.shareUrl(),userInfo:l,forClientId:r,clientId:null,"server-echo":!0})})},i.ExternalPeer=e.Class({isSelf:!1,isExternal:!0,constructor:function(e,t){t=t||{},r(e),this.id=e,this.identityId=t.identityId||null,this.status=t.status||"live",this.idle=t.status||"active",this.name=t.name||null,this.avatar=t.avatar||null,this.color=t.color||"#00FF00",this.lastMessageDate=0,this.view=o.PeerView(this)},className:function(t){return(t=t||"")+e.safeClassName(this.id)}}),i}),n("youtubeVideos",["jquery","util","session","elementFinder"],function(e,t,n,o){var r=3e3,i=[];function s(){if(e("iframe").each(function(t,n){-1==(e(n).attr("src")||"").indexOf("youtube")||e(n).attr("id")||(e(n).attr("id","youtube-player"+t),e(n).attr("enablejsapi",1),i[t]=n)}),window.onYouTubeIframeAPIReady=function(){e(i).each(function(e,t){new YT.Player(t.id,{events:{onReady:o,onStateChange:a}})})},void 0===window.YT){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}else onYouTubeIframeAPIReady();function o(t){var n=t.target,o=n.a;if(!e(o).data("togetherjs-player")){e(o).data("togetherjs-player",n),e(o).data("dontPublish",!1);var r=c(n.getVideoUrl());e(o).data("currentVideoId",r)}}}function a(t){var r,i,s,a,l,u=t.target,h=u.a,d=e(h).data("togetherjs-player"),f=u.k.currentTime,p=o.elementLocation(h);if(e(d).data("seek"))e(d).removeData("seek");else if(e(h).data("dontPublish"))e(h).data("dontPublish",!1);else if(t.data==YT.PlayerState.PLAYING){var g=(a=e(s=h).data("currentVideoId"),(l=c(e(s).data("togetherjs-player").getVideoUrl()))!=a&&l);g?(r=p,i=g,n.send({type:"differentVideoLoaded",videoId:i,element:r}),e(h).data("currentVideoId",g)):n.send({type:"playerStateChange",element:p,playerState:1,playerTime:f})}else{if(t.data!=YT.PlayerState.PAUSED)return;n.send({type:"playerStateChange",element:p,playerState:2,playerTime:f})}}function l(){i.forEach(function(t){var r=e(t).data("togetherjs-player"),i=c(r.getVideoUrl()),s=r.getPlayerState(),a=r.getCurrentTime(),l=o.elementLocation(t);n.send({type:"synchronizeVideosOfLateGuest",element:l,videoId:i,playerState:s,playerTime:a})})}function c(e){var t=e.split("v=")[1],n=t.indexOf("&");return-1!=n&&(t=t.substring(0,n)),t}function u(e,t){return 1e3*Math.abs(e-t)>r}n.on("reinitialize",function(){TogetherJS.config.get("youtube")&&s()}),n.on("close",function(){e(i).each(function(t,n){e(n).removeData("togetherjs-player"),e(n).removeData("dontPublish"),e(n).removeData("currentVideoId"),e(n).removeAttr("enablejsapi"),0===(e(n).attr("id")||"").indexOf("youtube-player")&&e(n).removeAttr("id"),i=[]})}),TogetherJS.config.track("youtube",function(e,t){e&&!t&&(s(),TogetherJS.config.close("youtube"))}),n.hub.on("playerStateChange",function(t){var n=o.findElement(t.element),r=e(n).data("togetherjs-player"),i=r.getCurrentTime();r.getPlayerState()!=t.playerState&&e(n).data("dontPublish",!0),1==t.playerState?(r.playVideo(),u(i,t.playerTime)&&r.seekTo(t.playerTime,!0)):2==t.playerState&&(r.pauseVideo(),u(i,t.playerTime)&&(e(r).data("seek",!0),r.seekTo(t.playerTime,!0)))}),n.hub.on("hello",function(){setTimeout(l,2e3)}),n.hub.on("synchronizeVideosOfLateGuest",function(t){var n=o.findElement(t.element),r=e(n).data("togetherjs-player"),i=e(n).data("currentVideoId");t.videoId!=i?(e(n).data("currentVideoId",t.videoId),r.loadVideoById(t.videoId,t.playerTime,"default")):5!=t.playerState&&r.seekTo(t.playerTime,!0)}),n.hub.on("differentVideoLoaded",function(t){var n=o.findElement(t.element);e(n).data("togetherjs-player").loadVideoById(t.videoId,0,"default"),e(n).data("currentVideoId",t.videoId)})}),TogetherJS.require=TogetherJS._requireObject=t,TogetherJS._loaded=!0,t(["session"])}();